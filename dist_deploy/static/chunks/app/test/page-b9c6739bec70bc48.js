(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5392],{32467:(e,t,s)=>{"use strict";s.d(t,{DX:()=>c});var i,a=s(12115),n=s(94446),r=s(95155),l=Symbol.for("react.lazy"),o=(i||(i=s.t(a,2)))[" use ".trim().toString()];function d(e){var t;return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===l&&"_payload"in e&&"object"==typeof(t=e._payload)&&null!==t&&"then"in t}var c=function(e){let t=function(e){let t=a.forwardRef((e,t)=>{let{children:s,...i}=e;if(d(s)&&"function"==typeof o&&(s=o(s._payload)),a.isValidElement(s)){var r;let e,l,o=(r=s,(l=(e=Object.getOwnPropertyDescriptor(r.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?r.ref:(l=(e=Object.getOwnPropertyDescriptor(r,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?r.props.ref:r.props.ref||r.ref),d=function(e,t){let s={...t};for(let i in t){let a=e[i],n=t[i];/^on[A-Z]/.test(i)?a&&n?s[i]=(...e)=>{let t=n(...e);return a(...e),t}:a&&(s[i]=a):"style"===i?s[i]={...a,...n}:"className"===i&&(s[i]=[a,n].filter(Boolean).join(" "))}return{...e,...s}}(i,s.props);return s.type!==a.Fragment&&(d.ref=t?(0,n.t)(t,o):o),a.cloneElement(s,d)}return a.Children.count(s)>1?a.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),s=a.forwardRef((e,s)=>{let{children:i,...n}=e;d(i)&&"function"==typeof o&&(i=o(i._payload));let l=a.Children.toArray(i),c=l.find(p);if(c){let e=c.props.children,i=l.map(t=>t!==c?t:a.Children.count(e)>1?a.Children.only(null):a.isValidElement(e)?e.props.children:null);return(0,r.jsx)(t,{...n,ref:s,children:a.isValidElement(e)?a.cloneElement(e,void 0,i):null})}return(0,r.jsx)(t,{...n,ref:s,children:i})});return s.displayName=`${e}.Slot`,s}("Slot"),u=Symbol("radix.slottable");function p(e){return a.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===u}},58887:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});var i=s(95155),a=s(12115),n=s(97003);function r(){let[e,t]=(0,a.useState)([{id:"unit",name:"Unit Tests",icon:"\uD83E\uDDEA",tests:[{id:"vitest",name:"Vitest Unit Tests",description:"Run all unit tests",status:"idle"}]},{id:"integration",name:"Integration Tests",icon:"\uD83D\uDD17",tests:[{id:"integration",name:"Integration Tests",description:"Run all integration tests",status:"idle"}]},{id:"compilation",name:"Compilation",icon:"⚙️",tests:[{id:"typescript",name:"TypeScript Compilation",description:"Check for TypeScript errors",status:"idle"},{id:"eslint",name:"ESLint",description:"Check code quality",status:"idle"}]},{id:"env",name:"Environment",icon:"\uD83C\uDF0D",tests:[{id:"env-vars",name:"Environment Variables",description:"Validate required env vars",status:"idle"},{id:"supabase",name:"Supabase Connection",description:"Test database connection",status:"idle"},{id:"signalwire",name:"SignalWire API",description:"Test SignalWire connection",status:"idle"}]},{id:"api",name:"API Health",icon:"\uD83C\uDF10",tests:[{id:"api-auth",name:"Authentication Endpoints",description:"Test auth routes",status:"idle"},{id:"api-voice",name:"Voice Endpoints",description:"Test voice API routes",status:"idle"},{id:"api-capabilities",name:"Capabilities Endpoint",description:"Test call capabilities",status:"idle"}]},{id:"features",name:"Feature Tests",icon:"✨",tests:[{id:"translation",name:"Live Translation",description:"Test translation feature",status:"idle"},{id:"recording",name:"Call Recording",description:"Test recording feature",status:"idle"},{id:"transcription",name:"Transcription",description:"Test transcription feature",status:"idle"}]},{id:"rbac",name:"RBAC & Permissions",icon:"\uD83D\uDD10",tests:[{id:"rbac-types",name:"RBAC Type Consistency",description:"Check Plan type alignment",status:"idle"},{id:"permissions",name:"Permission Matrix",description:"Validate API permissions",status:"idle"}]}]),[s,r]=(0,a.useState)(!1),[l,o]=(0,a.useState)(null),d=(e,s,i)=>{t(t=>t.map(t=>t.id===e?{...t,tests:t.tests.map(e=>e.id===s?{...e,...i}:e)}:t))},c=async(e,t)=>{let s=Date.now();d(e,t,{status:"running",duration:void 0,error:void 0,details:void 0});try{let i=await fetch("/api/test/run",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({categoryId:e,testId:t})}),a=await i.json(),n=Date.now()-s;d(e,t,{status:a.passed?"passed":a.warning?"warning":"failed",duration:n,details:a.details,error:a.error,output:a.output})}catch(i){d(e,t,{status:"failed",duration:Date.now()-s,error:i instanceof Error?i.message:"Unknown error"})}},u=async()=>{for(let t of(r(!0),o(new Date),e))for(let e of t.tests)await c(t.id,e.id);r(!1)},p=(()=>{let t=e.flatMap(e=>e.tests),s=t.filter(e=>"failed"===e.status).length,i=t.filter(e=>"warning"===e.status).length,a=t.filter(e=>"passed"===e.status).length,n=t.length;return s>0?{status:"failed",icon:"\uD83D\uDD34",text:"".concat(s," Failed")}:i>0?{status:"warning",icon:"\uD83D\uDFE1",text:"".concat(i," Warnings")}:a===n?{status:"passed",icon:"\uD83D\uDFE2",text:"All Passed"}:{status:"idle",icon:"⚪",text:"Not Run"}})();return(0,i.jsx)("main",{className:"min-h-screen bg-slate-950 text-slate-100 p-8",children:(0,i.jsxs)("div",{className:"max-w-7xl mx-auto space-y-8",children:[(0,i.jsxs)("header",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"text-3xl font-bold",children:"Test Dashboard"}),(0,i.jsx)("p",{className:"text-slate-400 mt-2",children:"Comprehensive test suite for Word Is Bond platform"}),l&&(0,i.jsxs)("p",{className:"text-sm text-slate-500 mt-1",children:["Last run: ",l.toLocaleString()]})]}),(0,i.jsxs)("div",{className:"flex items-center gap-4",children:[(0,i.jsxs)("div",{className:"text-right",children:[(0,i.jsx)("div",{className:"text-sm text-slate-400",children:"Overall Status"}),(0,i.jsxs)("div",{className:"text-2xl font-bold ".concat((e=>{switch(e){case"passed":return"text-green-400";case"failed":return"text-red-400";case"warning":return"text-yellow-400";case"running":return"text-blue-400";default:return"text-slate-500"}})(p.status)),children:[p.icon," ",p.text]})]}),(0,i.jsx)(n.$,{onClick:u,disabled:s,className:"bg-blue-600 hover:bg-blue-700",children:s?"⏳ Running...":"▶️ Run All Tests"})]})]}),(0,i.jsx)("section",{className:"grid grid-cols-4 gap-4",children:[{label:"Total Tests",value:e.flatMap(e=>e.tests).length,color:"slate"},{label:"Passed",value:e.flatMap(e=>e.tests).filter(e=>"passed"===e.status).length,color:"green"},{label:"Failed",value:e.flatMap(e=>e.tests).filter(e=>"failed"===e.status).length,color:"red"},{label:"Warnings",value:e.flatMap(e=>e.tests).filter(e=>"warning"===e.status).length,color:"yellow"}].map(e=>(0,i.jsxs)("div",{className:"bg-slate-900 p-4 rounded-lg border border-slate-800",children:[(0,i.jsx)("div",{className:"text-sm text-slate-400",children:e.label}),(0,i.jsx)("div",{className:"text-3xl font-bold text-".concat(e.color,"-400"),children:e.value})]},e.label))}),(0,i.jsx)("section",{className:"space-y-6",children:e.map(e=>(0,i.jsxs)("div",{className:"bg-slate-900 rounded-lg border border-slate-800 overflow-hidden",children:[(0,i.jsx)("div",{className:"bg-slate-800/50 px-6 py-4 border-b border-slate-700",children:(0,i.jsxs)("h2",{className:"text-xl font-semibold",children:[e.icon," ",e.name]})}),(0,i.jsx)("div",{className:"divide-y divide-slate-800",children:e.tests.map(t=>(0,i.jsx)("div",{className:"p-6",children:(0,i.jsxs)("div",{className:"flex items-start justify-between",children:[(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,i.jsx)("span",{className:"text-2xl",children:(e=>{switch(e){case"passed":return"\uD83D\uDFE2";case"failed":return"\uD83D\uDD34";case"warning":return"\uD83D\uDFE1";case"running":return"⏳";default:return"⚪"}})(t.status)}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"font-semibold text-lg",children:t.name}),(0,i.jsx)("p",{className:"text-sm text-slate-400",children:t.description})]})]}),"idle"!==t.status&&(0,i.jsxs)("div",{className:"ml-11 mt-3 space-y-2",children:[t.duration&&(0,i.jsxs)("div",{className:"text-sm text-slate-400",children:["⏱️ Duration: ",(0,i.jsxs)("span",{className:"font-mono",children:[t.duration,"ms"]})]}),t.details&&(0,i.jsx)("div",{className:"text-sm bg-slate-800 p-3 rounded border border-slate-700",children:(0,i.jsx)("pre",{className:"whitespace-pre-wrap text-slate-300",children:t.details})}),t.error&&(0,i.jsxs)("div",{className:"text-sm bg-red-900/20 border border-red-800 p-3 rounded",children:[(0,i.jsx)("div",{className:"font-semibold text-red-400 mb-1",children:"❌ Error:"}),(0,i.jsx)("pre",{className:"whitespace-pre-wrap text-red-300",children:t.error})]}),t.output&&t.output.length>0&&(0,i.jsxs)("div",{className:"text-sm bg-slate-800 p-3 rounded border border-slate-700 max-h-60 overflow-y-auto",children:[(0,i.jsx)("div",{className:"font-semibold text-slate-300 mb-2",children:"\uD83D\uDCC4 Output:"}),t.output.map((e,t)=>(0,i.jsx)("div",{className:"font-mono text-xs text-slate-400",children:e},t))]})]})]}),(0,i.jsxs)(n.$,{onClick:()=>c(e.id,t.id),disabled:"running"===t.status||s,variant:"outline",size:"sm",className:"ml-4",children:["running"===t.status?"⏳":"▶️"," Run"]})]})},t.id))})]},e.id))}),(0,i.jsxs)("footer",{className:"text-sm text-slate-500 text-center border-t border-slate-800 pt-6",children:[(0,i.jsx)("p",{children:"Test dashboard provides real-time validation of system health and functionality."}),(0,i.jsxs)("p",{className:"mt-1",children:["For CI/CD integration, use: ",(0,i.jsx)("code",{className:"bg-slate-800 px-2 py-1 rounded",children:"npm test"})]})]})]})})}},94446:(e,t,s)=>{"use strict";s.d(t,{s:()=>r,t:()=>n});var i=s(12115);function a(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function n(...e){return t=>{let s=!1,i=e.map(e=>{let i=a(e,t);return s||"function"!=typeof i||(s=!0),i});if(s)return()=>{for(let t=0;t<i.length;t++){let s=i[t];"function"==typeof s?s():a(e[t],null)}}}}function r(...e){return i.useCallback(n(...e),e)}},95322:(e,t,s)=>{Promise.resolve().then(s.bind(s,58887))},97003:(e,t,s)=>{"use strict";s.d(t,{$:()=>r});var i=s(95155),a=s(12115),n=s(32467);let r=a.forwardRef((e,t)=>{let{children:s,className:a="",variant:r="primary",size:l="md",loading:o=!1,disabled:d,asChild:c=!1,...u}=e,p=c?n.DX:"button",m="\n    inline-flex items-center justify-center \n    font-medium rounded-md\n    transition-colors duration-150\n    focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2\n    disabled:opacity-50 disabled:cursor-not-allowed\n  ".replace(/\s+/g," ").trim();return(0,i.jsx)(p,{ref:t,type:c?void 0:"button",className:"".concat(m," ").concat({default:"bg-[#1E3A5F] text-white hover:bg-[#15294A] focus-visible:ring-[#1E3A5F]",primary:"bg-[#1E3A5F] text-white hover:bg-[#15294A] focus-visible:ring-[#1E3A5F]",secondary:"bg-gray-100 text-gray-700 hover:bg-gray-200 focus-visible:ring-gray-500",outline:"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50 focus-visible:ring-[#1E3A5F]",ghost:"bg-transparent text-gray-600 hover:bg-gray-100 hover:text-gray-900 focus-visible:ring-gray-500",destructive:"bg-[#DC2626] text-white hover:bg-[#B91C1C] focus-visible:ring-[#DC2626]"}[r]," ").concat({sm:"h-9 px-3 text-sm",md:"h-10 px-4 text-sm",lg:"h-12 px-6 text-base"}[l]," ").concat(a),disabled:d||o,...u,children:o?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:"loading-spinner mr-2","aria-hidden":"true"}),(0,i.jsx)("span",{children:"Loading..."})]}):s})});r.displayName="Button"}},e=>{e.O(0,[8441,1255,7358],()=>e(e.s=95322)),_N_E=e.O()}]);