(()=>{var a={};a.id=4662,a.ids=[4662],a.modules={17:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>by});var d=c(21124),e=c(38301),f=c.n(e),g=c(57461),h=c(42378),i=c(19217),j=c(7629);let k={owner:"bg-amber-900/50 text-amber-300 border-amber-600",admin:"bg-purple-900/50 text-purple-300 border-purple-600",operator:"bg-blue-900/50 text-blue-300 border-blue-600",analyst:"bg-green-900/50 text-green-300 border-green-600",viewer:"bg-slate-700/50 text-slate-300 border-slate-600"},l={owner:"Full access, billing, and team management",admin:"Manage team, calls, and settings",operator:"Make calls, view recordings, run campaigns",analyst:"View recordings, transcripts, and analytics",viewer:"View-only access to dashboards"};function m({organizationId:a}){let[b,c]=(0,e.useState)([]),[f,g]=(0,e.useState)([]),[h,m]=(0,e.useState)(null),[n,o]=(0,e.useState)(!0),[p,q]=(0,e.useState)(null),[r,s]=(0,e.useState)(!1),[t,u]=(0,e.useState)(""),[v,w]=(0,e.useState)("operator"),[x,y]=(0,e.useState)(!1),[z,A]=(0,e.useState)(null);async function B(){if(a)try{o(!0);let a=await fetch("/api/team/members",{credentials:"include"}),b=await a.json();b.success?(c(b.members||[]),g(b.pending_invites||[]),m(b.current_user_id)):q(b.error?.message||"Failed to load team")}catch(a){q("Failed to load team")}finally{o(!1)}}async function C(a){if(a.preventDefault(),t.trim()){y(!0),q(null),A(null);try{let a=await fetch("/api/team/invite",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:t.trim(),role:v})}),b=await a.json();b.success?(A(`Invitation sent to ${t}`),u(""),s(!1),B()):q(b.error?.message||"Failed to send invitation")}catch(a){q("Failed to send invitation")}finally{y(!1)}}}async function D(a,b){try{let c=await fetch("/api/team/members",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({member_id:a,role:b})}),d=await c.json();d.success?B():q(d.error?.message||"Failed to update role")}catch(a){q("Failed to update role")}}async function E(a){if(confirm("Are you sure you want to remove this team member?"))try{let b=await fetch(`/api/team/members?member_id=${a}`,{method:"DELETE",credentials:"include"}),c=await b.json();c.success?B():q(c.error?.message||"Failed to remove member")}catch(a){q("Failed to remove member")}}async function F(a){try{let b=await fetch(`/api/team/invite?invite_id=${a}`,{method:"DELETE",credentials:"include"}),c=await b.json();c.success?B():q(c.error?.message||"Failed to cancel invitation")}catch(a){q("Failed to cancel invitation")}}let G=b.find(a=>a.user?.id===h)?.role,H="owner"===G||"admin"===G;return n?(0,d.jsxs)("div",{className:"p-8 text-center",children:[(0,d.jsx)("div",{className:"animate-spin w-8 h-8 border-2 border-teal-500 border-t-transparent rounded-full mx-auto"}),(0,d.jsx)("p",{className:"text-slate-400 mt-4",children:"Loading team..."})]}):(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)("h2",{className:"text-xl font-semibold text-white flex items-center gap-2",children:[(0,d.jsx)("span",{children:"\uD83D\uDC65"})," Team Management"]}),(0,d.jsxs)("p",{className:"text-sm text-slate-400",children:[b.length," member",1!==b.length?"s":"",f.length>0&&` • ${f.length} pending invite${1!==f.length?"s":""}`]})]}),H&&(0,d.jsx)(i.$,{onClick:()=>s(!0),className:"bg-teal-600 hover:bg-teal-700",children:"+ Invite Member"})]}),p&&(0,d.jsx)("div",{className:"p-3 bg-red-900/30 border border-red-700 rounded-lg text-red-400 text-sm",children:p}),z&&(0,d.jsx)("div",{className:"p-3 bg-green-900/30 border border-green-700 rounded-lg text-green-400 text-sm",children:z}),r&&(0,d.jsxs)("form",{onSubmit:C,className:"p-4 bg-slate-800/50 rounded-xl border border-slate-700",children:[(0,d.jsx)("h3",{className:"font-medium text-white mb-4",children:"Invite Team Member"}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,d.jsx)("div",{className:"md:col-span-2",children:(0,d.jsx)(j.p,{type:"email",placeholder:"colleague@company.com",value:t,onChange:a=>u(a.target.value),required:!0,className:"bg-slate-700 border-slate-600"})}),(0,d.jsxs)("select",{value:v,onChange:a=>w(a.target.value),className:"p-2 bg-slate-700 border border-slate-600 rounded-lg text-white",children:[(0,d.jsx)("option",{value:"admin",children:"Admin"}),(0,d.jsx)("option",{value:"operator",children:"Operator"}),(0,d.jsx)("option",{value:"analyst",children:"Analyst"}),(0,d.jsx)("option",{value:"viewer",children:"Viewer"})]})]}),(0,d.jsx)("p",{className:"text-xs text-slate-500 mt-2",children:l[v]}),(0,d.jsxs)("div",{className:"flex gap-2 mt-4",children:[(0,d.jsx)(i.$,{type:"submit",disabled:x,className:"bg-teal-600 hover:bg-teal-700",children:x?"Sending...":"Send Invitation"}),(0,d.jsx)(i.$,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Cancel"})]})]}),(0,d.jsx)("div",{className:"bg-slate-800/50 rounded-xl border border-slate-700 overflow-hidden",children:(0,d.jsxs)("table",{className:"w-full",children:[(0,d.jsx)("thead",{className:"bg-slate-900/50",children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{className:"text-left p-4 text-xs text-slate-400 uppercase tracking-wide",children:"Member"}),(0,d.jsx)("th",{className:"text-left p-4 text-xs text-slate-400 uppercase tracking-wide",children:"Role"}),(0,d.jsx)("th",{className:"text-left p-4 text-xs text-slate-400 uppercase tracking-wide",children:"Joined"}),H&&(0,d.jsx)("th",{className:"text-right p-4 text-xs text-slate-400 uppercase tracking-wide",children:"Actions"})]})}),(0,d.jsx)("tbody",{className:"divide-y divide-slate-700",children:b.map(a=>(0,d.jsxs)("tr",{className:"hover:bg-slate-700/30",children:[(0,d.jsx)("td",{className:"p-4",children:(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-teal-500 to-blue-500 flex items-center justify-center text-white font-bold",children:a.user?.email?.charAt(0).toUpperCase()||"?"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-white font-medium",children:a.user?.email}),a.user?.id===h&&(0,d.jsx)("span",{className:"text-xs text-teal-400",children:"You"})]})]})}),(0,d.jsx)("td",{className:"p-4",children:H&&"owner"!==a.role&&a.user?.id!==h?(0,d.jsxs)("select",{value:a.role,onChange:b=>D(a.id,b.target.value),className:`px-3 py-1 rounded-full text-xs font-medium border ${k[a.role]} bg-transparent cursor-pointer`,children:[(0,d.jsx)("option",{value:"admin",children:"Admin"}),(0,d.jsx)("option",{value:"operator",children:"Operator"}),(0,d.jsx)("option",{value:"analyst",children:"Analyst"}),(0,d.jsx)("option",{value:"viewer",children:"Viewer"})]}):(0,d.jsx)("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${k[a.role]}`,children:a.role.charAt(0).toUpperCase()+a.role.slice(1)})}),(0,d.jsx)("td",{className:"p-4 text-sm text-slate-400",children:new Date(a.created_at).toLocaleDateString()}),H&&(0,d.jsx)("td",{className:"p-4 text-right",children:"owner"!==a.role&&a.user?.id!==h&&(0,d.jsx)("button",{onClick:()=>E(a.id),className:"text-red-400 hover:text-red-300 text-sm",children:"Remove"})})]},a.id))})]})}),f.length>0&&(0,d.jsxs)("div",{className:"bg-slate-800/50 rounded-xl border border-slate-700 p-4",children:[(0,d.jsx)("h3",{className:"text-sm font-medium text-slate-300 mb-4",children:"Pending Invitations"}),(0,d.jsx)("div",{className:"space-y-2",children:f.map(a=>(0,d.jsxs)("div",{className:"flex items-center justify-between p-3 bg-slate-700/30 rounded-lg",children:[(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsx)("span",{className:"text-xl",children:"✉️"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-white",children:a.email}),(0,d.jsxs)("p",{className:"text-xs text-slate-400",children:["Role: ",a.role," • Expires ",new Date(a.expires_at).toLocaleDateString()]})]})]}),H&&(0,d.jsx)("button",{onClick:()=>F(a.id),className:"text-slate-400 hover:text-red-400 text-sm",children:"Cancel"})]},a.id))})]}),(0,d.jsxs)("div",{className:"bg-slate-800/30 rounded-xl border border-slate-700/50 p-4",children:[(0,d.jsx)("h3",{className:"text-sm font-medium text-slate-300 mb-3",children:"Role Permissions"}),(0,d.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-3",children:Object.entries(l).map(([a,b])=>(0,d.jsxs)("div",{className:"text-center p-2",children:[(0,d.jsx)("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-medium border ${k[a]} mb-2`,children:a.charAt(0).toUpperCase()+a.slice(1)}),(0,d.jsx)("p",{className:"text-xs text-slate-500",children:b})]},a))})]})]})}var n=c(22544),o=c(4803);function p({organizationId:a}){let[b,c]=(0,e.useState)([]),[f,g]=(0,e.useState)(null),[h,k]=(0,e.useState)(null),[l,m]=(0,e.useState)(!0),[p,q]=(0,e.useState)(null),[r,s]=(0,e.useState)(!1),[t,u]=(0,e.useState)(""),[v,w]=(0,e.useState)(""),[x,y]=(0,e.useState)("idle"),[z,A]=(0,e.useState)(""),[B,C]=(0,e.useState)(!1),D=async()=>{try{m(!0);let a=await fetch("/api/caller-id/verify",{credentials:"include"}),b=await a.json();b.success?(c(b.numbers||[]),g(b.current_mask),k(b.signalwire_number)):q("object"==typeof b.error?b.error?.message:b.error)}catch(a){q(a.message)}finally{m(!1)}},E=async()=>{if(t)try{C(!0),q(null);let a=await fetch("/api/caller-id/verify",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({phone_number:t,display_name:v||void 0})}),b=await a.json();b.success?(y("calling"),setTimeout(()=>{y("enter_code")},5e3)):q("object"==typeof b.error?b.error?.message:b.error)}catch(a){q(a.message)}finally{C(!1)}},F=async()=>{if(!z||6!==z.length)return void q("Please enter the 6-digit code");try{C(!0),q(null);let a=await fetch("/api/caller-id/verify",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({phone_number:t,code:z})}),b=await a.json();if(b.success&&b.verified)s(!1),u(""),w(""),y("idle"),A(""),D();else{let a="object"==typeof b.error?b.error?.message:b.error;q(a||"Verification failed")}}catch(a){q(a.message)}finally{C(!1)}},G=async(b,c)=>{try{(await fetch("/api/voice/config",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({orgId:a,modulations:{caller_id_mask:c,caller_id_verified:!0}})})).ok&&D()}catch(d){o.v.error("CallerIdManager: failed to set default mask",d,{organizationId:a,numberId:b,phoneNumber:c})}};return a?(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"text-base font-semibold text-gray-900",children:"Caller ID Masking"}),(0,d.jsx)("p",{className:"text-sm text-gray-500",children:"Display a different number when making outbound calls"})]}),(0,d.jsx)(i.$,{onClick:()=>s(!r),variant:r?"outline":"primary",size:"sm",children:r?"Cancel":"Add Number"})]}),(0,d.jsxs)("div",{className:"p-4 bg-gray-50 rounded-md border border-gray-200",children:[(0,d.jsx)("div",{className:"text-sm text-gray-500 mb-1",children:"Currently Displayed As:"}),(0,d.jsx)("div",{className:"text-base font-mono text-gray-900",children:f||h||"Default SignalWire Number"}),f&&f!==h&&(0,d.jsx)(n.E,{variant:"success",className:"mt-2",children:"Custom Mask Active"})]}),p&&(0,d.jsx)("div",{className:"p-3 bg-error-light border border-red-200 rounded-md text-error text-sm",role:"alert",children:p}),r&&(0,d.jsxs)("div",{className:"p-4 bg-white rounded-md border border-gray-200 space-y-4",children:[(0,d.jsx)("h4",{className:"font-medium text-gray-900",children:"Verify New Number"}),"idle"===x&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(j.p,{label:"Phone Number",type:"tel",value:t,onChange:a=>u(a.target.value),placeholder:"+12025551234",hint:"E.164 format required"}),(0,d.jsx)(j.p,{label:"Display Name (optional)",value:v,onChange:a=>w(a.target.value),placeholder:"Main Office"}),(0,d.jsx)(i.$,{onClick:E,disabled:B||!t,className:"w-full",variant:"primary",children:B?"Calling...":"Call to Verify"}),(0,d.jsx)("p",{className:"text-xs text-gray-500 text-center",children:"We will call this number and speak a 6-digit verification code"})]}),"calling"===x&&(0,d.jsxs)("div",{className:"text-center py-6",children:[(0,d.jsx)("div",{className:"w-12 h-12 mx-auto mb-4 rounded-full bg-primary-100 flex items-center justify-center",children:(0,d.jsx)("svg",{className:"w-6 h-6 text-primary-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})})}),(0,d.jsxs)("div",{className:"text-gray-900 mb-2",children:["Calling ",t,"..."]}),(0,d.jsx)("div",{className:"text-gray-500 text-sm",children:"Answer the call and listen for the 6-digit code"})]}),"enter_code"===x&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"text-center mb-4",children:(0,d.jsx)("div",{className:"text-gray-900 mb-2",children:"Enter the 6-digit code you heard:"})}),(0,d.jsx)(j.p,{type:"text",value:z,onChange:a=>A(a.target.value.replace(/\D/g,"").slice(0,6)),placeholder:"123456",maxLength:6,className:"text-center text-xl tracking-widest"}),(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsx)(i.$,{variant:"outline",onClick:()=>{y("idle"),A("")},className:"flex-1",children:"Try Again"}),(0,d.jsx)(i.$,{onClick:F,disabled:B||6!==z.length,className:"flex-1",variant:"primary",children:B?"Verifying...":"Verify"})]})]})]}),l?(0,d.jsx)("div",{className:"text-center py-8 text-gray-400",children:"Loading..."}):0===b.length?(0,d.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No verified numbers yet. Add one above."}):(0,d.jsx)("div",{className:"space-y-2",children:b.map(a=>(0,d.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-md border border-gray-200",children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)("span",{className:"font-mono text-gray-900",children:a.phone_number}),a.is_verified?(0,d.jsx)(n.E,{variant:"success",children:"Verified"}):(0,d.jsx)(n.E,{variant:"warning",children:"Pending"}),a.is_default&&(0,d.jsx)(n.E,{variant:"info",children:"Default"})]}),a.display_name&&(0,d.jsx)("div",{className:"text-sm text-gray-500",children:a.display_name})]}),a.is_verified&&!a.is_default&&(0,d.jsx)(i.$,{variant:"outline",size:"sm",onClick:()=>G(a.id,a.phone_number),children:"Set as Default"})]},a.id))}),(0,d.jsxs)("div",{className:"p-3 bg-info-light border border-blue-200 rounded-md text-sm",children:[(0,d.jsx)("strong",{className:"text-blue-700",children:"How it works:"}),(0,d.jsxs)("ul",{className:"text-gray-700 mt-1 list-disc list-inside",children:[(0,d.jsx)("li",{children:"We call your number and speak a verification code"}),(0,d.jsx)("li",{children:"Enter the code to prove you own the number"}),(0,d.jsx)("li",{children:"Once verified, outbound calls will display this number"})]})]})]}):(0,d.jsx)("div",{className:"text-gray-500 p-4",children:"Organization required"})}let q=[{value:"professional",label:"Professional - Formal, business-like"},{value:"casual",label:"Casual - Friendly, relaxed"},{value:"frustrated",label:"Frustrated - Impatient, testing patience"},{value:"elderly",label:"Elderly - Slower, may need repetition"},{value:"non-native",label:"Non-native - Accent, simpler vocabulary"},{value:"detailed",label:"Detail-oriented - Many questions"}],r={signalwire:[{value:"rime.spore",label:"English - Spore (Default)"},{value:"rime.koda",label:"English - Koda"},{value:"rime.alberto",label:"Spanish - Alberto"},{value:"rime.viola",label:"French - Viola"},{value:"rime.stella",label:"German - Stella"}],elevenlabs:[{value:"rachel",label:"Rachel (Female, Professional)"},{value:"adam",label:"Adam (Male, Conversational)"},{value:"custom",label:"Custom Voice ID"}]};function s({organizationId:a}){let[b,c]=(0,e.useState)([]),[f,g]=(0,e.useState)(!0),[h,k]=(0,e.useState)(null),[l,m]=(0,e.useState)(!1),[p,s]=(0,e.useState)(!1),[t,u]=(0,e.useState)(null),[v,w]=(0,e.useState)({type:"keyword",value:"",weight:20}),x=async()=>{if(a)try{g(!0);let b=await fetch(`/api/shopper/scripts/manage?orgId=${a}`,{credentials:"include"}),d=await b.json();if(d.success)c(d.scripts||[]);else{let a="object"==typeof d.error&&null!==d.error?d.error.message||d.error.code||JSON.stringify(d.error):d.error||"Failed to load scripts";k(a)}}catch(a){k(a.message||"Failed to load scripts")}finally{g(!1)}},y=()=>{u({name:"",description:"",script_text:`Hello, I'm calling to inquire about your services.

[Wait for response]

I'd like to schedule an appointment for next week if possible.

[Wait for response]

What availability do you have?

[Wait for response]

That sounds good. Can you tell me about your pricing?

[Wait for response]

Thank you for the information. I'll get back to you soon.`,persona:"professional",tts_provider:"signalwire",tts_voice:"rime.spore",expected_outcomes:[{type:"keyword",value:["appointment","schedule","available"],weight:30},{type:"sentiment",value:"positive",weight:40},{type:"duration_min",value:60,weight:20},{type:"response_time",value:5,weight:10}],is_active:!0}),m(!0)},z=async()=>{if(t&&a)try{s(!0);let b=await fetch("/api/shopper/scripts/manage",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({...t,organization_id:a})}),c=await b.json();if(c.success)m(!1),u(null),x();else{let a="object"==typeof c.error&&null!==c.error?c.error.message||c.error.code||JSON.stringify(c.error):c.error||"Failed to save script";k(a)}}catch(a){k(a.message||"Failed to save script")}finally{s(!1)}},A=async b=>{if(confirm("Delete this script?"))try{(await fetch(`/api/shopper/scripts/manage?id=${b}&orgId=${a}`,{method:"DELETE",credentials:"include"})).ok&&x()}catch(c){o.v.error("ShopperScriptManager: failed to delete script",c,{organizationId:a,scriptId:b})}};return a?(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsx)("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-md",children:(0,d.jsxs)("div",{className:"flex items-start gap-3",children:[(0,d.jsx)("svg",{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h4",{className:"text-sm font-medium text-blue-800",children:"AI Quality Evaluation - Internal QA Only"}),(0,d.jsx)("p",{className:"text-xs text-blue-700 mt-1",children:"These scripts are for internal quality assurance evaluations only. AI evaluation calls include an automatic disclosure and cannot be used for capturing customer agreements or confirmations."})]})]})}),(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"AI Quality Evaluation Scripts"}),(0,d.jsx)("p",{className:"text-sm text-gray-500",children:"Create scripts for AI-powered QA evaluations. For internal evaluation purposes only."})]}),(0,d.jsx)(i.$,{onClick:y,variant:"primary",children:"New Script"})]}),h&&(0,d.jsx)("div",{className:"p-3 bg-error-light border border-red-200 rounded-md text-error text-sm",children:h}),f&&(0,d.jsx)("div",{className:"text-center py-8 text-gray-500",children:"Loading scripts..."}),!f&&0===b.length&&!l&&(0,d.jsxs)("div",{className:"text-center py-12 bg-gray-50 rounded-md border border-gray-200",children:[(0,d.jsxs)("svg",{className:"w-12 h-12 mx-auto mb-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),(0,d.jsx)("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Evaluation Scripts Yet"}),(0,d.jsx)("p",{className:"text-gray-500 mb-4",children:"Create an AI quality evaluation script to test your call handling"}),(0,d.jsx)(i.$,{onClick:y,children:"Create Your First Script"})]}),!f&&b.length>0&&!l&&(0,d.jsx)("div",{className:"space-y-3",children:b.map(a=>(0,d.jsx)("div",{className:"p-4 bg-white rounded-md border border-gray-200 hover:border-gray-300 transition-colors",children:(0,d.jsxs)("div",{className:"flex items-start justify-between",children:[(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,d.jsx)("h4",{className:"font-medium text-gray-900",children:a.name}),(0,d.jsx)(n.E,{variant:a.is_active?"success":"default",children:a.is_active?"Active":"Inactive"}),(0,d.jsx)(n.E,{variant:"default",children:a.persona})]}),a.description&&(0,d.jsx)("p",{className:"text-sm text-gray-500 mb-2",children:a.description}),(0,d.jsxs)("div",{className:"flex gap-4 text-xs text-gray-400",children:[(0,d.jsxs)("span",{children:["TTS: ",a.tts_provider]}),(0,d.jsxs)("span",{children:["Voice: ",a.tts_voice]}),(0,d.jsxs)("span",{children:["Outcomes: ",a.expected_outcomes?.length||0]}),(0,d.jsxs)("span",{children:["Used: ",a.use_count," times"]})]})]}),(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsx)(i.$,{variant:"outline",size:"sm",onClick:()=>{u({...a}),m(!0)},children:"Edit"}),(0,d.jsx)(i.$,{variant:"ghost",size:"sm",onClick:()=>A(a.id),className:"text-error hover:text-error",children:"Delete"})]})]})},a.id))}),l&&t&&(0,d.jsxs)("div",{className:"bg-white rounded-md border border-gray-200 p-6 space-y-6",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("h4",{className:"text-lg font-semibold text-gray-900",children:t.id?"Edit Script":"New Script"}),(0,d.jsx)(i.$,{variant:"outline",size:"sm",onClick:()=>m(!1),children:"Cancel"})]}),(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,d.jsx)(j.p,{label:"Script Name",value:t.name||"",onChange:a=>u({...t,name:a.target.value}),placeholder:"Appointment Inquiry Test"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Persona"}),(0,d.jsx)("select",{value:t.persona||"professional",onChange:a=>u({...t,persona:a.target.value}),className:"w-full px-3 py-2 bg-white border border-gray-300 rounded-md text-gray-900 focus:ring-2 focus:ring-primary-600 focus:border-primary-600",children:q.map(a=>(0,d.jsx)("option",{value:a.value,children:a.label},a.value))})]})]}),(0,d.jsx)(j.p,{label:"Description",value:t.description||"",onChange:a=>u({...t,description:a.target.value}),placeholder:"Tests how staff handles appointment requests"}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Script Text ",(0,d.jsx)("span",{className:"text-gray-400",children:"(Use [Wait for response] for pauses)"})]}),(0,d.jsx)("textarea",{value:t.script_text||"",onChange:a=>u({...t,script_text:a.target.value}),rows:10,className:"w-full px-3 py-2 bg-white border border-gray-300 rounded-md text-gray-900 font-mono text-sm focus:ring-2 focus:ring-primary-600 focus:border-primary-600",placeholder:"Hello, I'm calling to inquire about..."})]}),(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"TTS Provider"}),(0,d.jsxs)("select",{value:t.tts_provider||"signalwire",onChange:a=>u({...t,tts_provider:a.target.value,tts_voice:"signalwire"===a.target.value?"rime.spore":"rachel"}),className:"w-full px-3 py-2 bg-white border border-gray-300 rounded-md text-gray-900 focus:ring-2 focus:ring-primary-600 focus:border-primary-600",children:[(0,d.jsx)("option",{value:"signalwire",children:"SignalWire (Default)"}),(0,d.jsx)("option",{value:"elevenlabs",children:"ElevenLabs (Premium)"})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Voice"}),(0,d.jsx)("select",{value:t.tts_voice||"",onChange:a=>u({...t,tts_voice:a.target.value}),className:"w-full px-3 py-2 bg-white border border-gray-300 rounded-md text-gray-900 focus:ring-2 focus:ring-primary-600 focus:border-primary-600",children:r[t.tts_provider]?.map(a=>(0,d.jsx)("option",{value:a.value,children:a.label},a.value))})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expected Outcomes (for scoring)"}),(0,d.jsx)("div",{className:"space-y-2 mb-4",children:t.expected_outcomes?.map((a,b)=>(0,d.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded-md",children:[(0,d.jsx)(n.E,{variant:"default",children:a.type}),(0,d.jsx)("span",{className:"text-sm text-gray-700 flex-1",children:Array.isArray(a.value)?a.value.join(", "):String(a.value)}),(0,d.jsxs)("span",{className:"text-xs text-gray-400",children:["Weight: ",a.weight,"%"]}),(0,d.jsx)(i.$,{variant:"ghost",size:"sm",onClick:()=>{t&&u({...t,expected_outcomes:t.expected_outcomes?.filter((a,c)=>c!==b)})},className:"text-error",children:(0,d.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},b))}),(0,d.jsxs)("div",{className:"flex gap-2 items-end",children:[(0,d.jsx)("div",{className:"flex-1",children:(0,d.jsxs)("select",{value:v.type,onChange:a=>w({...v,type:a.target.value}),className:"w-full px-3 py-2 bg-white border border-gray-300 rounded-md text-gray-900 text-sm focus:ring-2 focus:ring-primary-600 focus:border-primary-600",children:[(0,d.jsx)("option",{value:"keyword",children:"Keyword (comma-separated)"}),(0,d.jsx)("option",{value:"sentiment",children:"Sentiment (positive/negative/neutral)"}),(0,d.jsx)("option",{value:"duration_min",children:"Minimum Duration (seconds)"}),(0,d.jsx)("option",{value:"duration_max",children:"Maximum Duration (seconds)"}),(0,d.jsx)("option",{value:"response_time",children:"Response Time (seconds)"})]})}),(0,d.jsx)("div",{className:"flex-1",children:(0,d.jsx)(j.p,{value:v.value||"",onChange:a=>w({...v,value:a.target.value}),placeholder:"keyword"===v.type?"appointment, schedule":"positive"})}),(0,d.jsx)("div",{className:"w-20",children:(0,d.jsx)(j.p,{type:"number",value:v.weight||20,onChange:a=>w({...v,weight:parseInt(a.target.value)}),placeholder:"Weight"})}),(0,d.jsx)(i.$,{variant:"outline",size:"sm",onClick:()=>{if(!t||!v.type||!v.value)return;let a={type:v.type,value:"keyword"===v.type?v.value.split(",").map(a=>a.trim()):v.value,weight:v.weight||20};u({...t,expected_outcomes:[...t.expected_outcomes||[],a]}),w({type:"keyword",value:"",weight:20})},children:"Add"})]})]}),(0,d.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:[(0,d.jsx)(i.$,{variant:"outline",onClick:()=>m(!1),children:"Cancel"}),(0,d.jsx)(i.$,{onClick:z,disabled:p||!t.name||!t.script_text,variant:"primary",children:p?"Saving...":"Save Script"})]})]}),(0,d.jsxs)("div",{className:"p-4 bg-info-light border border-blue-200 rounded-md",children:[(0,d.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"How Secret Shopper Works"}),(0,d.jsxs)("ul",{className:"text-sm text-gray-600 space-y-1 list-disc list-inside",children:[(0,d.jsxs)("li",{children:[(0,d.jsx)("strong",{children:"Script:"})," The synthetic caller follows this conversation script"]}),(0,d.jsxs)("li",{children:[(0,d.jsx)("strong",{children:"TTS:"})," Uses SignalWire or ElevenLabs to speak the script naturally"]}),(0,d.jsxs)("li",{children:[(0,d.jsx)("strong",{children:"Expected Outcomes:"})," What we check for when scoring the call"]}),(0,d.jsxs)("li",{children:[(0,d.jsx)("strong",{children:"Sentiment Analysis:"})," AI analyzes the overall tone of the call"]}),(0,d.jsxs)("li",{children:[(0,d.jsx)("strong",{children:"Scoring:"})," Weighted scores based on outcomes (0-100 scale)"]})]})]})]}):(0,d.jsx)("div",{className:"text-gray-500 p-4",children:"Organization required"})}let t=[{id:"qa-basic",name:"QA Fundamentals",description:"Baseline QA checks for call quality and compliance.",criteria:[{id:"greeting",name:"Proper greeting",weight:20,type:"boolean"},{id:"resolution",name:"Issue resolution",weight:30,type:"text",min:70},{id:"compliance",name:"Compliance disclosure",weight:30,type:"boolean"},{id:"duration",name:"Call duration",weight:20,type:"numeric",min:60,max:600}]},{id:"sales-qa",name:"Sales QA",description:"Sales-oriented criteria focused on conversion signals.",criteria:[{id:"needs",name:"Needs discovery",weight:25,type:"text",min:70},{id:"pricing",name:"Pricing clarity",weight:25,type:"text",min:70},{id:"next_step",name:"Clear next step",weight:25,type:"boolean"},{id:"sentiment",name:"Positive sentiment",weight:25,type:"text",min:60}]},{id:"compliance",name:"Compliance Essentials",description:"Disclosure and policy adherence checks.",criteria:[{id:"consent",name:"Consent captured",weight:40,type:"boolean"},{id:"disclosure",name:"Required disclosure",weight:40,type:"boolean"},{id:"duration",name:"Call duration",weight:20,type:"numeric",min:30,max:900}]}];function u({organizationId:a,disabled:b}){let[c,f]=(0,e.useState)(null),[g,h]=(0,e.useState)(null);async function j(c){if(a&&!b){f(c.id),h(null);try{let a=await fetch("/api/scorecards",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({name:c.name,description:c.description,structure:{criteria:c.criteria}})});if(!a.ok){let b=await a.json().catch(()=>({}));throw Error(b?.error?.message||"Failed to create scorecard")}}catch(a){h(a?.message||"Failed to create scorecard")}finally{f(null)}}}return(0,d.jsxs)("section",{className:"space-y-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"text-base font-semibold text-gray-900",children:"Scorecard Template Library"}),(0,d.jsx)("p",{className:"text-sm text-gray-500",children:"Start with vetted templates and customize as needed."})]}),g&&(0,d.jsx)("div",{className:"p-3 bg-error-light border border-red-200 rounded-md text-error text-sm",children:g}),(0,d.jsx)("div",{className:"grid md:grid-cols-3 gap-4",children:t.map(a=>(0,d.jsxs)("div",{className:"bg-white border border-gray-200 rounded-md p-4",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,d.jsx)("p",{className:"text-sm font-semibold text-gray-900",children:a.name}),(0,d.jsx)(n.E,{variant:"info",children:"Template"})]}),(0,d.jsx)("p",{className:"text-xs text-gray-600 mb-3",children:a.description}),(0,d.jsx)("ul",{className:"text-xs text-gray-600 space-y-1 mb-4",children:a.criteria.map(a=>(0,d.jsxs)("li",{children:["• ",a.name]},a.id))}),(0,d.jsx)(i.$,{variant:"secondary",size:"sm",onClick:()=>j(a),disabled:!!b||c===a.id,children:c===a.id?"Creating...":"Use Template"})]},a.id))})]})}var v=c(67725);function w({organizationId:a,onTargetSelect:b}){let[c,f]=(0,e.useState)([]),[g,h]=(0,e.useState)(!0),[k,l]=(0,e.useState)(null),[m,p]=(0,e.useState)(!1),[q,r]=(0,e.useState)(!1),[s,t]=(0,e.useState)(""),[u,w]=(0,e.useState)(""),[x,y]=(0,e.useState)(""),{config:z,updateConfig:A}=(0,v.g)(a),B=z?.target_id,C=async()=>{if(a)try{h(!0),l(null);let b=await fetch(`/api/voice/targets?orgId=${encodeURIComponent(a)}`,{credentials:"include"}),c=await b.json();c.success?f(c.targets||[]):l(c.error?.message||c.error||"Failed to load targets")}catch(a){l(a.message||"Failed to load targets")}finally{h(!1)}},D=async()=>{if(s&&a){if(!/^\+[1-9]\d{1,14}$/.test(s))return void l("Phone number must be in E.164 format (e.g., +12025551234)");try{r(!0),l(null);let b=await fetch("/api/voice/targets",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({organization_id:a,phone_number:s,name:u||void 0,description:x||void 0})}),d=await b.json();d.success?(p(!1),t(""),w(""),y(""),C(),0===c.length&&d.target?.id&&E(d.target.id)):l(d.error?.message||d.error||"Failed to add target")}catch(a){l(a.message||"Failed to add target")}finally{r(!1)}}},E=async c=>{if(a)try{l(null),await A({target_id:c}),b?.(c)}catch(a){l(a.message||"Failed to select target")}},F=async c=>{if(confirm("Delete this target number?"))try{(await fetch(`/api/voice/targets?id=${c}&orgId=${a}`,{method:"DELETE",credentials:"include"})).ok&&(B===c&&(await A({target_id:null}),b?.(null)),C())}catch(b){o.v.error("VoiceTargetManager: failed to delete target",b,{organizationId:a,targetId:c})}};return a?(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Call Targets"}),(0,d.jsx)("p",{className:"text-sm text-gray-500",children:"Add phone numbers to call for testing and monitoring"})]}),(0,d.jsx)(i.$,{onClick:()=>p(!m),variant:m?"outline":"primary",children:m?"Cancel":"Add Number"})]}),B&&(0,d.jsxs)("div",{className:"p-4 bg-success-light rounded-md border border-green-200",children:[(0,d.jsx)("div",{className:"text-sm text-gray-600 mb-1",children:"Currently Selected Target:"}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)("span",{className:"text-lg font-mono text-gray-900",children:c.find(a=>a.id===B)?.phone_number||B}),(0,d.jsx)(n.E,{variant:"success",children:"Active"})]}),c.find(a=>a.id===B)?.name&&(0,d.jsx)("div",{className:"text-sm text-gray-500 mt-1",children:c.find(a=>a.id===B)?.name})]}),k&&(0,d.jsx)("div",{className:"p-3 bg-error-light border border-red-200 rounded-md text-error text-sm",children:k}),m&&(0,d.jsxs)("div",{className:"p-4 bg-white rounded-md border border-gray-200 space-y-4",children:[(0,d.jsx)("h4",{className:"font-medium text-gray-900",children:"Add New Target Number"}),(0,d.jsx)(j.p,{label:"Phone Number",type:"tel",value:s,onChange:a=>t(a.target.value),placeholder:"+12025551234",hint:"E.164 format required (e.g., +12025551234)"}),(0,d.jsx)(j.p,{label:"Name (optional)",value:u,onChange:a=>w(a.target.value),placeholder:"Main Support Line"}),(0,d.jsx)(j.p,{label:"Description (optional)",value:x,onChange:a=>y(a.target.value),placeholder:"24/7 customer support line"}),(0,d.jsx)(i.$,{onClick:D,disabled:q||!s,variant:"primary",className:"w-full",children:q?"Adding...":"Add Target Number"})]}),g?(0,d.jsx)("div",{className:"text-center py-8 text-gray-500",children:"Loading targets..."}):0===c.length?(0,d.jsxs)("div",{className:"text-center py-12 bg-gray-50 rounded-md border border-gray-200",children:[(0,d.jsx)("svg",{className:"w-12 h-12 mx-auto mb-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),(0,d.jsx)("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Target Numbers"}),(0,d.jsx)("p",{className:"text-gray-500 mb-4",children:"Add a phone number to start making test calls"}),(0,d.jsx)(i.$,{onClick:()=>p(!0),children:"Add Your First Target"})]}):(0,d.jsx)("div",{className:"space-y-2",children:c.map(a=>(0,d.jsxs)("div",{className:`flex items-center justify-between p-3 rounded-md border transition-colors cursor-pointer ${B===a.id?"bg-success-light border-green-200":"bg-white border-gray-200 hover:border-gray-300"}`,onClick:()=>E(a.id),children:[(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)("span",{className:"font-mono text-gray-900",children:a.phone_number}),B===a.id&&(0,d.jsx)(n.E,{variant:"success",children:"Selected"}),a.is_active?(0,d.jsx)(n.E,{variant:"default",children:"Active"}):(0,d.jsx)(n.E,{variant:"warning",children:"Inactive"})]}),a.name&&(0,d.jsx)("div",{className:"text-sm text-gray-500",children:a.name}),a.description&&(0,d.jsx)("div",{className:"text-xs text-gray-400",children:a.description})]}),(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsx)(i.$,{variant:"outline",size:"sm",onClick:b=>{b.stopPropagation(),E(a.id)},disabled:B===a.id,children:B===a.id?"Selected":"Select"}),(0,d.jsx)(i.$,{variant:"ghost",size:"sm",onClick:b=>{b.stopPropagation(),F(a.id)},className:"text-error hover:text-error",children:"Delete"})]})]},a.id))}),(0,d.jsxs)("div",{className:"p-3 bg-info-light border border-blue-200 rounded-md text-sm",children:[(0,d.jsx)("strong",{className:"text-gray-900",children:"How it works:"}),(0,d.jsxs)("ul",{className:"text-gray-600 mt-1 list-disc list-inside",children:[(0,d.jsx)("li",{children:"Add phone numbers you want to call (support lines, test numbers)"}),(0,d.jsx)("li",{children:"Select a target to make it active for the next call"}),(0,d.jsx)("li",{children:"All calls will go to the selected target number"}),(0,d.jsx)("li",{children:"Use with Secret Shopper scripts for quality testing"})]})]})]}):(0,d.jsx)("div",{className:"text-gray-500 p-4",children:"Organization required"})}var x=c(92179);let y=[{value:"scale",label:"Rating Scale (1-5)"},{value:"yes_no",label:"Yes/No"},{value:"text",label:"Free Text"},{value:"multiple_choice",label:"Multiple Choice"}];function z({organizationId:a}){let[b,c]=(0,e.useState)([]),[f,g]=(0,e.useState)(!0),[h,k]=(0,e.useState)(null),[l,m]=(0,e.useState)(!1),[p,q]=(0,e.useState)(!1),{role:r,plan:s}=(0,x.e)(a),t="owner"===r||"admin"===r,u=s&&["insights","global","business","enterprise"].includes(s),[v,w]=(0,e.useState)(null),[z,A]=(0,e.useState)({text:"",type:"scale",required:!0}),[B,C]=(0,e.useState)(""),D=async()=>{if(a)try{g(!0),k(null);let b=await fetch(`/api/surveys?orgId=${encodeURIComponent(a)}`,{credentials:"include"}),d=await b.json();d.success?c(d.surveys||[]):d.error?.code==="PLAN_LIMIT_EXCEEDED"?c([]):k(d.error?.message||d.error||"Failed to load surveys")}catch(a){k(a.message||"Failed to load surveys")}finally{g(!1)}},E=()=>{w({name:"",description:"",questions:[],is_active:!0}),m(!0)},F=async()=>{if(v&&a&&v.name)try{q(!0),k(null);let b=await fetch("/api/surveys",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({...v,organization_id:a})}),c=await b.json();c.success?(m(!1),w(null),D()):k(c.error?.message||c.error||"Failed to save survey")}catch(a){k(a.message||"Failed to save survey")}finally{q(!1)}},G=async b=>{if(confirm("Delete this survey?"))try{(await fetch(`/api/surveys?id=${b}&orgId=${a}`,{method:"DELETE",credentials:"include"})).ok&&D()}catch(c){o.v.error("SurveyBuilder: failed to delete survey",c,{organizationId:a,surveyId:b})}},H=()=>{B.trim()&&(A({...z,options:[...z.options||[],B.trim()]}),C(""))};return a?u?(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Survey Builder"}),(0,d.jsx)("p",{className:"text-sm text-gray-500",children:"Create after-call surveys to gather customer feedback"})]}),t&&(0,d.jsx)(i.$,{onClick:E,variant:"primary",children:"New Survey"})]}),h&&(0,d.jsx)("div",{className:"p-3 bg-error-light border border-red-200 rounded-md text-error text-sm",children:h}),f&&(0,d.jsx)("div",{className:"text-center py-8 text-gray-500",children:"Loading surveys..."}),!f&&0===b.length&&!l&&(0,d.jsxs)("div",{className:"text-center py-12 bg-gray-50 rounded-md border border-gray-200",children:[(0,d.jsx)("svg",{className:"w-12 h-12 mx-auto mb-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,d.jsx)("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Surveys Yet"}),(0,d.jsx)("p",{className:"text-gray-500 mb-4",children:"Create a survey to collect feedback after calls"}),t&&(0,d.jsx)(i.$,{onClick:E,children:"Create Your First Survey"})]}),!f&&b.length>0&&!l&&(0,d.jsx)("div",{className:"space-y-3",children:b.map(a=>(0,d.jsxs)("div",{className:"p-4 bg-white rounded-md border border-gray-200 hover:border-gray-300 transition-colors",children:[(0,d.jsxs)("div",{className:"flex items-start justify-between",children:[(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,d.jsx)("h4",{className:"font-medium text-gray-900",children:a.name}),(0,d.jsx)(n.E,{variant:a.is_active?"success":"default",children:a.is_active?"Active":"Inactive"})]}),a.description&&(0,d.jsx)("p",{className:"text-sm text-gray-500 mb-2",children:a.description}),(0,d.jsxs)("div",{className:"flex gap-4 text-xs text-gray-400",children:[(0,d.jsxs)("span",{children:[a.questions?.length||0," questions"]}),(0,d.jsxs)("span",{children:["Created ",new Date(a.created_at).toLocaleDateString()]}),void 0!==a.use_count&&(0,d.jsxs)("span",{children:[a.use_count," responses"]})]})]}),t&&(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsx)(i.$,{variant:"outline",size:"sm",onClick:()=>{w({...a}),m(!0)},children:"Edit"}),(0,d.jsx)(i.$,{variant:"ghost",size:"sm",onClick:()=>G(a.id),className:"text-error hover:text-error",children:"Delete"})]})]}),a.questions&&a.questions.length>0&&(0,d.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-100",children:[(0,d.jsx)("div",{className:"text-xs text-gray-400 mb-2",children:"Questions:"}),(0,d.jsxs)("div",{className:"space-y-1",children:[a.questions.slice(0,3).map((a,b)=>(0,d.jsxs)("div",{className:"text-sm text-gray-600",children:[b+1,". ",a.text,(0,d.jsxs)("span",{className:"text-gray-400 ml-2",children:["(",a.type,")"]})]},a.id)),a.questions.length>3&&(0,d.jsxs)("div",{className:"text-xs text-gray-400",children:["+",a.questions.length-3," more questions"]})]})]})]},a.id))}),l&&v&&(0,d.jsxs)("div",{className:"bg-white rounded-md border border-gray-200 p-6 space-y-6",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("h4",{className:"text-lg font-semibold text-gray-900",children:v.id?"Edit Survey":"New Survey"}),(0,d.jsx)(i.$,{variant:"outline",size:"sm",onClick:()=>m(!1),children:"Cancel"})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,d.jsx)(j.p,{label:"Survey Name",value:v.name||"",onChange:a=>w({...v,name:a.target.value}),placeholder:"Customer Satisfaction Survey"}),(0,d.jsx)(j.p,{label:"Description",value:v.description||"",onChange:a=>w({...v,description:a.target.value}),placeholder:"Post-call survey to measure satisfaction"})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Questions (",v.questions?.length||0,")"]}),(0,d.jsx)("div",{className:"space-y-2 mb-4",children:v.questions?.map((a,b)=>(0,d.jsxs)("div",{className:"flex items-start gap-2 p-3 bg-gray-50 rounded-md",children:[(0,d.jsxs)("span",{className:"text-gray-400 text-sm w-6",children:[b+1,"."]}),(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsx)("div",{className:"text-sm text-gray-900",children:a.text}),(0,d.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,d.jsx)(n.E,{variant:"default",children:a.type}),a.required&&(0,d.jsx)(n.E,{variant:"warning",children:"Required"})]})]}),(0,d.jsx)(i.$,{variant:"ghost",size:"sm",onClick:()=>{var b;return b=a.id,void(v&&w({...v,questions:v.questions?.filter(a=>a.id!==b)}))},className:"text-error",children:(0,d.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},a.id))}),(0,d.jsxs)("div",{className:"p-4 bg-gray-50 rounded-md border border-gray-200 space-y-3",children:[(0,d.jsx)("div",{className:"text-sm font-medium text-gray-700",children:"Add Question"}),(0,d.jsx)(j.p,{label:"Question Text",value:z.text||"",onChange:a=>A({...z,text:a.target.value}),placeholder:"How satisfied were you with our service today?"}),(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),(0,d.jsx)("select",{value:z.type||"scale",onChange:a=>A({...z,type:a.target.value,options:"multiple_choice"===a.target.value?[]:void 0}),className:"w-full px-3 py-2 bg-white border border-gray-300 rounded-md text-gray-900 text-sm focus:ring-2 focus:ring-primary-600 focus:border-primary-600",children:y.map(a=>(0,d.jsx)("option",{value:a.value,children:a.label},a.value))})]}),(0,d.jsx)("div",{className:"flex items-end gap-2",children:(0,d.jsxs)("label",{className:"flex items-center gap-2 text-sm text-gray-700",children:[(0,d.jsx)("input",{type:"checkbox",checked:z.required??!0,onChange:a=>A({...z,required:a.target.checked}),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-600"}),"Required"]})})]}),"multiple_choice"===z.type&&(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Options"}),(0,d.jsxs)("div",{className:"flex gap-2 mb-2",children:[(0,d.jsx)(j.p,{value:B,onChange:a=>C(a.target.value),placeholder:"Add option",onKeyDown:a=>"Enter"===a.key&&H()}),(0,d.jsx)(i.$,{variant:"outline",size:"sm",onClick:H,children:"Add"})]}),(0,d.jsx)("div",{className:"flex flex-wrap gap-2",children:z.options?.map((a,b)=>(0,d.jsxs)(n.E,{variant:"default",className:"gap-1",children:[a,(0,d.jsx)("button",{onClick:()=>{A({...z,options:z.options?.filter((a,c)=>c!==b)})},className:"ml-1 hover:text-error",children:(0,d.jsx)("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},b))})]}),(0,d.jsx)(i.$,{variant:"outline",size:"sm",onClick:()=>{if(!v||!z.text||!z.type)return;let a={id:`q_${Date.now()}`,text:z.text,type:z.type,options:"multiple_choice"===z.type?z.options:void 0,required:z.required??!0,order:(v.questions?.length||0)+1};w({...v,questions:[...v.questions||[],a]}),A({text:"",type:"scale",required:!0,options:[]})},disabled:!z.text,className:"w-full",children:"Add Question"})]})]}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)("input",{type:"checkbox",id:"survey-active",checked:v.is_active??!0,onChange:a=>w({...v,is_active:a.target.checked}),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-600"}),(0,d.jsx)("label",{htmlFor:"survey-active",className:"text-sm text-gray-700",children:"Survey is active and can be assigned to calls"})]}),(0,d.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:[(0,d.jsx)(i.$,{variant:"outline",onClick:()=>m(!1),children:"Cancel"}),(0,d.jsx)(i.$,{onClick:F,disabled:p||!v.name||!v.questions?.length,variant:"primary",children:p?"Saving...":"Save Survey"})]})]}),(0,d.jsxs)("div",{className:"p-4 bg-info-light border border-blue-200 rounded-md",children:[(0,d.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"How Surveys Work"}),(0,d.jsxs)("ul",{className:"text-sm text-gray-600 space-y-1 list-disc list-inside",children:[(0,d.jsxs)("li",{children:[(0,d.jsx)("strong",{children:"After-Call:"})," Survey runs automatically after call ends"]}),(0,d.jsxs)("li",{children:[(0,d.jsx)("strong",{children:"AI-Powered:"})," Voice bot asks questions using natural TTS"]}),(0,d.jsxs)("li",{children:[(0,d.jsx)("strong",{children:"Analytics:"})," Results appear in call artifacts and dashboard"]}),(0,d.jsxs)("li",{children:[(0,d.jsx)("strong",{children:"Scale Questions:"}),' "Rate 1 to 5" with voice recognition']}),(0,d.jsxs)("li",{children:[(0,d.jsx)("strong",{children:"Text Questions:"})," Open-ended responses transcribed"]})]})]})]}):(0,d.jsxs)("div",{className:"text-center py-12 bg-warning-light rounded-md border border-amber-200",children:[(0,d.jsx)("svg",{className:"w-12 h-12 mx-auto mb-4 text-warning",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,d.jsx)("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Survey Feature"}),(0,d.jsx)("p",{className:"text-gray-600 mb-4",children:"After-call surveys require the Insights plan or higher"}),(0,d.jsx)(i.$,{onClick:()=>window.location.href="/settings?tab=billing",children:"Upgrade Plan"})]}):(0,d.jsx)("div",{className:"text-gray-500 p-4",children:"Organization required"})}var A=c(17585);function B({organizationId:a,canEdit:b}){let[c,f]=(0,e.useState)(null),[g,h]=(0,e.useState)([]),[i,j]=(0,e.useState)(!0),[k,l]=(0,e.useState)(!1),[m,p]=(0,e.useState)(null),[q,r]=(0,e.useState)(!1),[s,t]=(0,e.useState)(""),[u,v]=(0,e.useState)(""),[w,x]=(0,e.useState)(!1);async function y(b){l(!0),p(null);try{let a=await fetch("/api/retention",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(b)});if(!a.ok)throw Error("Failed to save policy");let c=await a.json();f(c.policy)}catch(c){p("Failed to save retention policy"),o.v.error("RetentionSettings: failed to save policy",c,{organizationId:a,updates:b})}finally{l(!1)}}async function z(){if(s.trim()){l(!0),p(null);try{let a=await fetch("/api/retention/legal-holds",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({hold_name:s,matter_reference:u||void 0,applies_to_all:w})});if(!a.ok)throw Error("Failed to create legal hold");let b=await a.json();h(a=>[b.legal_hold,...a]),r(!1),t(""),v(""),x(!1)}catch(b){p("Failed to create legal hold"),o.v.error("RetentionSettings: failed to create legal hold",b,{organizationId:a,holdName:s,appliesToAll:w})}finally{l(!1)}}}async function B(b,c){l(!0),p(null);try{if(!(await fetch("/api/retention/legal-holds",{method:"DELETE",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({hold_id:b,release_reason:c})})).ok)throw Error("Failed to release legal hold");h(a=>a.map(a=>a.id===b?{...a,status:"released"}:a))}catch(c){p("Failed to release legal hold"),o.v.error("RetentionSettings: failed to release legal hold",c,{organizationId:a,holdId:b})}finally{l(!1)}}if(i)return(0,d.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,d.jsx)("div",{className:"loading-spinner"}),(0,d.jsx)("span",{className:"ml-3 text-gray-500",children:"Loading retention settings..."})]});let C=g.filter(a=>"active"===a.status);return(0,d.jsxs)("div",{className:"space-y-8",children:[m&&(0,d.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 text-sm text-red-700",children:m}),(0,d.jsxs)("section",{className:"space-y-6",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Retention Policy"}),(0,d.jsx)("p",{className:"text-sm text-gray-500",children:"Configure how long call evidence is retained and when it's automatically archived."})]}),(0,d.jsxs)("div",{className:"bg-white rounded-md border border-gray-200 p-6 space-y-6",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Default Retention Class"}),(0,d.jsxs)("select",{value:c?.default_retention_class||"default",onChange:a=>y({default_retention_class:a.target.value}),disabled:!b||k,className:"w-full md:w-auto px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500 disabled:bg-gray-100",children:[(0,d.jsx)("option",{value:"default",children:"Default (Standard)"}),(0,d.jsx)("option",{value:"regulated",children:"Regulated (Extended retention)"}),(0,d.jsx)("option",{value:"legal_hold",children:"Legal Hold (Indefinite)"})]}),(0,d.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Applied to all new calls. Existing calls are not affected."})]}),(0,d.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Auto-Archive After (Days)"}),(0,d.jsx)("input",{type:"number",min:"0",value:c?.auto_archive_after_days??90,onChange:a=>y({auto_archive_after_days:parseInt(a.target.value)||null}),disabled:!b||k,className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500 disabled:bg-gray-100"}),(0,d.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"0 = Never auto-archive"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Regulated Retention (Days)"}),(0,d.jsx)("input",{type:"number",min:"0",value:c?.regulated_retention_days??2555,onChange:a=>y({regulated_retention_days:parseInt(a.target.value)||0}),disabled:!b||k,className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500 disabled:bg-gray-100"}),(0,d.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"~7 years (2555 days) for regulatory compliance"})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Legal Hold Contact Email"}),(0,d.jsx)("input",{type:"email",value:c?.legal_hold_contact_email||"",onChange:a=>y({legal_hold_contact_email:a.target.value||null}),disabled:!b||k,placeholder:"legal@company.com",className:"w-full md:w-96 px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500 disabled:bg-gray-100"}),(0,d.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Notified when legal holds are created or released"})]})]})]}),(0,d.jsxs)("section",{className:"space-y-6",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Legal Holds"}),(0,d.jsx)("p",{className:"text-sm text-gray-500",children:"Preserve evidence for litigation, audits, or regulatory requests."})]}),b&&(0,d.jsx)("button",{onClick:()=>r(!0),disabled:k,className:"px-4 py-2 bg-primary-600 text-white text-sm font-medium rounded-md hover:bg-primary-700 disabled:opacity-50",children:"Create Legal Hold"})]}),C.length>0&&(0,d.jsx)("div",{className:"bg-amber-50 border border-amber-200 rounded-md p-4",children:(0,d.jsxs)("div",{className:"flex items-start gap-3",children:[(0,d.jsx)("svg",{className:"w-5 h-5 text-amber-600 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("p",{className:"text-sm font-medium text-amber-800",children:[C.length," Active Legal Hold",1!==C.length?"s":""]}),(0,d.jsx)("p",{className:"text-xs text-amber-700 mt-1",children:"Evidence under legal hold cannot be deleted or exported without release."})]})]})}),q&&(0,d.jsxs)("div",{className:"bg-white rounded-md border border-gray-200 p-6 space-y-4",children:[(0,d.jsx)("h3",{className:"text-base font-semibold text-gray-900",children:"New Legal Hold"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hold Name *"}),(0,d.jsx)("input",{type:"text",value:s,onChange:a=>t(a.target.value),placeholder:"e.g., Smith v. Company - Document Preservation",className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-primary-500"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Matter Reference"}),(0,d.jsx)("input",{type:"text",value:u,onChange:a=>v(a.target.value),placeholder:"e.g., Case #2026-CV-1234",className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-primary-500"})]}),(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsx)(A.d,{checked:w,onCheckedChange:x,"aria-label":"Apply to all calls"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Apply to all calls"}),(0,d.jsx)("p",{className:"text-xs text-gray-500",children:"Hold all current and future call evidence"})]})]}),(0,d.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,d.jsx)("button",{onClick:()=>r(!1),className:"px-4 py-2 text-sm text-gray-600 hover:text-gray-900",children:"Cancel"}),(0,d.jsx)("button",{onClick:z,disabled:!s.trim()||k,className:"px-4 py-2 bg-primary-600 text-white text-sm font-medium rounded-md hover:bg-primary-700 disabled:opacity-50",children:k?"Creating...":"Create Hold"})]})]}),(0,d.jsx)("div",{className:"bg-white rounded-md border border-gray-200 divide-y divide-gray-200",children:0===g.length?(0,d.jsx)("div",{className:"p-6 text-center text-sm text-gray-500",children:"No legal holds. Evidence can be exported and deleted normally."}):g.map(a=>(0,d.jsx)("div",{className:"p-4",children:(0,d.jsxs)("div",{className:"flex items-start justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)("p",{className:"text-sm font-medium text-gray-900",children:a.hold_name}),(0,d.jsx)(n.E,{variant:"active"===a.status?"warning":"default",children:a.status})]}),a.matter_reference&&(0,d.jsx)("p",{className:"text-xs text-gray-500 mt-0.5",children:a.matter_reference}),(0,d.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[a.applies_to_all?"All calls":`${a.affected_call_count} calls`," \xb7 ","Created ",new Date(a.created_at).toLocaleDateString()]})]}),b&&"active"===a.status&&(0,d.jsx)("button",{onClick:()=>{let b=prompt("Enter reason for releasing this legal hold:");b&&B(a.id,b)},disabled:k,className:"text-xs text-red-600 hover:text-red-700 font-medium",children:"Release"})]})},a.id))})]}),(0,d.jsxs)("section",{className:"bg-white rounded-md border border-gray-200 p-6",children:[(0,d.jsx)("h3",{className:"text-base font-semibold text-gray-900 mb-4",children:"Export Compliance"}),(0,d.jsxs)("ul",{className:"space-y-3 text-sm text-gray-600",children:[(0,d.jsxs)("li",{className:"flex items-start gap-2",children:[(0,d.jsx)("svg",{className:"w-4 h-4 text-success mt-0.5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,d.jsx)("span",{children:"All export requests are logged in the audit trail"})]}),(0,d.jsxs)("li",{className:"flex items-start gap-2",children:[(0,d.jsx)("svg",{className:"w-4 h-4 text-success mt-0.5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,d.jsx)("span",{children:"Calls under legal hold cannot be exported until released"})]}),(0,d.jsxs)("li",{className:"flex items-start gap-2",children:[(0,d.jsx)("svg",{className:"w-4 h-4 text-success mt-0.5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,d.jsx)("span",{children:"Retention policy compliance is verified before each export"})]}),(0,d.jsxs)("li",{className:"flex items-start gap-2",children:[(0,d.jsx)("svg",{className:"w-4 h-4 text-success mt-0.5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,d.jsx)("span",{children:"Export bundles include cryptographic integrity verification"})]})]})]})]})}function C({organizationId:a,plan:b}){let[c,f]=(0,e.useState)(null),[g,h]=(0,e.useState)(!0),[i,j]=(0,e.useState)(null);if(g)return(0,d.jsx)("div",{className:"bg-white rounded-md border border-gray-200 p-6",children:(0,d.jsxs)("div",{className:"flex items-center justify-center h-32",children:[(0,d.jsx)("div",{className:"loading-spinner"}),(0,d.jsx)("span",{className:"ml-3 text-gray-500",children:"Loading usage..."})]})});if(i||!c)return(0,d.jsx)("div",{className:"bg-white rounded-md border border-gray-200 p-6",children:(0,d.jsxs)("div",{className:"flex items-center gap-2 text-amber-600",children:[(0,d.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,d.jsx)("span",{className:"text-sm",children:i||"Unable to load usage data"})]})});let{usage:k,limits:l}=c,m=l.max_calls?Math.min(k.calls/l.max_calls*100,100):0,o=l.max_minutes?Math.min(k.minutes/l.max_minutes*100,100):0,p=m>=80,q=o>=80;return(0,d.jsxs)("div",{className:"bg-white rounded-md border border-gray-200 p-6",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Current Plan"}),(0,d.jsx)("p",{className:"text-2xl font-semibold text-gray-900 capitalize",children:b||"Free"})]}),(0,d.jsx)(n.E,{variant:"success",children:"Active"})]}),(0,d.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Calls this month"}),(0,d.jsxs)("span",{className:"text-sm text-gray-600",children:[k.calls," ",l.max_calls?`/ ${l.max_calls}`:""]})]}),l.max_calls&&(0,d.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 overflow-hidden",children:(0,d.jsx)("div",{className:`h-2 rounded-full transition-all ${p?"bg-amber-500":"bg-primary-600"}`,style:{width:`${m}%`}})}),p&&(0,d.jsxs)("p",{className:"text-xs text-amber-600 flex items-center gap-1",children:[(0,d.jsx)("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Approaching call limit"]})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Minutes used"}),(0,d.jsxs)("span",{className:"text-sm text-gray-600",children:[k.minutes," ",l.max_minutes?`/ ${l.max_minutes}`:""]})]}),l.max_minutes&&(0,d.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 overflow-hidden",children:(0,d.jsx)("div",{className:`h-2 rounded-full transition-all ${q?"bg-amber-500":"bg-primary-600"}`,style:{width:`${o}%`}})}),q&&(0,d.jsxs)("p",{className:"text-xs text-amber-600 flex items-center gap-1",children:[(0,d.jsx)("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Approaching minute limit"]})]}),(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t border-gray-200",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-xs text-gray-500",children:"Transcriptions"}),(0,d.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:k.transcriptions})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-xs text-gray-500",children:"Translations"}),(0,d.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:k.translations})]})]})]}),(0,d.jsxs)("div",{className:"border-t border-gray-200 pt-4 space-y-2",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,d.jsx)("span",{className:"text-gray-600",children:"Live Translation"}),(0,d.jsx)(n.E,{variant:l.allow_live_translation?"default":"secondary",children:l.allow_live_translation?"Enabled":"Disabled"})]}),(0,d.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,d.jsx)("span",{className:"text-gray-600",children:"Survey Calls"}),(0,d.jsx)(n.E,{variant:l.allow_survey_calls?"default":"secondary",children:l.allow_survey_calls?"Enabled":"Disabled"})]})]}),(0,d.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:(0,d.jsxs)("p",{className:"text-xs text-gray-500",children:["Billing period: ",new Date(k.period_start).toLocaleDateString()," - ",new Date(k.period_end).toLocaleDateString()]})})]})}var D=c(45119),E=c(2332),F=c(92808),G=c(87868),H=c(75656),I=c(11720),J=c(7412),K=c(69998),L=c(61611),M=c(29988),N=c(99978),O=c(70904),P=c(36409),Q=c(61225),R=Symbol("radix.slottable");function S(a){return e.isValidElement(a)&&"function"==typeof a.type&&"__radixId"in a.type&&a.type.__radixId===R}var T="Dialog",[U,V]=(0,E.A)(T),[W,X]=U(T),Y=a=>{let{__scopeDialog:b,children:c,open:f,defaultOpen:g,onOpenChange:h,modal:i=!0}=a,j=e.useRef(null),k=e.useRef(null),[l,m]=(0,I.i)({prop:f,defaultProp:g??!1,onChange:h,caller:T});return(0,d.jsx)(W,{scope:b,triggerRef:j,contentRef:k,contentId:(0,H.B)(),titleId:(0,H.B)(),descriptionId:(0,H.B)(),open:l,onOpenChange:m,onOpenToggle:e.useCallback(()=>m(a=>!a),[m]),modal:i,children:c})};Y.displayName=T;var Z="DialogTrigger",$=e.forwardRef((a,b)=>{let{__scopeDialog:c,...e}=a,f=X(Z,c),g=(0,F.s)(b,f.triggerRef);return(0,d.jsx)(N.sG.button,{type:"button","aria-haspopup":"dialog","aria-expanded":f.open,"aria-controls":f.contentId,"data-state":as(f.open),...e,ref:g,onClick:(0,G.mK)(a.onClick,f.onOpenToggle)})});$.displayName=Z;var _="DialogPortal",[aa,ab]=U(_,{forceMount:void 0}),ac=a=>{let{__scopeDialog:b,forceMount:c,children:f,container:g}=a,h=X(_,b);return(0,d.jsx)(aa,{scope:b,forceMount:c,children:e.Children.map(f,a=>(0,d.jsx)(M.C,{present:c||h.open,children:(0,d.jsx)(L.Z,{asChild:!0,container:g,children:a})}))})};ac.displayName=_;var ad="DialogOverlay",ae=e.forwardRef((a,b)=>{let c=ab(ad,a.__scopeDialog),{forceMount:e=c.forceMount,...f}=a,g=X(ad,a.__scopeDialog);return g.modal?(0,d.jsx)(M.C,{present:e||g.open,children:(0,d.jsx)(ag,{...f,ref:b})}):null});ae.displayName=ad;var af=function(a){let b=function(a){let b=e.forwardRef((a,b)=>{let{children:c,...d}=a;if(e.isValidElement(c)){var f;let a,g,h=(f=c,(g=(a=Object.getOwnPropertyDescriptor(f.props,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?f.ref:(g=(a=Object.getOwnPropertyDescriptor(f,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?f.props.ref:f.props.ref||f.ref),i=function(a,b){let c={...b};for(let d in b){let e=a[d],f=b[d];/^on[A-Z]/.test(d)?e&&f?c[d]=(...a)=>{let b=f(...a);return e(...a),b}:e&&(c[d]=e):"style"===d?c[d]={...e,...f}:"className"===d&&(c[d]=[e,f].filter(Boolean).join(" "))}return{...a,...c}}(d,c.props);return c.type!==e.Fragment&&(i.ref=b?(0,F.t)(b,h):h),e.cloneElement(c,i)}return e.Children.count(c)>1?e.Children.only(null):null});return b.displayName=`${a}.SlotClone`,b}(a),c=e.forwardRef((a,c)=>{let{children:f,...g}=a,h=e.Children.toArray(f),i=h.find(S);if(i){let a=i.props.children,f=h.map(b=>b!==i?b:e.Children.count(a)>1?e.Children.only(null):e.isValidElement(a)?a.props.children:null);return(0,d.jsx)(b,{...g,ref:c,children:e.isValidElement(a)?e.cloneElement(a,void 0,f):null})}return(0,d.jsx)(b,{...g,ref:c,children:f})});return c.displayName=`${a}.Slot`,c}("DialogOverlay.RemoveScroll"),ag=e.forwardRef((a,b)=>{let{__scopeDialog:c,...e}=a,f=X(ad,c);return(0,d.jsx)(P.A,{as:af,allowPinchZoom:!0,shards:[f.contentRef],children:(0,d.jsx)(N.sG.div,{"data-state":as(f.open),...e,ref:b,style:{pointerEvents:"auto",...e.style}})})}),ah="DialogContent",ai=e.forwardRef((a,b)=>{let c=ab(ah,a.__scopeDialog),{forceMount:e=c.forceMount,...f}=a,g=X(ah,a.__scopeDialog);return(0,d.jsx)(M.C,{present:e||g.open,children:g.modal?(0,d.jsx)(aj,{...f,ref:b}):(0,d.jsx)(ak,{...f,ref:b})})});ai.displayName=ah;var aj=e.forwardRef((a,b)=>{let c=X(ah,a.__scopeDialog),f=e.useRef(null),g=(0,F.s)(b,c.contentRef,f);return e.useEffect(()=>{let a=f.current;if(a)return(0,Q.Eq)(a)},[]),(0,d.jsx)(al,{...a,ref:g,trapFocus:c.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,G.mK)(a.onCloseAutoFocus,a=>{a.preventDefault(),c.triggerRef.current?.focus()}),onPointerDownOutside:(0,G.mK)(a.onPointerDownOutside,a=>{let b=a.detail.originalEvent,c=0===b.button&&!0===b.ctrlKey;(2===b.button||c)&&a.preventDefault()}),onFocusOutside:(0,G.mK)(a.onFocusOutside,a=>a.preventDefault())})}),ak=e.forwardRef((a,b)=>{let c=X(ah,a.__scopeDialog),f=e.useRef(!1),g=e.useRef(!1);return(0,d.jsx)(al,{...a,ref:b,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:b=>{a.onCloseAutoFocus?.(b),b.defaultPrevented||(f.current||c.triggerRef.current?.focus(),b.preventDefault()),f.current=!1,g.current=!1},onInteractOutside:b=>{a.onInteractOutside?.(b),b.defaultPrevented||(f.current=!0,"pointerdown"===b.detail.originalEvent.type&&(g.current=!0));let d=b.target;c.triggerRef.current?.contains(d)&&b.preventDefault(),"focusin"===b.detail.originalEvent.type&&g.current&&b.preventDefault()}})}),al=e.forwardRef((a,b)=>{let{__scopeDialog:c,trapFocus:f,onOpenAutoFocus:g,onCloseAutoFocus:h,...i}=a,j=X(ah,c),k=e.useRef(null),l=(0,F.s)(b,k);return(0,O.Oh)(),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(K.n,{asChild:!0,loop:!0,trapped:f,onMountAutoFocus:g,onUnmountAutoFocus:h,children:(0,d.jsx)(J.qW,{role:"dialog",id:j.contentId,"aria-describedby":j.descriptionId,"aria-labelledby":j.titleId,"data-state":as(j.open),...i,ref:l,onDismiss:()=>j.onOpenChange(!1)})}),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(aw,{titleId:j.titleId}),(0,d.jsx)(ax,{contentRef:k,descriptionId:j.descriptionId})]})]})}),am="DialogTitle",an=e.forwardRef((a,b)=>{let{__scopeDialog:c,...e}=a,f=X(am,c);return(0,d.jsx)(N.sG.h2,{id:f.titleId,...e,ref:b})});an.displayName=am;var ao="DialogDescription",ap=e.forwardRef((a,b)=>{let{__scopeDialog:c,...e}=a,f=X(ao,c);return(0,d.jsx)(N.sG.p,{id:f.descriptionId,...e,ref:b})});ap.displayName=ao;var aq="DialogClose",ar=e.forwardRef((a,b)=>{let{__scopeDialog:c,...e}=a,f=X(aq,c);return(0,d.jsx)(N.sG.button,{type:"button",...e,ref:b,onClick:(0,G.mK)(a.onClick,()=>f.onOpenChange(!1))})});function as(a){return a?"open":"closed"}ar.displayName=aq;var at="DialogTitleWarning",[au,av]=(0,E.q)(at,{contentName:ah,titleName:am,docsSlug:"dialog"}),aw=({titleId:a})=>{let b=av(at),c=`\`${b.contentName}\` requires a \`${b.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${b.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${b.docsSlug}`;return e.useEffect(()=>{a&&(document.getElementById(a)||console.error(c))},[c,a]),null},ax=({contentRef:a,descriptionId:b})=>{let c=av("DialogDescriptionWarning"),d=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${c.contentName}}.`;return e.useEffect(()=>{let c=a.current?.getAttribute("aria-describedby");b&&c&&(document.getElementById(b)||console.warn(d))},[d,a,b]),null},ay=Symbol("radix.slottable"),az="AlertDialog",[aA,aB]=(0,E.A)(az,[V]),aC=V(),aD=a=>{let{__scopeAlertDialog:b,...c}=a,e=aC(b);return(0,d.jsx)(Y,{...e,...c,modal:!0})};aD.displayName=az;var aE=e.forwardRef((a,b)=>{let{__scopeAlertDialog:c,...e}=a,f=aC(c);return(0,d.jsx)($,{...f,...e,ref:b})});aE.displayName="AlertDialogTrigger";var aF=a=>{let{__scopeAlertDialog:b,...c}=a,e=aC(b);return(0,d.jsx)(ac,{...e,...c})};aF.displayName="AlertDialogPortal";var aG=e.forwardRef((a,b)=>{let{__scopeAlertDialog:c,...e}=a,f=aC(c);return(0,d.jsx)(ae,{...f,...e,ref:b})});aG.displayName="AlertDialogOverlay";var aH="AlertDialogContent",[aI,aJ]=aA(aH),aK=function(a){let b=({children:a})=>(0,d.jsx)(d.Fragment,{children:a});return b.displayName=`${a}.Slottable`,b.__radixId=ay,b}("AlertDialogContent"),aL=e.forwardRef((a,b)=>{let{__scopeAlertDialog:c,children:f,...g}=a,h=aC(c),i=e.useRef(null),j=(0,F.s)(b,i),k=e.useRef(null);return(0,d.jsx)(au,{contentName:aH,titleName:aM,docsSlug:"alert-dialog",children:(0,d.jsx)(aI,{scope:c,cancelRef:k,children:(0,d.jsxs)(ai,{role:"alertdialog",...h,...g,ref:j,onOpenAutoFocus:(0,G.mK)(g.onOpenAutoFocus,a=>{a.preventDefault(),k.current?.focus({preventScroll:!0})}),onPointerDownOutside:a=>a.preventDefault(),onInteractOutside:a=>a.preventDefault(),children:[(0,d.jsx)(aK,{children:f}),(0,d.jsx)(aT,{contentRef:i})]})})})});aL.displayName=aH;var aM="AlertDialogTitle",aN=e.forwardRef((a,b)=>{let{__scopeAlertDialog:c,...e}=a,f=aC(c);return(0,d.jsx)(an,{...f,...e,ref:b})});aN.displayName=aM;var aO="AlertDialogDescription",aP=e.forwardRef((a,b)=>{let{__scopeAlertDialog:c,...e}=a,f=aC(c);return(0,d.jsx)(ap,{...f,...e,ref:b})});aP.displayName=aO;var aQ=e.forwardRef((a,b)=>{let{__scopeAlertDialog:c,...e}=a,f=aC(c);return(0,d.jsx)(ar,{...f,...e,ref:b})});aQ.displayName="AlertDialogAction";var aR="AlertDialogCancel",aS=e.forwardRef((a,b)=>{let{__scopeAlertDialog:c,...e}=a,{cancelRef:f}=aJ(aR,c),g=aC(c),h=(0,F.s)(b,f);return(0,d.jsx)(ar,{...g,...e,ref:h})});aS.displayName=aR;var aT=({contentRef:a})=>{let b=`\`${aH}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${aH}\` by passing a \`${aO}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${aH}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return e.useEffect(()=>{document.getElementById(a.current?.getAttribute("aria-describedby"))||console.warn(b)},[b,a]),null},aU=c(93133);let aV=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(aG,{className:(0,aU.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...b,ref:c}));aV.displayName=aG.displayName;let aW=e.forwardRef(({className:a,...b},c)=>(0,d.jsxs)(aF,{children:[(0,d.jsx)(aV,{}),(0,d.jsx)(aL,{ref:c,className:(0,aU.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-white p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...b})]}));aW.displayName=aL.displayName;let aX=({className:a,...b})=>(0,d.jsx)("div",{className:(0,aU.cn)("flex flex-col space-y-2 text-center sm:text-left",a),...b});aX.displayName="AlertDialogHeader";let aY=({className:a,...b})=>(0,d.jsx)("div",{className:(0,aU.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...b});aY.displayName="AlertDialogFooter";let aZ=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(aN,{ref:c,className:(0,aU.cn)("text-lg font-semibold",a),...b}));aZ.displayName=aN.displayName;let a$=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(aP,{ref:c,className:(0,aU.cn)("text-sm text-gray-500",a),...b}));a$.displayName=aP.displayName;let a_=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(aQ,{ref:c,className:(0,aU.cn)("inline-flex h-10 items-center justify-center rounded-md bg-gray-900 px-4 py-2 text-sm font-semibold text-white transition-colors hover:bg-gray-900/90 focus:outline-none focus:ring-2 focus:ring-gray-950 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),...b}));a_.displayName=aQ.displayName;let a0=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(aS,{ref:c,className:(0,aU.cn)("mt-2 inline-flex h-10 items-center justify-center rounded-md border border-gray-200 bg-white px-4 py-2 text-sm font-semibold transition-colors hover:bg-gray-100 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-gray-950 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 sm:mt-0",a),...b}));a0.displayName=aS.displayName;var a1=c(23339);let a2=(0,a1.A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),a3=(0,a1.A)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var a4=c(14263);let a5=(0,a1.A)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);function a6({organizationId:a,role:b}){let c=(0,h.useRouter)(),[f,g]=(0,e.useState)(null),[j,k]=(0,e.useState)(!0),[l,m]=(0,e.useState)(!1),[p,q]=(0,e.useState)(!1),[r,s]=(0,e.useState)(null),t="owner"===b||"admin"===b,u=async()=>{try{k(!0),s(null);let b=await fetch(`/api/billing/subscription?orgId=${a}`,{credentials:"include"});if(!b.ok){if(404===b.status)return void g(null);throw Error("Failed to fetch subscription")}let c=await b.json();g(c.subscription)}catch(b){o.v.error("Error fetching subscription",b,{organizationId:a}),s(b instanceof Error?b.message:"Failed to load subscription")}finally{k(!1)}},v=async()=>{if(t)try{q(!0),s(null);let b=await fetch("/api/billing/checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({priceId:process.env.NEXT_PUBLIC_STRIPE_PRO_PRICE_ID,organizationId:a}),credentials:"include"});if(!b.ok)throw Error("Failed to create checkout session");let{url:c}=await b.json();window.location.href=c}catch(b){o.v.error("Error upgrading subscription",b,{organizationId:a}),s(b instanceof Error?b.message:"Failed to upgrade")}finally{q(!1)}},w=async()=>{if(t)try{q(!0),s(null);let b=await fetch("/api/billing/portal",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({organizationId:a}),credentials:"include"});if(!b.ok)throw Error("Failed to access billing portal");let{url:c}=await b.json();window.location.href=c}catch(b){o.v.error("Error accessing billing portal",b,{organizationId:a}),s(b instanceof Error?b.message:"Failed to access billing portal")}finally{q(!1)}},x=async()=>{if(t)try{if(m(!0),s(null),!(await fetch("/api/billing/cancel",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({organizationId:a}),credentials:"include"})).ok)throw Error("Failed to cancel subscription");await u(),c.refresh()}catch(b){o.v.error("Error canceling subscription",b,{organizationId:a}),s(b instanceof Error?b.message:"Failed to cancel subscription")}finally{m(!1)}};return j?(0,d.jsxs)(D.Zp,{children:[(0,d.jsxs)(D.aR,{children:[(0,d.jsx)(D.ZB,{children:"Subscription"}),(0,d.jsx)(D.BT,{children:"Manage your subscription plan"})]}),(0,d.jsx)(D.Wu,{className:"flex items-center justify-center py-12",children:(0,d.jsx)(a4.A,{className:"h-8 w-8 animate-spin text-muted-foreground"})})]}):f?(0,d.jsxs)(D.Zp,{children:[(0,d.jsxs)(D.aR,{children:[(0,d.jsxs)(D.ZB,{className:"flex items-center justify-between",children:[(0,d.jsx)("span",{children:"Subscription"}),(a=>{let b={active:{label:"Active",variant:"success",icon:a2},trialing:{label:"Trial",variant:"default",icon:a2},past_due:{label:"Past Due",variant:"error",icon:a3},canceled:{label:"Canceled",variant:"secondary",icon:a3},incomplete:{label:"Incomplete",variant:"error",icon:a3}}[a],c=b.icon;return(0,d.jsxs)(n.E,{variant:b.variant,className:"flex items-center gap-1",children:[(0,d.jsx)(c,{className:"h-3 w-3"}),b.label]})})(f.status)]}),(0,d.jsx)(D.BT,{children:"Manage your subscription plan"})]}),(0,d.jsx)(D.Wu,{children:(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("span",{className:"text-sm font-medium",children:"Plan"}),(0,d.jsx)("span",{className:"text-sm",children:f.plan_name})]}),(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("span",{className:"text-sm font-medium",children:"Amount"}),(0,d.jsxs)("span",{className:"text-sm font-semibold",children:[(0,aU.vv)(f.amount,f.currency),"/",f.interval]})]})]}),(0,d.jsxs)("div",{className:"space-y-2 border-t pt-4",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("span",{className:"text-sm font-medium",children:"Current Period"}),(0,d.jsxs)("span",{className:"text-sm text-muted-foreground",children:[(0,aU.Yq)(f.current_period_start)," -"," ",(0,aU.Yq)(f.current_period_end)]})]}),f.trial_end&&new Date(f.trial_end)>new Date&&(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("span",{className:"text-sm font-medium",children:"Trial Ends"}),(0,d.jsx)("span",{className:"text-sm text-muted-foreground",children:(0,aU.Yq)(f.trial_end)})]}),f.cancel_at_period_end?(0,d.jsx)("div",{className:"rounded-lg bg-destructive/10 p-3",children:(0,d.jsxs)("p",{className:"text-sm font-medium text-destructive",children:["Subscription will be canceled on ",(0,aU.Yq)(f.current_period_end)]})}):(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("span",{className:"text-sm font-medium",children:"Next Billing Date"}),(0,d.jsx)("span",{className:"text-sm text-muted-foreground",children:(0,aU.Yq)(f.current_period_end)})]})]}),r&&(0,d.jsx)("div",{className:"rounded-lg bg-destructive/10 p-3 text-sm text-destructive",children:r})]})}),(0,d.jsxs)(D.wL,{className:"flex gap-2",children:[(0,d.jsx)(i.$,{onClick:w,disabled:!t||p,variant:"outline",className:"flex-1",children:p?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(a4.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Loading..."]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(a5,{className:"mr-2 h-4 w-4"}),"Manage Subscription"]})}),!f.cancel_at_period_end&&(0,d.jsxs)(aD,{children:[(0,d.jsx)(aE,{asChild:!0,children:(0,d.jsx)(i.$,{variant:"destructive",disabled:!t||l,children:l?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(a4.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Canceling..."]}):"Cancel"})}),(0,d.jsxs)(aW,{children:[(0,d.jsxs)(aX,{children:[(0,d.jsx)(aZ,{children:"Cancel Subscription"}),(0,d.jsxs)(a$,{children:["Are you sure you want to cancel your subscription? You'll continue to have access until ",(0,aU.Yq)(f.current_period_end),", then your plan will revert to Free."]})]}),(0,d.jsxs)(aY,{children:[(0,d.jsx)(a0,{children:"Keep Subscription"}),(0,d.jsx)(a_,{onClick:x,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Cancel Subscription"})]})]})]})]})]}):(0,d.jsxs)(D.Zp,{children:[(0,d.jsxs)(D.aR,{children:[(0,d.jsx)(D.ZB,{children:"Subscription"}),(0,d.jsx)(D.BT,{children:"You're currently on the Free plan"})]}),(0,d.jsx)(D.Wu,{children:(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"font-semibold",children:"Free Plan"}),(0,d.jsx)("p",{className:"text-sm text-muted-foreground",children:"10 calls/month • Basic features"})]}),(0,d.jsx)(n.E,{variant:"secondary",children:"Free"})]}),r&&(0,d.jsx)("div",{className:"rounded-lg bg-destructive/10 p-3 text-sm text-destructive",children:r})]})}),(0,d.jsx)(D.wL,{children:(0,d.jsx)(i.$,{onClick:v,disabled:!t||p,className:"w-full",children:p?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(a4.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Loading..."]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(a5,{className:"mr-2 h-4 w-4"}),"Upgrade to Pro"]})})})]})}var a7=c(8849);let a8=(0,a1.A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);function a9({organizationId:a,role:b}){let[c,f]=(0,e.useState)([]),[g,h]=(0,e.useState)(!0),[j,k]=(0,e.useState)(null),[l,m]=(0,e.useState)(!1),[p,q]=(0,e.useState)(null),r="owner"===b||"admin"===b,s=async()=>{try{h(!0),q(null);let b=await fetch(`/api/billing/payment-methods?orgId=${a}`,{credentials:"include"});if(!b.ok){if(404===b.status)return void f([]);throw Error("Failed to fetch payment methods")}let c=await b.json();f(c.paymentMethods||[])}catch(b){o.v.error("Error fetching payment methods",b,{organizationId:a}),q(b instanceof Error?b.message:"Failed to load payment methods")}finally{h(!1)}},t=async()=>{if(r)try{m(!0),q(null);let b=await fetch("/api/billing/portal",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({organizationId:a}),credentials:"include"});if(!b.ok)throw Error("Failed to access billing portal");let{url:c}=await b.json();window.location.href=c}catch(b){o.v.error("Error accessing billing portal",b,{organizationId:a}),q(b instanceof Error?b.message:"Failed to add payment method")}finally{m(!1)}},u=async b=>{if(r)try{if(k(b),q(null),!(await fetch(`/api/billing/payment-methods/${b}`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({organizationId:a}),credentials:"include"})).ok)throw Error("Failed to remove payment method");await s()}catch(c){o.v.error("Error removing payment method",c,{organizationId:a,paymentMethodId:b}),q(c instanceof Error?c.message:"Failed to remove payment method")}finally{k(null)}};return g?(0,d.jsxs)(D.Zp,{children:[(0,d.jsxs)(D.aR,{children:[(0,d.jsx)(D.ZB,{children:"Payment Methods"}),(0,d.jsx)(D.BT,{children:"Manage your payment methods"})]}),(0,d.jsx)(D.Wu,{className:"flex items-center justify-center py-12",children:(0,d.jsx)(a4.A,{className:"h-8 w-8 animate-spin text-muted-foreground"})})]}):(0,d.jsxs)(D.Zp,{children:[(0,d.jsx)(D.aR,{children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)(D.ZB,{children:"Payment Methods"}),(0,d.jsx)(D.BT,{children:"Manage your payment methods"})]}),(0,d.jsx)(i.$,{onClick:t,disabled:!r||l,size:"sm",children:l?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(a4.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Loading..."]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(a7.A,{className:"mr-2 h-4 w-4"}),"Add Payment Method"]})})]})}),(0,d.jsx)(D.Wu,{children:(0,d.jsxs)("div",{className:"space-y-4",children:[p&&(0,d.jsx)("div",{className:"rounded-lg bg-destructive/10 p-3 text-sm text-destructive",children:p}),0===c.length?(0,d.jsxs)("div",{className:"rounded-lg border border-dashed p-8 text-center",children:[(0,d.jsx)(a5,{className:"mx-auto h-12 w-12 text-muted-foreground"}),(0,d.jsx)("p",{className:"mt-4 text-sm font-medium",children:"No payment methods"}),(0,d.jsx)("p",{className:"mt-1 text-sm text-muted-foreground",children:"Add a payment method to manage your subscription"})]}):(0,d.jsx)("div",{className:"space-y-3",children:c.map(a=>(0,d.jsxs)("div",{className:"flex items-center justify-between rounded-lg border p-4",children:[(0,d.jsxs)("div",{className:"flex items-center gap-4",children:[(a.card.brand,(0,d.jsx)(a5,{className:"h-5 w-5"})),(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsxs)("p",{className:"font-medium capitalize",children:[a.card.brand," •••• ",a.card.last4]}),a.is_default&&(0,d.jsxs)(n.E,{variant:"secondary",className:"flex items-center gap-1",children:[(0,d.jsx)(a2,{className:"h-3 w-3"}),"Default"]})]}),(0,d.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Expires ",a.card.exp_month.toString().padStart(2,"0"),"/",a.card.exp_year]})]})]}),!a.is_default&&(0,d.jsxs)(aD,{children:[(0,d.jsx)(aE,{asChild:!0,children:(0,d.jsx)(i.$,{variant:"ghost",size:"sm",disabled:!r||j===a.id,children:j===a.id?(0,d.jsx)(a4.A,{className:"h-4 w-4 animate-spin"}):(0,d.jsx)(a8,{className:"h-4 w-4 text-destructive"})})}),(0,d.jsxs)(aW,{children:[(0,d.jsxs)(aX,{children:[(0,d.jsx)(aZ,{children:"Remove Payment Method"}),(0,d.jsx)(a$,{children:"Are you sure you want to remove this payment method? This action cannot be undone."})]}),(0,d.jsxs)(aY,{children:[(0,d.jsx)(a0,{children:"Cancel"}),(0,d.jsx)(a_,{onClick:()=>u(a.id),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Remove"})]})]})]})]},a.id))})]})})]})}var ba=c(17677);let bb=(0,a1.A)("receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);var bc=c(49269);let bd=(0,a1.A)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);var be=c(59405);function bf({organizationId:a,role:b}){let[c,f]=(0,e.useState)([]),[g,h]=(0,e.useState)(!0),[j,k]=(0,e.useState)(null),[l,m]=(0,e.useState)(1),[o,p]=(0,e.useState)(!1);return"owner"!==b&&"admin"!==b?(0,d.jsxs)(D.Zp,{children:[(0,d.jsxs)(D.aR,{children:[(0,d.jsx)(D.ZB,{children:"Invoice History"}),(0,d.jsx)(D.BT,{children:"View and download past invoices"})]}),(0,d.jsx)(D.Wu,{children:(0,d.jsx)("div",{className:"rounded-lg border border-dashed p-8 text-center",children:(0,d.jsx)("p",{className:"text-sm text-muted-foreground",children:"You don't have permission to view invoices"})})})]}):g&&0===c.length?(0,d.jsxs)(D.Zp,{children:[(0,d.jsxs)(D.aR,{children:[(0,d.jsx)(D.ZB,{children:"Invoice History"}),(0,d.jsx)(D.BT,{children:"View and download past invoices"})]}),(0,d.jsx)(D.Wu,{className:"flex items-center justify-center py-12",children:(0,d.jsx)(a4.A,{className:"h-8 w-8 animate-spin text-muted-foreground"})})]}):(0,d.jsxs)(D.Zp,{children:[(0,d.jsxs)(D.aR,{children:[(0,d.jsx)(D.ZB,{children:"Invoice History"}),(0,d.jsx)(D.BT,{children:"View and download past invoices"})]}),(0,d.jsx)(D.Wu,{children:(0,d.jsxs)("div",{className:"space-y-4",children:[j&&(0,d.jsx)("div",{className:"rounded-lg bg-destructive/10 p-3 text-sm text-destructive",children:j}),0===c.length?(0,d.jsxs)("div",{className:"rounded-lg border border-dashed p-8 text-center",children:[(0,d.jsx)(bb,{className:"mx-auto h-12 w-12 text-muted-foreground"}),(0,d.jsx)("p",{className:"mt-4 text-sm font-medium",children:"No invoices yet"}),(0,d.jsx)("p",{className:"mt-1 text-sm text-muted-foreground",children:"Your invoices will appear here once you have a paid subscription"})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"rounded-lg border",children:(0,d.jsxs)(ba.XI,{children:[(0,d.jsx)(ba.A0,{children:(0,d.jsxs)(ba.Hj,{children:[(0,d.jsx)(ba.nd,{children:"Invoice"}),(0,d.jsx)(ba.nd,{children:"Date"}),(0,d.jsx)(ba.nd,{children:"Amount"}),(0,d.jsx)(ba.nd,{children:"Status"}),(0,d.jsx)(ba.nd,{className:"text-right",children:"Actions"})]})}),(0,d.jsx)(ba.BF,{children:c.map(a=>(0,d.jsxs)(ba.Hj,{children:[(0,d.jsx)(ba.nA,{className:"font-medium",children:a.number||a.id.substring(0,8)}),(0,d.jsx)(ba.nA,{children:(0,aU.Yq)(a.created,{year:"numeric",month:"short",day:"numeric"})}),(0,d.jsx)(ba.nA,{children:(0,aU.vv)(a.amount_paid,a.currency)}),(0,d.jsx)(ba.nA,{children:(a=>{let b={paid:{label:"Paid",variant:"success"},open:{label:"Open",variant:"default"},draft:{label:"Draft",variant:"secondary"},void:{label:"Void",variant:"secondary"},uncollectible:{label:"Uncollectible",variant:"error"}}[a];return(0,d.jsx)(n.E,{variant:b.variant,children:b.label})})(a.status)}),(0,d.jsx)(ba.nA,{className:"text-right",children:a.invoice_pdf&&(0,d.jsx)(i.$,{variant:"ghost",size:"sm",asChild:!0,children:(0,d.jsxs)("a",{href:a.invoice_pdf,target:"_blank",rel:"noopener noreferrer",children:[(0,d.jsx)(bc.A,{className:"mr-2 h-4 w-4"}),"Download"]})})})]},a.id))})]})}),(l>1||o)&&(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)(i.$,{variant:"outline",size:"sm",onClick:()=>m(a=>Math.max(1,a-1)),disabled:1===l||g,children:[(0,d.jsx)(bd,{className:"mr-2 h-4 w-4"}),"Previous"]}),(0,d.jsxs)("span",{className:"text-sm text-muted-foreground",children:["Page ",l]}),(0,d.jsxs)(i.$,{variant:"outline",size:"sm",onClick:()=>m(a=>a+1),disabled:!o||g,children:["Next",(0,d.jsx)(be.A,{className:"ml-2 h-4 w-4"})]})]})]})]})})]})}var bg=c(71613);let bh=(0,a1.A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),bi=(0,a1.A)("crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]),bj=(0,a1.A)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),bk=[{name:"Calls per month",free:"10",pro:"Unlimited"},{name:"Call transcriptions",free:!0,pro:!0},{name:"Real-time translation",free:!1,pro:!0},{name:"AI sentiment analysis",free:!1,pro:!0},{name:"Call recording",free:!0,pro:!0},{name:"Quality scorecards",free:"Basic",pro:"Advanced"},{name:"Team management",free:"3 users",pro:"Unlimited"},{name:"Analytics & reporting",free:"Basic",pro:"Advanced"},{name:"Campaign management",free:!1,pro:!0},{name:"Report builder",free:!1,pro:!0},{name:"Custom webhooks",free:!1,pro:!0},{name:"API access",free:"Limited",pro:"Full"},{name:"Priority support",free:!1,pro:!0},{name:"SLA guarantee",free:!1,pro:!0}];function bl({currentPlan:a,organizationId:b,role:c}){(0,h.useRouter)();let[f,g]=(0,e.useState)(!1),[j,k]=(0,e.useState)(null),l="owner"===c||"admin"===c,m="free"===a,p=async()=>{if(l)try{g(!0),k(null);let a=await fetch("/api/billing/checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({priceId:process.env.NEXT_PUBLIC_STRIPE_PRO_PRICE_ID,organizationId:b}),credentials:"include"});if(!a.ok)throw Error("Failed to create checkout session");let{url:c}=await a.json();window.location.href=c}catch(c){o.v.error("Error upgrading plan",c,{organizationId:b,currentPlan:a}),k(c instanceof Error?c.message:"Failed to upgrade")}finally{g(!1)}},q=a=>"boolean"==typeof a?a?(0,d.jsx)(bg.A,{className:"h-5 w-5 text-green-600"}):(0,d.jsx)(bh,{className:"h-5 w-5 text-gray-400"}):(0,d.jsx)("span",{className:"text-sm font-medium",children:a});return(0,d.jsxs)(D.Zp,{children:[(0,d.jsxs)(D.aR,{children:[(0,d.jsx)(D.ZB,{children:"Compare Plans"}),(0,d.jsx)(D.BT,{children:"Choose the plan that best fits your needs"})]}),(0,d.jsx)(D.Wu,{children:(0,d.jsxs)("div",{className:"space-y-4",children:[j&&(0,d.jsx)("div",{className:"rounded-lg bg-destructive/10 p-3 text-sm text-destructive",children:j}),(0,d.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,d.jsx)("div",{}),(0,d.jsx)(D.Zp,{className:"free"===a?"border-primary":"",children:(0,d.jsxs)(D.aR,{className:"pb-4",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)(D.ZB,{className:"text-lg",children:"Free"}),"free"===a&&(0,d.jsx)(n.E,{variant:"secondary",children:"Current"})]}),(0,d.jsxs)("div",{className:"mt-2",children:[(0,d.jsx)("div",{className:"text-3xl font-bold",children:"$0"}),(0,d.jsx)("div",{className:"text-sm text-muted-foreground",children:"/month"})]})]})}),(0,d.jsx)(D.Zp,{className:"pro"===a?"border-primary":"border-primary/50",children:(0,d.jsxs)(D.aR,{className:"pb-4",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(D.ZB,{className:"text-lg",children:"Pro"}),(0,d.jsx)(bi,{className:"h-5 w-5 text-yellow-500"})]}),"pro"===a&&(0,d.jsx)(n.E,{children:"Current"})]}),(0,d.jsxs)("div",{className:"mt-2",children:[(0,d.jsx)("div",{className:"text-3xl font-bold",children:"$99"}),(0,d.jsx)("div",{className:"text-sm text-muted-foreground",children:"/month"})]})]})})]}),(0,d.jsx)("div",{className:"rounded-lg border",children:(0,d.jsx)("div",{className:"divide-y",children:bk.map((a,b)=>(0,d.jsxs)("div",{className:"grid grid-cols-3 gap-4 p-4 hover:bg-muted/50",children:[(0,d.jsx)("div",{className:"flex items-center",children:(0,d.jsx)("span",{className:"text-sm font-medium",children:a.name})}),(0,d.jsx)("div",{className:"flex items-center justify-center",children:q(a.free)}),(0,d.jsx)("div",{className:"flex items-center justify-center",children:q(a.pro)})]},b))})}),m&&(0,d.jsx)(D.Zp,{className:"border-primary bg-primary/5",children:(0,d.jsx)(D.Wu,{className:"pt-6",children:(0,d.jsxs)("div",{className:"flex items-start gap-4",children:[(0,d.jsx)("div",{className:"rounded-full bg-primary/10 p-3",children:(0,d.jsx)(bj,{className:"h-6 w-6 text-primary"})}),(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsx)("h3",{className:"font-semibold",children:"Unlock Pro Features"}),(0,d.jsx)("p",{className:"mt-1 text-sm text-muted-foreground",children:"Upgrade to Pro for unlimited calls, advanced analytics, campaign management, and priority support."}),(0,d.jsx)(i.$,{onClick:p,disabled:!l||f,className:"mt-4",children:f?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(a4.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Loading..."]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(bi,{className:"mr-2 h-4 w-4"}),"Upgrade to Pro"]})})]})]})})})]})}),(0,d.jsx)(D.wL,{className:"text-sm text-muted-foreground",children:"Need more? Contact us for Enterprise pricing with custom features and SLAs."})]})}let bm=[{value:"en",label:"English"},{value:"es",label:"Spanish"},{value:"fr",label:"French"},{value:"de",label:"German"},{value:"it",label:"Italian"},{value:"pt",label:"Portuguese"},{value:"ja",label:"Japanese"},{value:"zh",label:"Chinese"},{value:"ko",label:"Korean"},{value:"ar",label:"Arabic"}],bn=[{value:"gpt-4o-mini",label:"GPT-4o Mini (Recommended)",description:"Fast, cost-effective"},{value:"gpt-4o",label:"GPT-4o",description:"Balanced performance"},{value:"gpt-4-turbo",label:"GPT-4 Turbo",description:"Maximum capability"}];function bo({organizationId:a,plan:b,canEdit:c}){let[f,g]=(0,e.useState)(null),[h,i]=(0,e.useState)(!0),[j,k]=(0,e.useState)(!1),[l,m]=(0,e.useState)(null),[o,p]=(0,e.useState)(null),[q,r]=(0,e.useState)({ai_features_enabled:!0,ai_agent_temperature:.3,ai_agent_model:"gpt-4o-mini"});async function s(){try{k(!0),m(null),p(null);let a=await fetch("/api/ai-config",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(q),credentials:"include"});if(!a.ok){let b=await a.json();throw Error(b.error||"Failed to save configuration")}p("Configuration saved successfully"),setTimeout(()=>p(null),3e3)}catch(a){m(a.message||"Failed to save configuration")}finally{k(!1)}}function t(a){r(b=>({...b,...a}))}if(h)return(0,d.jsx)("div",{className:"bg-white rounded-md border border-gray-200 p-6",children:(0,d.jsxs)("div",{className:"flex items-center justify-center h-32",children:[(0,d.jsx)("div",{className:"loading-spinner"}),(0,d.jsx)("span",{className:"ml-3 text-gray-500",children:"Loading configuration..."})]})});if(l&&!f)return(0,d.jsx)("div",{className:"bg-white rounded-md border border-gray-200 p-6",children:(0,d.jsxs)("div",{className:"flex items-center gap-2 text-red-600",children:[(0,d.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,d.jsx)("span",{className:"text-sm",children:l})]})});let u=f?.features_available||{live_translation:!1,custom_agent_id:!1,custom_prompts:!1,voice_cloning:!1};return(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)("svg",{className:"w-5 h-5 text-primary-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),(0,d.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"AI Agent Configuration"})]}),(0,d.jsx)(n.E,{variant:q.ai_features_enabled?"default":"secondary",children:q.ai_features_enabled?"Enabled":"Disabled"})]}),l&&(0,d.jsxs)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md text-sm flex items-center gap-2",children:[(0,d.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),l]}),o&&(0,d.jsx)("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-md text-sm",children:o}),(0,d.jsx)("div",{className:"bg-white rounded-md border border-gray-200 p-4",children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"font-medium text-gray-900",children:"AI Features"}),(0,d.jsx)("p",{className:"text-sm text-gray-500",children:"Enable AI-powered call enhancements"})]}),(0,d.jsx)(A.d,{checked:q.ai_features_enabled??!0,onCheckedChange:a=>t({ai_features_enabled:a}),disabled:!c})]})}),q.ai_features_enabled&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"bg-white rounded-md border border-gray-200 p-4 space-y-4",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)("p",{className:"font-medium text-gray-900",children:"Live Translation"}),!u.live_translation&&(0,d.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})]}),(0,d.jsx)(A.d,{checked:q.live_translate??!1,onCheckedChange:a=>t({live_translate:a}),disabled:!c||!u.live_translation})]}),!u.live_translation&&(0,d.jsx)("p",{className:"text-xs text-amber-600",children:"Upgrade to Business or Enterprise for live translation"}),q.live_translate&&(0,d.jsxs)("div",{className:"grid md:grid-cols-2 gap-4 pt-4 border-t border-gray-200",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Translate From"}),(0,d.jsxs)("select",{value:q.translate_from||"",onChange:a=>t({translate_from:a.target.value}),disabled:!c,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary-600 focus:border-transparent",children:[(0,d.jsx)("option",{value:"",children:"Select language"}),bm.map(a=>(0,d.jsx)("option",{value:a.value,children:a.label},a.value))]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Translate To"}),(0,d.jsxs)("select",{value:q.translate_to||"",onChange:a=>t({translate_to:a.target.value}),disabled:!c,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary-600 focus:border-transparent",children:[(0,d.jsx)("option",{value:"",children:"Select language"}),bm.map(a=>(0,d.jsx)("option",{value:a.value,children:a.label},a.value))]})]})]})]}),(0,d.jsxs)("div",{className:"bg-white rounded-md border border-gray-200 p-4",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"font-medium text-gray-900",children:"Voice Cloning"}),(0,d.jsx)("p",{className:"text-sm text-gray-500",children:"Clone voices for personalized translations"})]}),!u.voice_cloning&&(0,d.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})]}),(0,d.jsx)(A.d,{checked:q.use_voice_cloning??!1,onCheckedChange:a=>t({use_voice_cloning:a}),disabled:!c||!u.voice_cloning})]}),!u.voice_cloning&&(0,d.jsx)("p",{className:"text-xs text-amber-600 mt-2",children:"Upgrade to Business or Enterprise for voice cloning"})]}),(0,d.jsxs)("div",{className:"bg-white rounded-md border border-gray-200 p-4",children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"AI Model"}),(0,d.jsx)("select",{value:q.ai_agent_model||"gpt-4o-mini",onChange:a=>t({ai_agent_model:a.target.value}),disabled:!c,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary-600 focus:border-transparent",children:bn.map(a=>(0,d.jsxs)("option",{value:a.value,children:[a.label," - ",a.description]},a.value))})]}),(0,d.jsxs)("div",{className:"bg-white rounded-md border border-gray-200 p-4",children:[(0,d.jsxs)("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:["Temperature: ",q.ai_agent_temperature??.3]}),(0,d.jsx)("input",{type:"range",min:"0",max:"2",step:"0.1",value:q.ai_agent_temperature??.3,onChange:a=>t({ai_agent_temperature:parseFloat(a.target.value)}),disabled:!c,className:"w-full"}),(0,d.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Lower values (0-0.5) are more focused and deterministic. Higher values (1-2) are more creative."})]}),u.custom_agent_id&&(0,d.jsxs)("div",{className:"bg-white rounded-md border border-gray-200 p-4",children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Custom AI Agent ID (Optional)"}),(0,d.jsx)("input",{type:"text",value:q.ai_agent_id||"",onChange:a=>t({ai_agent_id:a.target.value}),disabled:!c,placeholder:"SignalWire AI Agent ID",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary-600 focus:border-transparent"}),(0,d.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Leave blank to use default agent. Enter your SignalWire AI Agent ID for custom configuration."})]}),u.custom_prompts&&(0,d.jsxs)("div",{className:"bg-white rounded-md border border-gray-200 p-4",children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Custom System Prompt (Optional)"}),(0,d.jsx)("textarea",{value:q.ai_agent_prompt||"",onChange:a=>t({ai_agent_prompt:a.target.value}),disabled:!c,rows:4,placeholder:"Custom instructions for the AI agent...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary-600 focus:border-transparent font-mono text-sm"}),(0,d.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Override default translation prompt with custom instructions."})]}),(u.custom_agent_id||u.custom_prompts)&&(0,d.jsxs)("div",{className:"bg-white rounded-md border border-gray-200 p-4",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-900",children:"Post-Prompt Webhook URL (Optional)"}),(0,d.jsx)(n.E,{variant:"secondary",className:"text-xs",children:"Advanced"})]}),(0,d.jsx)("input",{type:"url",value:q.ai_post_prompt_url||"",onChange:a=>t({ai_post_prompt_url:a.target.value}),disabled:!c,placeholder:"https://your-domain.com/webhooks/ai-agent",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary-600 focus:border-transparent font-mono text-sm"}),(0,d.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Webhook endpoint called after AI agent completes processing. Must be HTTPS. Used for custom integrations and workflow triggers."}),(0,d.jsx)("div",{className:"mt-2 p-3 bg-blue-50 border border-blue-200 rounded-md",children:(0,d.jsxs)("p",{className:"text-xs text-gray-700",children:[(0,d.jsx)("strong",{className:"text-gray-900",children:"Webhook Payload:"})," Receives call metadata, AI model used, processing time, and agent output. See"," ",(0,d.jsx)("a",{href:"/docs/webhooks/ai-agent",className:"text-primary-600 hover:text-primary-700 underline",children:"webhook documentation"})," ","for payload schema."]})})]}),(0,d.jsxs)("div",{className:"bg-gradient-to-br from-primary-50 to-blue-50 rounded-md border border-primary-200 p-4",children:[(0,d.jsxs)("h4",{className:"text-sm font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[(0,d.jsx)("svg",{className:"w-4 h-4 text-primary-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Current Configuration"]}),(0,d.jsxs)("dl",{className:"space-y-2 text-xs",children:[(0,d.jsxs)("div",{className:"flex justify-between",children:[(0,d.jsx)("dt",{className:"text-gray-600",children:"AI Features:"}),(0,d.jsx)("dd",{className:"font-medium text-gray-900",children:q.ai_features_enabled?"✓ Enabled":"✗ Disabled"})]}),q.ai_features_enabled&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"flex justify-between",children:[(0,d.jsx)("dt",{className:"text-gray-600",children:"Model:"}),(0,d.jsx)("dd",{className:"font-medium text-gray-900",children:bn.find(a=>a.value===q.ai_agent_model)?.label||"GPT-4o Mini"})]}),(0,d.jsxs)("div",{className:"flex justify-between",children:[(0,d.jsx)("dt",{className:"text-gray-600",children:"Temperature:"}),(0,d.jsx)("dd",{className:"font-medium text-gray-900",children:q.ai_agent_temperature??.3})]}),q.live_translate&&(0,d.jsxs)("div",{className:"flex justify-between",children:[(0,d.jsx)("dt",{className:"text-gray-600",children:"Live Translation:"}),(0,d.jsxs)("dd",{className:"font-medium text-gray-900",children:[q.translate_from?.toUpperCase()," → ",q.translate_to?.toUpperCase()]})]}),q.use_voice_cloning&&(0,d.jsxs)("div",{className:"flex justify-between",children:[(0,d.jsx)("dt",{className:"text-gray-600",children:"Voice Cloning:"}),(0,d.jsx)("dd",{className:"font-medium text-gray-900",children:"✓ Enabled"})]}),q.ai_agent_id&&(0,d.jsxs)("div",{className:"flex justify-between",children:[(0,d.jsx)("dt",{className:"text-gray-600",children:"Custom Agent:"}),(0,d.jsx)("dd",{className:"font-mono text-xs text-gray-900 truncate max-w-[200px]",title:q.ai_agent_id,children:q.ai_agent_id})]}),q.ai_post_prompt_url&&(0,d.jsxs)("div",{className:"flex justify-between",children:[(0,d.jsx)("dt",{className:"text-gray-600",children:"Webhook:"}),(0,d.jsx)("dd",{className:"font-medium text-gray-900",children:"✓ Configured"})]})]})]})]}),c&&(0,d.jsx)("button",{onClick:s,disabled:j,className:"w-full py-3 bg-primary-600 hover:bg-primary-700 text-white rounded-md font-medium transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed",children:j?"Saving...":"Save Configuration"}),!c&&(0,d.jsx)("p",{className:"text-sm text-gray-500 text-center",children:"Contact your organization owner or admin to modify AI settings"})]})]})}let bp=["call.started","call.answered","call.completed","call.failed","call.disposition_set","recording.available","recording.transcribed","transcript.completed","translation.completed","survey.completed","scorecard.completed","evidence.exported"];function bq({organizationId:a,webhook:b,onClose:c,onSuccess:f}){let g=!!b,[h,i]=(0,e.useState)(b?.name||""),[j,k]=(0,e.useState)(b?.url||""),[l,m]=(0,e.useState)(b?.events||[]),[n,o]=(0,e.useState)(b?.retry_policy||"exponential"),[p,q]=(0,e.useState)(b?.max_retries?.toString()||"5"),[r,s]=(0,e.useState)(b?.timeout_ms?.toString()||"30000"),[t,u]=(0,e.useState)(b?.headers?Object.entries(b.headers).map(([a,b])=>({key:a,value:b})):[]),[v,w]=(0,e.useState)(!1),[x,y]=(0,e.useState)(!1),[z,A]=(0,e.useState)(null),[B,C]=(0,e.useState)(null),[D,E]=(0,e.useState)(null),[F,G]=(0,e.useState)(null),[H,I]=(0,e.useState)(null);function J(a){return!a||a.length<1||a.length>100?(E("Name must be 1-100 characters"),!1):(E(null),!0)}function K(a){try{let b=new URL(a);if(!["http:","https:"].includes(b.protocol))return G("URL must use HTTP or HTTPS"),!1;return G(null),!0}catch{return G("Invalid URL format"),!1}}function L(a,b,c){let d=[...t];d[a][b]=c,u(d)}async function M(a){a.preventDefault();let d=J(h),e=K(j),i=0===l.length?(I("Select at least one event type"),!1):(I(null),!0);if(d&&e&&i)try{y(!0),A(null);let a={};t.forEach(b=>{b.key&&b.value&&(a[b.key]=b.value)});let d={name:h,url:j,events:l,headers:a,retry_policy:n,max_retries:parseInt(p),timeout_ms:parseInt(r)},e=g?`/api/webhooks/subscriptions/${b.id}`:"/api/webhooks/subscriptions",i=await fetch(e,{method:g?"PATCH":"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(d)});if(!i.ok){let a=await i.json();throw Error(a.error?.message||"Failed to save webhook")}let k=await i.json();!g&&k.subscription?.secret?C(k.subscription.secret):(f(),c())}catch(a){A(a.message||"Failed to save webhook")}finally{y(!1)}}return B?(0,d.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center z-50 p-4",children:(0,d.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full p-6",children:[(0,d.jsxs)("div",{className:"mb-6",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,d.jsx)("span",{className:"text-2xl",children:"✓"}),(0,d.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Webhook Created!"})]}),(0,d.jsx)("p",{className:"text-sm text-gray-600",children:"Save this secret - it won't be shown again."})]}),(0,d.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-6",children:[(0,d.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:"Webhook Secret"}),(0,d.jsx)("code",{className:"block bg-white p-3 rounded border border-gray-300 font-mono text-sm text-gray-900 break-all",children:B}),(0,d.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(B)},className:"mt-3 w-full px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Copy Secret"})]}),(0,d.jsx)("div",{className:"flex justify-end",children:(0,d.jsx)("button",{onClick:()=>{f(),c()},className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700",children:"Done"})})]})}):(0,d.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center z-50 p-4",children:(0,d.jsx)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:(0,d.jsxs)("form",{onSubmit:M,children:[(0,d.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between sticky top-0 bg-white",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:g?"Edit Webhook":"Create Webhook"}),(0,d.jsx)("button",{type:"button",onClick:c,className:"text-gray-400 hover:text-gray-500 text-2xl leading-none","aria-label":"Close",children:"\xd7"})]}),z&&(0,d.jsx)("div",{className:"mx-6 mt-4 p-4 bg-red-50 border border-red-200 rounded-md",children:(0,d.jsx)("p",{className:"text-sm text-red-600",children:z})}),(0,d.jsxs)("div",{className:"px-6 py-4 space-y-6",children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Webhook Name ",(0,d.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,d.jsx)("input",{type:"text",value:h,onChange:a=>i(a.target.value),onBlur:a=>J(a.target.value),placeholder:"Slack notifications",className:`block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-primary-600 focus:border-primary-600 sm:text-sm ${D?"border-red-300":"border-gray-300"}`,required:!0}),D&&(0,d.jsx)("p",{className:"mt-1 text-xs text-red-600",children:D}),(0,d.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Internal name to identify this webhook"})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Endpoint URL ",(0,d.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,d.jsx)("input",{type:"url",value:j,onChange:a=>k(a.target.value),onBlur:a=>K(a.target.value),placeholder:"https://your-app.com/webhooks/word-is-bond",className:`block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-primary-600 focus:border-primary-600 sm:text-sm ${F?"border-red-300":"border-gray-300"}`,required:!0}),F&&(0,d.jsx)("p",{className:"mt-1 text-xs text-red-600",children:F}),(0,d.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Must be HTTPS"})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Events to Subscribe ",(0,d.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,d.jsx)("div",{className:"grid grid-cols-2 gap-3 border border-gray-200 rounded-md p-4",children:bp.map(a=>(0,d.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,d.jsx)("input",{type:"checkbox",checked:l.includes(a),onChange:()=>{l.includes(a)?m(l.filter(b=>b!==a)):m([...l,a])},className:"h-4 w-4 text-primary-600 focus:ring-primary-600 border-gray-300 rounded"}),(0,d.jsx)("span",{className:"text-sm text-gray-700",children:a})]},a))}),H&&(0,d.jsx)("p",{className:"mt-1 text-xs text-red-600",children:H}),(0,d.jsxs)("p",{className:"mt-1 text-xs text-gray-500",children:["Select at least one event type (",l.length," selected)"]})]}),(0,d.jsxs)("div",{className:"border-t border-gray-200 pt-4",children:[(0,d.jsxs)("button",{type:"button",onClick:()=>w(!v),className:"flex items-center gap-2 text-sm font-medium text-gray-700 hover:text-gray-900",children:[(0,d.jsx)("span",{children:v?"▼":"▶"}),"Advanced Settings"]}),v&&(0,d.jsxs)("div",{className:"mt-4 space-y-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Retry Policy"}),(0,d.jsxs)("select",{value:n,onChange:a=>o(a.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-600 focus:border-primary-600 sm:text-sm",children:[(0,d.jsx)("option",{value:"none",children:"None - Don't retry failed deliveries"}),(0,d.jsx)("option",{value:"fixed",children:"Fixed - Retry with fixed interval"}),(0,d.jsx)("option",{value:"exponential",children:"Exponential - Exponential backoff (recommended)"})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Retries"}),(0,d.jsx)("input",{type:"number",min:"0",max:"10",value:p,onChange:a=>q(a.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-600 focus:border-primary-600 sm:text-sm"}),(0,d.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Maximum 10 retries"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Timeout (ms)"}),(0,d.jsx)("input",{type:"number",min:"1000",max:"60000",step:"1000",value:r,onChange:a=>s(a.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-600 focus:border-primary-600 sm:text-sm"}),(0,d.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"1000-60000ms (1-60 seconds)"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Custom Headers"}),(0,d.jsxs)("div",{className:"space-y-2",children:[t.map((a,b)=>(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsx)("input",{type:"text",placeholder:"Header name",value:a.key,onChange:a=>L(b,"key",a.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-600 focus:border-primary-600 sm:text-sm"}),(0,d.jsx)("input",{type:"text",placeholder:"Header value",value:a.value,onChange:a=>L(b,"value",a.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-600 focus:border-primary-600 sm:text-sm"}),(0,d.jsx)("button",{type:"button",onClick:()=>{u(t.filter((a,c)=>c!==b))},className:"px-3 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Remove"})]},b)),(0,d.jsx)("button",{type:"button",onClick:function(){u([...t,{key:"",value:""}])},className:"text-sm text-primary-600 hover:text-primary-700 font-medium",children:"+ Add Header"})]}),(0,d.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Add custom headers for authentication or API keys"})]})]})]})]}),(0,d.jsxs)("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-end gap-3 sticky bottom-0 bg-white",children:[(0,d.jsx)("button",{type:"button",onClick:c,disabled:x,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Cancel"}),(0,d.jsx)("button",{type:"submit",disabled:x||!h||!j||0===l.length,className:"px-4 py-2 bg-primary-600 text-white rounded-md text-sm font-medium hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed",children:x?"Saving...":g?"Update Webhook":"Create Webhook"})]})]})})})}function br({status:a}){let b={pending:{bg:"bg-blue-100",text:"text-blue-700",label:"Pending",icon:"⏱️"},processing:{bg:"bg-blue-100",text:"text-blue-700",label:"Processing",icon:"⚙️"},delivered:{bg:"bg-green-100",text:"text-green-700",label:"Delivered",icon:"✓"},failed:{bg:"bg-red-100",text:"text-red-700",label:"Failed",icon:"✕"},retrying:{bg:"bg-amber-100",text:"text-amber-700",label:"Retrying",icon:"↻"}}[a];return(0,d.jsxs)("span",{className:`inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium ${b.bg} ${b.text}`,role:"status","aria-label":`Status: ${b.label}`,children:[(0,d.jsx)("span",{"aria-hidden":"true",children:b.icon}),b.label]})}function bs({webhookId:a,webhookName:b,onClose:c}){let[f,g]=(0,e.useState)([]),[h,i]=(0,e.useState)(!0),[j,k]=(0,e.useState)(null),[l,m]=(0,e.useState)("all"),[n,o]=(0,e.useState)(0),[p,q]=(0,e.useState)(0);async function r(){try{i(!0),k(null);let b=new URLSearchParams({limit:"50",offset:n.toString()});"all"!==l&&b.append("status",l);let c=await fetch(`/api/webhooks/subscriptions/${a}/deliveries?${b}`,{credentials:"include"});if(!c.ok)throw Error("Failed to load delivery logs");let d=await c.json();g(d.deliveries||[]),q(d.pagination?.total||0)}catch(a){k(a.message||"Failed to load delivery logs")}finally{i(!1)}}let s=n+50<p;return(0,d.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center z-50 p-4",children:(0,d.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-5xl w-full max-h-[90vh] flex flex-col",children:[(0,d.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Delivery Logs"}),(0,d.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:b})]}),(0,d.jsx)("button",{onClick:c,className:"text-gray-400 hover:text-gray-500 text-2xl leading-none","aria-label":"Close",children:"\xd7"})]}),(0,d.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by status"}),(0,d.jsxs)("select",{value:l,onChange:a=>{m(a.target.value),o(0)},className:"block w-full max-w-xs px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-600 focus:border-primary-600 sm:text-sm",children:[(0,d.jsx)("option",{value:"all",children:"All Statuses"}),(0,d.jsx)("option",{value:"pending",children:"Pending"}),(0,d.jsx)("option",{value:"delivered",children:"Delivered"}),(0,d.jsx)("option",{value:"failed",children:"Failed"}),(0,d.jsx)("option",{value:"retrying",children:"Retrying"})]})]}),(0,d.jsx)("div",{className:"flex-1 overflow-y-auto px-6 py-4",children:h?(0,d.jsxs)("div",{className:"flex items-center justify-center h-64",children:[(0,d.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"}),(0,d.jsx)("span",{className:"ml-3 text-gray-500",children:"Loading..."})]}):j?(0,d.jsxs)("div",{className:"text-center py-12",children:[(0,d.jsx)("p",{className:"text-red-600",children:j}),(0,d.jsx)("button",{onClick:r,className:"mt-4 px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700",children:"Retry"})]}):0===f.length?(0,d.jsxs)("div",{className:"text-center py-12",children:[(0,d.jsx)("p",{className:"text-gray-500",children:"No deliveries yet"}),(0,d.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"Deliveries will appear here when events are triggered"})]}):(0,d.jsx)("div",{className:"overflow-x-auto",children:(0,d.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,d.jsx)("thead",{className:"bg-gray-50",children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Event"}),(0,d.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,d.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Timestamp"}),(0,d.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Response"}),(0,d.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Attempts"})]})}),(0,d.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:f.map(a=>(0,d.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,d.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,d.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-700",children:a.event_type})}),(0,d.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,d.jsx)(br,{status:a.status})}),(0,d.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600",children:new Date(a.created_at).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}),(0,d.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:a.response_status?(0,d.jsxs)("span",{className:a.response_status>=200&&a.response_status<300?"text-green-600":"text-red-600",children:[a.response_status,a.response_time_ms&&` (${a.response_time_ms}ms)`]}):a.last_error?(0,d.jsx)("span",{className:"text-red-600 text-xs",title:a.last_error,children:"Error"}):(0,d.jsx)("span",{className:"text-gray-400",children:"—"})}),(0,d.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600",children:[a.attempts," / ",a.max_attempts]})]},a.id))})]})})}),!h&&f.length>0&&(0,d.jsxs)("div",{className:"px-6 py-4 border-t border-gray-200 flex items-center justify-between",children:[(0,d.jsxs)("span",{className:"text-sm text-gray-500",children:["Showing ",n+1,"-",Math.min(n+f.length,p)," of ",p]}),(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsx)("button",{onClick:function(){n>0&&o(Math.max(0,n-50))},disabled:0===n,className:"px-3 py-1 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,d.jsx)("button",{onClick:function(){n+50<p&&o(n+50)},disabled:!s,className:"px-3 py-1 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})})}function bt({organizationId:a,canEdit:b}){let[c,f]=(0,e.useState)([]),[g,h]=(0,e.useState)(!0),[i,j]=(0,e.useState)(null),[k,l]=(0,e.useState)(!1),[m,o]=(0,e.useState)(null),[p,q]=(0,e.useState)(null),[r,s]=(0,e.useState)(null),[t,u]=(0,e.useState)(null);async function v(){try{h(!0),j(null);let a=await fetch("/api/webhooks/subscriptions",{credentials:"include"});if(!a.ok)throw Error("Failed to load webhooks");let b=await a.json();f(b.subscriptions||[])}catch(a){j(a.message||"Failed to load webhooks")}finally{h(!1)}}async function w(a){if(b)try{if(!(await fetch(`/api/webhooks/subscriptions/${a.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({active:!a.active})})).ok)throw Error("Failed to update webhook");await v()}catch(a){alert(a.message||"Failed to update webhook")}}async function x(a){if(b&&confirm("Are you sure you want to delete this webhook? This action cannot be undone."))try{if(s(a),!(await fetch(`/api/webhooks/subscriptions/${a}`,{method:"DELETE",credentials:"include"})).ok)throw Error("Failed to delete webhook");await v()}catch(a){alert(a.message||"Failed to delete webhook")}finally{s(null)}}async function y(a){if(b)try{u(a.id);let b=await fetch(`/api/webhooks/subscriptions/${a.id}/test`,{method:"POST",credentials:"include"});if(!b.ok)throw Error("Failed to send test webhook");let c=await b.json();alert(`Test webhook sent! Check your endpoint for delivery.

Delivery ID: ${c.delivery.id}`)}catch(a){alert(a.message||"Failed to send test webhook")}finally{u(null)}}return g?(0,d.jsxs)("div",{className:"flex items-center justify-center h-64",children:[(0,d.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"}),(0,d.jsx)("span",{className:"ml-3 text-gray-500",children:"Loading webhooks..."})]}):i?(0,d.jsxs)("div",{className:"text-center py-12",children:[(0,d.jsx)("p",{className:"text-red-600",children:i}),(0,d.jsx)("button",{onClick:v,className:"mt-4 px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700",children:"Retry"})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Webhook Subscriptions"}),(0,d.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Receive real-time notifications when events occur"})]}),b&&(0,d.jsx)("button",{onClick:()=>{o(null),l(!0)},className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 text-sm font-medium",children:"Create Webhook"})]}),0===c.length?(0,d.jsxs)("div",{className:"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg",children:[(0,d.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),(0,d.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No webhooks"}),(0,d.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by creating a new webhook subscription."}),b&&(0,d.jsx)("button",{onClick:()=>{o(null),l(!0)},className:"mt-4 px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 text-sm font-medium",children:"Create Webhook"})]}):(0,d.jsx)("div",{className:"space-y-4",children:c.map(a=>(0,d.jsxs)("div",{className:"border border-gray-200 rounded-lg p-6 hover:border-gray-300 transition-colors",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsx)("h4",{className:"text-base font-semibold text-gray-900",children:a.name}),a.active?(0,d.jsx)(n.E,{variant:"default",className:"bg-green-100 text-green-700",children:"Active"}):(0,d.jsx)(n.E,{variant:"default",className:"bg-gray-100 text-gray-700",children:"Inactive"})]}),b&&(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsx)(A.d,{checked:a.active,onCheckedChange:()=>w(a),"aria-label":"Toggle active"}),(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)("button",{className:"text-gray-400 hover:text-gray-600 text-xl font-bold",onClick:a=>{a.currentTarget.nextElementSibling?.classList.toggle("hidden")},children:"⋮"}),(0,d.jsxs)("div",{className:"hidden absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded-md shadow-lg z-10",children:[(0,d.jsx)("button",{onClick:()=>{o(a),l(!0)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Edit"}),(0,d.jsx)("button",{onClick:()=>y(a),disabled:t===a.id,className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 disabled:opacity-50",children:t===a.id?"Sending...":"Test"}),(0,d.jsx)("button",{onClick:()=>q({id:a.id,name:a.name}),className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"View Logs"}),(0,d.jsx)("button",{onClick:()=>x(a.id),disabled:r===a.id,className:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 disabled:opacity-50 border-t border-gray-200",children:r===a.id?"Deleting...":"Delete"})]})]})]})]}),(0,d.jsx)("div",{className:"mb-3",children:(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)("code",{className:"text-sm text-gray-600 truncate flex-1",title:a.url,children:a.url}),(0,d.jsx)("button",{onClick:()=>{var b;return b=a.url,void navigator.clipboard.writeText(b)},className:"text-gray-400 hover:text-gray-600 text-sm",title:"Copy URL",children:"\uD83D\uDCCB"})]})}),(0,d.jsxs)("div",{className:"flex flex-wrap gap-2 mb-3",children:[a.events.slice(0,3).map(a=>(0,d.jsx)(n.E,{variant:"default",className:"bg-blue-100 text-blue-700",children:a},a)),a.events.length>3&&(0,d.jsxs)(n.E,{variant:"default",className:"bg-gray-100 text-gray-700",children:["+",a.events.length-3," more"]})]}),(0,d.jsxs)("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[(0,d.jsxs)("span",{children:["Created ",new Date(a.created_at).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})]}),(0,d.jsx)("span",{children:"•"}),(0,d.jsxs)("span",{children:["Retry: ",a.retry_policy]}),(0,d.jsx)("span",{children:"•"}),(0,d.jsxs)("span",{children:["Secret: ",a.secret]})]})]},a.id))})]}),k&&(0,d.jsx)(bq,{organizationId:a,webhook:m,onClose:()=>{l(!1),o(null)},onSuccess:()=>{v()}}),p&&(0,d.jsx)(bs,{webhookId:p.id,webhookName:p.name,onClose:()=>q(null)})]})}var bu=c(98714),bv=c(57613);function bw(){let{data:a}=(0,g.useSession)(),b=(0,h.useSearchParams)(),c=a?.user?.id,i=b.get("tab"),[j,k]=(0,e.useState)(i||"call-config"),[l,o]=f().useState(null),[q,r]=f().useState(null),[t,v]=f().useState(!0),{role:y,plan:A}=(0,x.e)(l);if(t)return(0,d.jsx)("main",{className:"min-h-screen bg-gray-50 p-8",children:(0,d.jsx)("div",{className:"max-w-5xl mx-auto",children:(0,d.jsxs)("div",{className:"flex items-center justify-center h-64",children:[(0,d.jsx)("div",{className:"loading-spinner"}),(0,d.jsx)("span",{className:"ml-3 text-gray-500",children:"Loading..."})]})})});if(!a||!c)return(0,d.jsx)("main",{className:"min-h-screen bg-white flex items-center justify-center",children:(0,d.jsxs)("div",{className:"max-w-md mx-auto text-center px-6",children:[(0,d.jsx)("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Sign in required"}),(0,d.jsx)("p",{className:"text-gray-600 mb-6",children:"Please sign in to access your settings."}),(0,d.jsx)("a",{href:"/signin?callbackUrl=/settings",className:"inline-flex items-center justify-center px-6 py-3 bg-primary-600 text-white font-medium rounded-lg hover:bg-primary-700 transition-colors",children:"Sign In"}),(0,d.jsxs)("p",{className:"mt-4 text-sm text-gray-500",children:["Don't have an account?"," ",(0,d.jsx)("a",{href:"/signup",className:"text-primary-600 hover:text-primary-700",children:"Create one"})]})]})});if(!l)return(0,d.jsx)("main",{className:"min-h-screen bg-gray-50 p-8",children:(0,d.jsxs)("div",{className:"max-w-5xl mx-auto text-center",children:[(0,d.jsx)("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"No Organization"}),(0,d.jsx)("p",{className:"text-gray-500",children:"You need to be part of an organization to access settings."})]})});let D=a?.user?.email||void 0;return(0,d.jsxs)(bu.AppShell,{organizationName:q||void 0,userEmail:D,children:[(0,d.jsx)("header",{className:"bg-white border-b border-gray-200",children:(0,d.jsxs)("div",{className:"max-w-5xl mx-auto px-6 py-6",children:[(0,d.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Settings"}),(0,d.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:[q||"Your Organization",A&&(0,d.jsx)(n.E,{variant:"default",className:"ml-2",children:A.charAt(0).toUpperCase()+A.slice(1)})]})]})}),(0,d.jsxs)("div",{className:"max-w-5xl mx-auto px-6 py-8",children:[(0,d.jsx)("nav",{className:"flex flex-wrap gap-2 mb-8","data-tour":"settings-tabs",children:[{id:"call-config",label:"Call Configuration",description:"Targets, Caller ID, defaults"},{id:"ai-control",label:"AI & Intelligence",description:"Transcription, translation, surveys"},{id:"quality",label:"Quality Assurance",description:"AI quality evaluation scripts"},{id:"team",label:"Team & Access",description:"Members, roles, permissions"},{id:"webhooks",label:"Webhooks",description:"Event subscriptions & integrations"},{id:"billing",label:"Billing",description:"Plan and payment"}].map(a=>(0,d.jsx)("button",{onClick:()=>k(a.id),"data-tour":`tab-${a.id}`,className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${j===a.id?"bg-primary-600 text-white":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:a.label},a.id))}),(0,d.jsxs)("div",{className:"space-y-8",children:["call-config"===j&&(0,d.jsxs)("div",{className:"space-y-8",children:[(0,d.jsxs)("section",{className:"space-y-6",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Call Targets"}),(0,d.jsx)("p",{className:"text-sm text-gray-500",children:"Add and manage phone numbers you want to test or monitor."})]}),(0,d.jsx)(w,{organizationId:l})]}),(0,d.jsx)("div",{className:"border-t border-gray-200 pt-8",children:(0,d.jsxs)("section",{className:"space-y-6",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Caller ID Management"}),(0,d.jsx)("p",{className:"text-sm text-gray-500",children:"Verify and manage phone numbers that appear as your caller ID."})]}),(0,d.jsx)(p,{organizationId:l})]})})]}),"ai-control"===j&&(0,d.jsxs)("div",{className:"space-y-8",children:[(0,d.jsx)(bx,{organizationId:l,canEdit:"owner"===y||"admin"===y}),(0,d.jsx)("div",{className:"border-t border-gray-200 pt-8",children:(0,d.jsxs)("section",{className:"space-y-6",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-1",children:"AI Agent Configuration"}),(0,d.jsx)("p",{className:"text-sm text-gray-500",children:"Configure live translation, voice cloning, and AI model settings."})]}),(0,d.jsx)(bo,{organizationId:l,plan:A||"free",canEdit:"owner"===y||"admin"===y})]})}),(0,d.jsx)("div",{className:"border-t border-gray-200 pt-8",children:(0,d.jsxs)("section",{className:"space-y-6",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Survey Builder"}),(0,d.jsx)("p",{className:"text-sm text-gray-500",children:"Create after-call surveys to gather customer feedback."})]}),(0,d.jsx)(z,{organizationId:l})]})})]}),"quality"===j&&(0,d.jsxs)("section",{className:"space-y-6",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-1",children:"AI Quality Evaluation Scripts"}),(0,d.jsx)("p",{className:"text-sm text-gray-500",children:"Create and manage scripts for AI-powered quality evaluations. For internal QA purposes only."})]}),(0,d.jsx)(s,{organizationId:l}),(0,d.jsxs)("div",{className:"border-t border-gray-200 pt-8",children:[(0,d.jsx)(u,{organizationId:l,disabled:"business"!==A&&"enterprise"!==A}),"business"!==A&&"enterprise"!==A&&(0,d.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"Upgrade to Business for scorecard templates and QA alerts."})]})]}),"compliance"===j&&(0,d.jsx)(B,{organizationId:l,canEdit:"owner"===y||"admin"===y}),"team"===j&&(0,d.jsx)(m,{organizationId:l}),"webhooks"===j&&(0,d.jsx)("div",{className:"space-y-8",children:(0,d.jsx)("section",{className:"space-y-6",children:(0,d.jsx)(bt,{organizationId:l,canEdit:"owner"===y||"admin"===y})})}),"billing"===j&&(0,d.jsxs)("section",{className:"space-y-6",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Billing & Plan"}),(0,d.jsx)("p",{className:"text-sm text-gray-500",children:"Manage your subscription and payment methods."})]}),(0,d.jsx)(C,{organizationId:l,plan:A||"free"}),(0,d.jsx)(a6,{organizationId:l,role:y||"viewer"}),(0,d.jsx)(a9,{organizationId:l,role:y||"viewer"}),(0,d.jsx)(bf,{organizationId:l,role:y||"viewer"}),(0,d.jsx)(bl,{currentPlan:A||"free",organizationId:l,role:y||"viewer"}),(0,d.jsxs)("div",{className:"bg-white rounded-md border border-gray-200 p-6",children:[(0,d.jsx)("h3",{className:"font-medium text-gray-900 mb-4",children:"Upgrade Drivers"}),(0,d.jsx)("div",{className:"grid md:grid-cols-3 gap-4",children:[{title:"Audit‑Ready Evidence",detail:"Custody‑grade bundles with canonical hashing."},{title:"Export + Debug Bundle",detail:"Deterministic exports with manifests + provenance."},{title:"Verification Ready",detail:"Verify bundles and manifests independently."}].map(a=>(0,d.jsxs)("div",{className:"bg-gray-50 rounded-md p-4 border border-gray-200",children:[(0,d.jsx)("p",{className:"text-sm font-semibold text-gray-900",children:a.title}),(0,d.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:a.detail})]},a.title))}),(0,d.jsx)("div",{className:"mt-4",children:(0,d.jsx)("a",{href:"/pricing",className:"text-sm text-primary-600 hover:text-primary-700 font-medium",children:"View pricing and plan details"})})]})]}),y&&(0,d.jsxs)("div",{className:"text-sm text-gray-500 border-t border-gray-200 pt-4",children:["Your role: ",(0,d.jsx)("span",{className:"text-gray-900 font-medium",children:y}),"owner"===y||"admin"===y?(0,d.jsx)("span",{className:"text-success ml-2",children:"Full settings access"}):(0,d.jsx)("span",{className:"text-warning ml-2",children:"Limited access"})]})]})]}),(0,d.jsx)(bv.WB,{tourId:"settings",steps:bv.V$})]})}function bx({organizationId:a,canEdit:b}){let{config:c,updateConfig:e,loading:f}=(0,v.g)(a),g=[{key:"transcribe",label:"AI Transcription",description:"Disable: Source recordings remain. Manual review only.",icon:(0,d.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})},{key:"translate",label:"AI Translation",description:"Disable: Canonical transcripts remain. Translation off.",icon:(0,d.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129"})})}];return f?(0,d.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,d.jsx)("div",{className:"loading-spinner"}),(0,d.jsx)("span",{className:"ml-3 text-gray-500",children:"Loading AI settings..."})]}):(0,d.jsxs)("section",{className:"space-y-6",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-1",children:"AI Control & Independence"}),(0,d.jsx)("p",{className:"text-sm text-gray-500",children:"You own your data. We make that real."})]}),(0,d.jsxs)("div",{className:"bg-white rounded-md border border-gray-200 p-6",children:[(0,d.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,d.jsx)("div",{className:"w-10 h-10 rounded-md bg-success-light flex items-center justify-center",children:(0,d.jsx)("svg",{className:"w-5 h-5 text-success",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"text-base font-semibold text-gray-900",children:"Evidence Independence"}),(0,d.jsx)("p",{className:"text-sm text-gray-500",children:"Disable any AI feature without losing your source evidence"})]})]}),(0,d.jsx)("div",{className:"space-y-4",children:g.map(a=>(0,d.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-md border border-gray-200",children:[(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsx)("div",{className:"text-gray-400",children:a.icon}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm font-medium text-gray-900",children:a.label}),(0,d.jsx)("p",{className:"text-xs text-gray-500",children:a.description})]})]}),(0,d.jsx)(A.d,{checked:c?.[a.key]??!1,onCheckedChange:b=>e({[a.key]:b}),disabled:!b,"aria-label":a.label})]},a.key))}),(0,d.jsx)("div",{className:"mt-6 p-4 bg-info-light rounded-md border border-blue-200",children:(0,d.jsxs)("p",{className:"text-sm text-gray-700",children:[(0,d.jsx)("strong",{className:"text-gray-900",children:"Why this matters:"})," Your call evidence must be defensible in disputes, audits, and legal proceedings. AI assists — but never replaces — the source of truth. Source recordings and canonical transcripts are always preserved, regardless of AI settings."]})})]}),(0,d.jsxs)("div",{className:"bg-white rounded-md border border-gray-200 p-6",children:[(0,d.jsx)("h3",{className:"text-base font-semibold text-gray-900 mb-4",children:"Evidence Guarantee"}),(0,d.jsxs)("ul",{className:"space-y-3 text-sm text-gray-600",children:[(0,d.jsxs)("li",{className:"flex items-start gap-2",children:[(0,d.jsx)("svg",{className:"w-4 h-4 text-success mt-0.5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,d.jsxs)("span",{children:[(0,d.jsx)("strong",{className:"text-gray-900",children:"Source recordings"})," are never modified after capture"]})]}),(0,d.jsxs)("li",{className:"flex items-start gap-2",children:[(0,d.jsx)("svg",{className:"w-4 h-4 text-success mt-0.5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,d.jsxs)("span",{children:[(0,d.jsx)("strong",{className:"text-gray-900",children:"Canonical transcripts"})," are versioned and cryptographically hashed"]})]}),(0,d.jsxs)("li",{className:"flex items-start gap-2",children:[(0,d.jsx)("svg",{className:"w-4 h-4 text-success mt-0.5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,d.jsxs)("span",{children:[(0,d.jsx)("strong",{className:"text-gray-900",children:"Evidence manifests"})," provide full provenance chain"]})]}),(0,d.jsxs)("li",{className:"flex items-start gap-2",children:[(0,d.jsx)("svg",{className:"w-4 h-4 text-success mt-0.5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,d.jsxs)("span",{children:[(0,d.jsx)("strong",{className:"text-gray-900",children:"Export bundles"})," are self-contained and vendor-independent"]})]})]})]})]})}function by(){return(0,d.jsx)(e.Suspense,{fallback:(0,d.jsx)("main",{className:"min-h-screen bg-gray-50 p-8",children:(0,d.jsxs)("div",{className:"max-w-5xl mx-auto flex items-center justify-center h-64",children:[(0,d.jsx)("div",{className:"loading-spinner"}),(0,d.jsx)("span",{className:"ml-3 text-gray-500",children:"Loading..."})]})}),children:(0,d.jsx)(bw,{})})}},261:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/app-paths")},3295:a=>{"use strict";a.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},7629:(a,b,c)=>{"use strict";c.d(b,{p:()=>e});var d=c(21124);let e=(0,c(38301).forwardRef)(({className:a="",label:b,error:c,hint:e,id:f,...g},h)=>{let i=f||`input-${Math.random().toString(36).substring(2,11)}`,j=`
      w-full h-10 px-3
      bg-white border rounded-md
      text-gray-900 placeholder-gray-400
      transition-colors duration-150
      focus:outline-none focus:ring-2 focus:ring-offset-0
      disabled:bg-gray-50 disabled:text-gray-500 disabled:cursor-not-allowed
      ${c?"border-error focus:ring-error focus:border-error":"border-gray-300 focus:ring-primary-600 focus:border-primary-600"}
    `.replace(/\s+/g," ").trim();return(0,d.jsxs)("div",{className:"w-full",children:[b&&(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",htmlFor:i,children:b}),(0,d.jsx)("input",{ref:h,id:i,className:`${j} ${a}`,"aria-invalid":c?"true":void 0,"aria-describedby":c?`${i}-error`:e?`${i}-hint`:void 0,...g}),e&&!c&&(0,d.jsx)("p",{id:`${i}-hint`,className:"mt-1.5 text-sm text-gray-500",children:e}),c&&(0,d.jsx)("p",{id:`${i}-error`,className:"mt-1.5 text-sm text-error",role:"alert",children:c})]})});e.displayName="Input"},8849:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(23339).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},10846:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14263:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(23339).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},17585:(a,b,c)=>{"use strict";c.d(b,{d:()=>e});var d=c(21124);function e({checked:a=!1,onChange:b,onCheckedChange:c,disabled:e=!1,className:f="",...g}){return(0,d.jsx)("button",{type:"button",role:"switch","aria-checked":a,"aria-disabled":e,onClick:()=>{if(e)return;let d=!a;b?.(d),c?.(d)},disabled:e,className:`inline-flex items-center h-6 w-11 rounded-full p-0.5 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-primary-600 focus:ring-offset-2 ${e?"bg-gray-200 cursor-not-allowed opacity-60":a?"bg-primary-600 cursor-pointer":"bg-gray-300 cursor-pointer hover:bg-gray-400"} ${f}`,...g,children:(0,d.jsx)("span",{className:`inline-block h-5 w-5 rounded-full bg-white transform transition-transform shadow-sm ${a?"translate-x-5":"translate-x-0"}`})})}c(38301)},17677:(a,b,c)=>{"use strict";c.d(b,{A0:()=>h,BF:()=>i,Hj:()=>j,XI:()=>g,nA:()=>l,nd:()=>k});var d=c(21124),e=c(38301),f=c(93133);let g=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{className:"relative w-full overflow-auto",children:(0,d.jsx)("table",{ref:c,className:(0,f.cn)("w-full caption-bottom text-sm",a),...b})}));g.displayName="Table";let h=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("thead",{ref:c,className:(0,f.cn)("[&_tr]:border-b",a),...b}));h.displayName="TableHeader";let i=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("tbody",{ref:c,className:(0,f.cn)("[&_tr:last-child]:border-0",a),...b}));i.displayName="TableBody",e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("tfoot",{ref:c,className:(0,f.cn)("border-t bg-gray-50 font-medium [&>tr]:last:border-b-0",a),...b})).displayName="TableFooter";let j=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("tr",{ref:c,className:(0,f.cn)("border-b transition-colors hover:bg-gray-50 data-[state=selected]:bg-gray-100",a),...b}));j.displayName="TableRow";let k=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("th",{ref:c,className:(0,f.cn)("h-12 px-4 text-left align-middle font-medium text-gray-500 [&:has([role=checkbox])]:pr-0",a),...b}));k.displayName="TableHead";let l=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("td",{ref:c,className:(0,f.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...b}));l.displayName="TableCell",e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("caption",{ref:c,className:(0,f.cn)("mt-4 text-sm text-gray-500",a),...b})).displayName="TableCaption"},19121:a=>{"use strict";a.exports=require("next/dist/server/app-render/action-async-storage.external.js")},23499:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>d});let d=(0,c(97954).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\Ultimate Warrior\\\\My project\\\\gemini-project\\\\app\\\\settings\\\\error.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\Ultimate Warrior\\My project\\gemini-project\\app\\settings\\error.tsx","default")},26713:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/is-bot")},28354:a=>{"use strict";a.exports=require("util")},29294:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30787:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"createDedupedByCallsiteServerErrorLoggerDev",{enumerable:!0,get:function(){return i}});let d=function(a,b){if(a&&a.__esModule)return a;if(null===a||"object"!=typeof a&&"function"!=typeof a)return{default:a};var c=e(b);if(c&&c.has(a))return c.get(a);var d={__proto__:null},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in a)if("default"!==g&&Object.prototype.hasOwnProperty.call(a,g)){var h=f?Object.getOwnPropertyDescriptor(a,g):null;h&&(h.get||h.set)?Object.defineProperty(d,g,h):d[g]=a[g]}return d.default=a,c&&c.set(a,d),d}(c(74515));function e(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(e=function(a){return a?c:b})(a)}let f={current:null},g="function"==typeof d.cache?d.cache:a=>a,h=console.warn;function i(a){return function(...b){h(a(...b))}}g(a=>{try{h(f.current)}finally{f.current=null}})},33873:a=>{"use strict";a.exports=require("path")},41025:a=>{"use strict";a.exports=require("next/dist/server/app-render/dynamic-access-async-storage.external.js")},45119:(a,b,c)=>{"use strict";c.d(b,{BT:()=>k,Wu:()=>l,ZB:()=>j,Zp:()=>h,aR:()=>i,wL:()=>m});var d=c(21124),e=c(38301),f=c.n(e),g=c(93133);function h({children:a,className:b="",header:c,footer:e,padding:f="md",...h}){return(0,d.jsxs)("div",{className:(0,g.cn)("bg-white border border-gray-200 rounded-md",b),...h,children:[c&&(0,d.jsx)("div",{className:"px-4 py-3 border-b border-gray-200",children:c}),(0,d.jsx)("div",{className:{none:"",sm:"p-3",md:"p-4",lg:"p-6"}[f],children:a}),e&&(0,d.jsx)("div",{className:"px-4 py-3 border-t border-gray-200 bg-gray-50",children:e})]})}let i=f().forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,g.cn)("flex flex-col space-y-1.5 p-6",a),...b}));i.displayName="CardHeader";let j=f().forwardRef(({className:a,...b},c)=>(0,d.jsx)("h3",{ref:c,className:(0,g.cn)("text-2xl font-semibold leading-none tracking-tight",a),...b}));j.displayName="CardTitle";let k=f().forwardRef(({className:a,...b},c)=>(0,d.jsx)("p",{ref:c,className:(0,g.cn)("text-sm text-gray-500",a),...b}));k.displayName="CardDescription";let l=f().forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,g.cn)("p-6 pt-0",a),...b}));l.displayName="CardContent";let m=f().forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,g.cn)("flex items-center p-6 pt-0",a),...b}));m.displayName="CardFooter"},45144:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>d});let d=(0,c(97954).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\Ultimate Warrior\\\\My project\\\\gemini-project\\\\app\\\\settings\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\Ultimate Warrior\\My project\\gemini-project\\app\\settings\\page.tsx","default")},47178:(a,b,c)=>{Promise.resolve().then(c.bind(c,23499))},49269:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(23339).A)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])},55108:(a,b,c)=>{"use strict";async function d(a,b={}){let c=await fetch(a,{...b,method:"GET",credentials:"include"});if(!c.ok){let a=await c.json().catch(()=>({message:c.statusText}));throw new g(c.status,a.error?.message||a.message||"Request failed")}return c.json()}async function e(a,b,c={}){let d={"Content-Type":"application/json",...c.headers},f=await fetch(a,{...c,method:"POST",credentials:"include",headers:d,body:b?JSON.stringify(b):void 0});if(!f.ok){let a=await f.json().catch(()=>({message:f.statusText}));throw new g(f.status,a.error?.message||a.message||"Request failed")}return f.json()}async function f(a,b={}){let c=await fetch(a,{...b,method:"DELETE",credentials:"include"});if(!c.ok){let a=await c.json().catch(()=>({message:c.statusText}));throw new g(c.status,a.error?.message||a.message||"Request failed")}return c.json()}c.d(b,{$P:()=>e,Al:()=>f,Vg:()=>d});class g extends Error{constructor(a,b){super(b),this.status=a,this.name="ApiError"}}},63033:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},67725:(a,b,c)=>{"use strict";c.d(b,{U:()=>i,g:()=>j});var d=c(21124),e=c(38301);let f={recording_enabled:"record",transcription_enabled:"transcribe",translation_enabled:"translate",translation_from:"translate_from",translation_to:"translate_to",survey_enabled:"survey",secret_shopper_enabled:"synthetic_caller"};function g(a){let b={};for(let[c,d]of Object.entries(a))b[f[c]||c]=d;return b}let h=(0,e.createContext)(null);function i({organizationId:a,children:b}){let[c,f]=(0,e.useState)(null),[i,j]=(0,e.useState)(!0),[k,l]=(0,e.useState)(null),m=(0,e.useCallback)(async b=>{if(!a)throw Error("Organization ID required");try{l(null);let{quick_dial_number:d,from_number:e,target_id:h,campaign_id:i,...j}=b,k={};if("quick_dial_number"in b&&(k.quick_dial_number=d),"from_number"in b&&(k.from_number=e),"target_id"in b&&(k.target_id=h),"campaign_id"in b&&(k.campaign_id=i),Object.keys(k).length>0&&f(a=>({...a||{},...k})),0===Object.keys(j).length)return{...c||{},...k};let m=g(j),n=await fetch("/api/voice/config",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({orgId:a,modulations:m})});if(!n.ok){let a=await n.json().catch(()=>({error:"Failed to update config"}));throw Error(a.error?.message||a.error||"Failed to update config")}let o={...(await n.json()).config||{},quick_dial_number:k.quick_dial_number??c?.quick_dial_number,from_number:k.from_number??c?.from_number,target_id:k.target_id??c?.target_id,campaign_id:k.campaign_id??c?.campaign_id};return f(o),o}catch(a){throw l(a?.message||"Failed to update config"),a}},[a,c]);return(0,d.jsx)(h.Provider,{value:{config:c,loading:i,error:k,updateConfig:m},children:b})}function j(a){let b=(0,e.useContext)(h);if(b)return b;let[c,d]=(0,e.useState)(null),[f,i]=(0,e.useState)(!0),[j,k]=(0,e.useState)(null),l=(0,e.useCallback)(async b=>{if(!a)throw Error("Organization ID required");let{quick_dial_number:e,from_number:f,target_id:h,campaign_id:i,...j}=b,k={};if("quick_dial_number"in b&&(k.quick_dial_number=e),"from_number"in b&&(k.from_number=f),"target_id"in b&&(k.target_id=h),"campaign_id"in b&&(k.campaign_id=i),Object.keys(k).length>0&&d(a=>({...a||{},...k})),0===Object.keys(j).length)return{...c||{},...k};let l=g(j),m=await fetch("/api/voice/config",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({orgId:a,modulations:l})});if(!m.ok){let a=await m.json().catch(()=>({error:"Failed to update config"}));throw Error(a.error?.message||a.error||"Failed to update config")}let n={...(await m.json()).config||{},quick_dial_number:k.quick_dial_number??c?.quick_dial_number,from_number:k.from_number??c?.from_number,target_id:k.target_id??c?.target_id,campaign_id:k.campaign_id??c?.campaign_id};return d(n),n},[a,c]);return{config:c,loading:f,error:j,updateConfig:l}}},68520:(a,b,c)=>{"use strict";c.r(b),c.d(b,{GlobalError:()=>D.a,__next_app__:()=>J,handler:()=>L,pages:()=>I,routeModule:()=>K,tree:()=>H});var d=c(49754),e=c(9117),f=c(46595),g=c(32324),h=c(39326),i=c(38928),j=c(20175),k=c(12),l=c(54290),m=c(12696),n=c(82802),o=c(77533),p=c(45229),q=c(32822),r=c(261),s=c(26453),t=c(52474),u=c(26713),v=c(51356),w=c(62685),x=c(36225),y=c(63446),z=c(2762),A=c(45742),B=c(86439),C=c(81170),D=c.n(C),E=c(62506),F=c(91203),G={};for(let a in E)0>["default","tree","pages","GlobalError","__next_app__","routeModule","handler"].indexOf(a)&&(G[a]=()=>E[a]);c.d(b,G);let H={children:["",{children:["settings",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(c.bind(c,45144)),"C:\\Users\\Ultimate Warrior\\My project\\gemini-project\\app\\settings\\page.tsx"]}]},{error:[()=>Promise.resolve().then(c.bind(c,23499)),"C:\\Users\\Ultimate Warrior\\My project\\gemini-project\\app\\settings\\error.tsx"]}]},{layout:[()=>Promise.resolve().then(c.bind(c,16953)),"C:\\Users\\Ultimate Warrior\\My project\\gemini-project\\app\\layout.tsx"],loading:[()=>Promise.resolve().then(c.bind(c,90391)),"C:\\Users\\Ultimate Warrior\\My project\\gemini-project\\app\\loading.tsx"],"global-error":[()=>Promise.resolve().then(c.t.bind(c,81170,23)),"next/dist/client/components/builtin/global-error.js"],"not-found":[()=>Promise.resolve().then(c.t.bind(c,87028,23)),"next/dist/client/components/builtin/not-found.js"],forbidden:[()=>Promise.resolve().then(c.t.bind(c,90461,23)),"next/dist/client/components/builtin/forbidden.js"],unauthorized:[()=>Promise.resolve().then(c.t.bind(c,32768,23)),"next/dist/client/components/builtin/unauthorized.js"]}]}.children,I=["C:\\Users\\Ultimate Warrior\\My project\\gemini-project\\app\\settings\\page.tsx"],J={require:c,loadChunk:()=>Promise.resolve()},K=new d.AppPageRouteModule({definition:{kind:e.RouteKind.APP_PAGE,page:"/settings/page",pathname:"/settings",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:H},distDir:".next",relativeProjectDir:""});async function L(a,b,d){var C;let G="/settings/page";"/index"===G&&(G="/");let M=(0,h.getRequestMeta)(a,"postponed"),N=(0,h.getRequestMeta)(a,"minimalMode"),O=await K.prepare(a,b,{srcPage:G,multiZoneDraftMode:!1});if(!O)return b.statusCode=400,b.end("Bad Request"),null==d.waitUntil||d.waitUntil.call(d,Promise.resolve()),null;let{buildId:P,query:Q,params:R,parsedUrl:S,pageIsDynamic:T,buildManifest:U,nextFontManifest:V,reactLoadableManifest:W,serverActionsManifest:X,clientReferenceManifest:Y,subresourceIntegrityManifest:Z,prerenderManifest:$,isDraftMode:_,resolvedPathname:aa,revalidateOnlyGenerated:ab,routerServerContext:ac,nextConfig:ad,interceptionRoutePatterns:ae}=O,af=S.pathname||"/",ag=(0,r.normalizeAppPath)(G),{isOnDemandRevalidate:ah}=O,ai=K.match(af,$),aj=!!$.routes[aa],ak=!!(ai||aj||$.routes[ag]),al=a.headers["user-agent"]||"",am=(0,u.getBotType)(al),an=(0,p.isHtmlBotRequest)(a),ao=(0,h.getRequestMeta)(a,"isPrefetchRSCRequest")??"1"===a.headers[t.NEXT_ROUTER_PREFETCH_HEADER],ap=(0,h.getRequestMeta)(a,"isRSCRequest")??!!a.headers[t.RSC_HEADER],aq=(0,s.getIsPossibleServerAction)(a),ar=(0,m.checkIsAppPPREnabled)(ad.experimental.ppr)&&(null==(C=$.routes[ag]??$.dynamicRoutes[ag])?void 0:C.renderingMode)==="PARTIALLY_STATIC",as=!1,at=!1,au=ar?M:void 0,av=ar&&ap&&!ao,aw=(0,h.getRequestMeta)(a,"segmentPrefetchRSCRequest"),ax=!al||(0,p.shouldServeStreamingMetadata)(al,ad.htmlLimitedBots);an&&ar&&(ak=!1,ax=!1);let ay=!0===K.isDev||!ak||"string"==typeof M||av,az=an&&ar,aA=null;_||!ak||ay||aq||au||av||(aA=aa);let aB=aA;!aB&&K.isDev&&(aB=aa),K.isDev||_||!ak||!ap||av||(0,k.d)(a.headers);let aC={...E,tree:H,pages:I,GlobalError:D(),handler:L,routeModule:K,__next_app__:J};X&&Y&&(0,o.setReferenceManifestsSingleton)({page:G,clientReferenceManifest:Y,serverActionsManifest:X,serverModuleMap:(0,q.createServerModuleMap)({serverActionsManifest:X})});let aD=a.method||"GET",aE=(0,g.getTracer)(),aF=aE.getActiveScopeSpan();try{let f=K.getVaryHeader(aa,ae);b.setHeader("Vary",f);let k=async(c,d)=>{let e=new l.NodeNextRequest(a),f=new l.NodeNextResponse(b);return K.render(e,f,d).finally(()=>{if(!c)return;c.setAttributes({"http.status_code":b.statusCode,"next.rsc":!1});let d=aE.getRootSpanAttributes();if(!d)return;if(d.get("next.span_type")!==i.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${d.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let e=d.get("next.route");if(e){let a=`${aD} ${e}`;c.setAttributes({"next.route":e,"http.route":e,"next.span_name":a}),c.updateName(a)}else c.updateName(`${aD} ${a.url}`)})},m=async({span:e,postponed:f,fallbackRouteParams:g})=>{let i={query:Q,params:R,page:ag,sharedContext:{buildId:P},serverComponentsHmrCache:(0,h.getRequestMeta)(a,"serverComponentsHmrCache"),fallbackRouteParams:g,renderOpts:{App:()=>null,Document:()=>null,pageConfig:{},ComponentMod:aC,Component:(0,j.T)(aC),params:R,routeModule:K,page:G,postponed:f,shouldWaitOnAllReady:az,serveStreamingMetadata:ax,supportsDynamicResponse:"string"==typeof f||ay,buildManifest:U,nextFontManifest:V,reactLoadableManifest:W,subresourceIntegrityManifest:Z,serverActionsManifest:X,clientReferenceManifest:Y,setIsrStatus:null==ac?void 0:ac.setIsrStatus,dir:c(33873).join(process.cwd(),K.relativeProjectDir),isDraftMode:_,isRevalidate:ak&&!f&&!av,botType:am,isOnDemandRevalidate:ah,isPossibleServerAction:aq,assetPrefix:ad.assetPrefix,nextConfigOutput:ad.output,crossOrigin:ad.crossOrigin,trailingSlash:ad.trailingSlash,previewProps:$.preview,deploymentId:ad.deploymentId,enableTainting:ad.experimental.taint,htmlLimitedBots:ad.htmlLimitedBots,devtoolSegmentExplorer:ad.experimental.devtoolSegmentExplorer,reactMaxHeadersLength:ad.reactMaxHeadersLength,multiZoneDraftMode:!1,incrementalCache:(0,h.getRequestMeta)(a,"incrementalCache"),cacheLifeProfiles:ad.experimental.cacheLife,basePath:ad.basePath,serverActions:ad.experimental.serverActions,...as?{nextExport:!0,supportsDynamicResponse:!1,isStaticGeneration:!0,isRevalidate:!0,isDebugDynamicAccesses:as}:{},experimental:{isRoutePPREnabled:ar,expireTime:ad.expireTime,staleTimes:ad.experimental.staleTimes,cacheComponents:!!ad.experimental.cacheComponents,clientSegmentCache:!!ad.experimental.clientSegmentCache,clientParamParsing:!!ad.experimental.clientParamParsing,dynamicOnHover:!!ad.experimental.dynamicOnHover,inlineCss:!!ad.experimental.inlineCss,authInterrupts:!!ad.experimental.authInterrupts,clientTraceMetadata:ad.experimental.clientTraceMetadata||[]},waitUntil:d.waitUntil,onClose:a=>{b.on("close",a)},onAfterTaskError:()=>{},onInstrumentationRequestError:(b,c,d)=>K.onRequestError(a,b,d,ac),err:(0,h.getRequestMeta)(a,"invokeError"),dev:K.isDev}},l=await k(e,i),{metadata:m}=l,{cacheControl:n,headers:o={},fetchTags:p}=m;if(p&&(o[y.NEXT_CACHE_TAGS_HEADER]=p),a.fetchMetrics=m.fetchMetrics,ak&&(null==n?void 0:n.revalidate)===0&&!K.isDev&&!ar){let a=m.staticBailoutInfo,b=Object.defineProperty(Error(`Page changed from static to dynamic at runtime ${aa}${(null==a?void 0:a.description)?`, reason: ${a.description}`:""}
see more here https://nextjs.org/docs/messages/app-static-to-dynamic-error`),"__NEXT_ERROR_CODE",{value:"E132",enumerable:!1,configurable:!0});if(null==a?void 0:a.stack){let c=a.stack;b.stack=b.message+c.substring(c.indexOf("\n"))}throw b}return{value:{kind:v.CachedRouteKind.APP_PAGE,html:l,headers:o,rscData:m.flightData,postponed:m.postponed,status:m.statusCode,segmentData:m.segmentData},cacheControl:n}},o=async({hasResolved:c,previousCacheEntry:f,isRevalidating:g,span:i})=>{let j,k=!1===K.isDev,l=c||b.writableEnded;if(ah&&ab&&!f&&!N)return(null==ac?void 0:ac.render404)?await ac.render404(a,b):(b.statusCode=404,b.end("This page could not be found")),null;if(ai&&(j=(0,w.parseFallbackField)(ai.fallback)),j===w.FallbackMode.PRERENDER&&(0,u.isBot)(al)&&(!ar||an)&&(j=w.FallbackMode.BLOCKING_STATIC_RENDER),(null==f?void 0:f.isStale)===-1&&(ah=!0),ah&&(j!==w.FallbackMode.NOT_FOUND||f)&&(j=w.FallbackMode.BLOCKING_STATIC_RENDER),!N&&j!==w.FallbackMode.BLOCKING_STATIC_RENDER&&aB&&!l&&!_&&T&&(k||!aj)){let b;if((k||ai)&&j===w.FallbackMode.NOT_FOUND)throw new B.NoFallbackError;if(ar&&!ap){let c="string"==typeof(null==ai?void 0:ai.fallback)?ai.fallback:k?ag:null;if(b=await K.handleResponse({cacheKey:c,req:a,nextConfig:ad,routeKind:e.RouteKind.APP_PAGE,isFallback:!0,prerenderManifest:$,isRoutePPREnabled:ar,responseGenerator:async()=>m({span:i,postponed:void 0,fallbackRouteParams:k||at?(0,n.u)(ag):null}),waitUntil:d.waitUntil}),null===b)return null;if(b)return delete b.cacheControl,b}}let o=ah||g||!au?void 0:au;if(as&&void 0!==o)return{cacheControl:{revalidate:1,expire:void 0},value:{kind:v.CachedRouteKind.PAGES,html:x.default.EMPTY,pageData:{},headers:void 0,status:void 0}};let p=T&&ar&&((0,h.getRequestMeta)(a,"renderFallbackShell")||at)?(0,n.u)(af):null;return m({span:i,postponed:o,fallbackRouteParams:p})},p=async c=>{var f,g,i,j,k;let l,n=await K.handleResponse({cacheKey:aA,responseGenerator:a=>o({span:c,...a}),routeKind:e.RouteKind.APP_PAGE,isOnDemandRevalidate:ah,isRoutePPREnabled:ar,req:a,nextConfig:ad,prerenderManifest:$,waitUntil:d.waitUntil});if(_&&b.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate"),K.isDev&&b.setHeader("Cache-Control","no-store, must-revalidate"),!n){if(aA)throw Object.defineProperty(Error("invariant: cache entry required but not generated"),"__NEXT_ERROR_CODE",{value:"E62",enumerable:!1,configurable:!0});return null}if((null==(f=n.value)?void 0:f.kind)!==v.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant app-page handler received invalid cache entry ${null==(i=n.value)?void 0:i.kind}`),"__NEXT_ERROR_CODE",{value:"E707",enumerable:!1,configurable:!0});let p="string"==typeof n.value.postponed;ak&&!av&&(!p||ao)&&(N||b.setHeader("x-nextjs-cache",ah?"REVALIDATED":n.isMiss?"MISS":n.isStale?"STALE":"HIT"),b.setHeader(t.NEXT_IS_PRERENDER_HEADER,"1"));let{value:q}=n;if(au)l={revalidate:0,expire:void 0};else if(N&&ap&&!ao&&ar)l={revalidate:0,expire:void 0};else if(!K.isDev)if(_)l={revalidate:0,expire:void 0};else if(ak){if(n.cacheControl)if("number"==typeof n.cacheControl.revalidate){if(n.cacheControl.revalidate<1)throw Object.defineProperty(Error(`Invalid revalidate configuration provided: ${n.cacheControl.revalidate} < 1`),"__NEXT_ERROR_CODE",{value:"E22",enumerable:!1,configurable:!0});l={revalidate:n.cacheControl.revalidate,expire:(null==(j=n.cacheControl)?void 0:j.expire)??ad.expireTime}}else l={revalidate:y.CACHE_ONE_YEAR,expire:void 0}}else b.getHeader("Cache-Control")||(l={revalidate:0,expire:void 0});if(n.cacheControl=l,"string"==typeof aw&&(null==q?void 0:q.kind)===v.CachedRouteKind.APP_PAGE&&q.segmentData){b.setHeader(t.NEXT_DID_POSTPONE_HEADER,"2");let c=null==(k=q.headers)?void 0:k[y.NEXT_CACHE_TAGS_HEADER];N&&ak&&c&&"string"==typeof c&&b.setHeader(y.NEXT_CACHE_TAGS_HEADER,c);let d=q.segmentData.get(aw);return void 0!==d?(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.fromStatic(d,t.RSC_CONTENT_TYPE_HEADER),cacheControl:n.cacheControl}):(b.statusCode=204,(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.EMPTY,cacheControl:n.cacheControl}))}let r=(0,h.getRequestMeta)(a,"onCacheEntry");if(r&&await r({...n,value:{...n.value,kind:"PAGE"}},{url:(0,h.getRequestMeta)(a,"initURL")}))return null;if(p&&au)throw Object.defineProperty(Error("Invariant: postponed state should not be present on a resume request"),"__NEXT_ERROR_CODE",{value:"E396",enumerable:!1,configurable:!0});if(q.headers){let a={...q.headers};for(let[c,d]of(N&&ak||delete a[y.NEXT_CACHE_TAGS_HEADER],Object.entries(a)))if(void 0!==d)if(Array.isArray(d))for(let a of d)b.appendHeader(c,a);else"number"==typeof d&&(d=d.toString()),b.appendHeader(c,d)}let s=null==(g=q.headers)?void 0:g[y.NEXT_CACHE_TAGS_HEADER];if(N&&ak&&s&&"string"==typeof s&&b.setHeader(y.NEXT_CACHE_TAGS_HEADER,s),!q.status||ap&&ar||(b.statusCode=q.status),!N&&q.status&&F.RedirectStatusCode[q.status]&&ap&&(b.statusCode=200),p&&b.setHeader(t.NEXT_DID_POSTPONE_HEADER,"1"),ap&&!_){if(void 0===q.rscData){if(q.postponed)throw Object.defineProperty(Error("Invariant: Expected postponed to be undefined"),"__NEXT_ERROR_CODE",{value:"E372",enumerable:!1,configurable:!0});return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:q.html,cacheControl:av?{revalidate:0,expire:void 0}:n.cacheControl})}return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.fromStatic(q.rscData,t.RSC_CONTENT_TYPE_HEADER),cacheControl:n.cacheControl})}let u=q.html;if(!p||N||ap)return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:n.cacheControl});if(as)return u.push(new ReadableStream({start(a){a.enqueue(z.ENCODED_TAGS.CLOSED.BODY_AND_HTML),a.close()}})),(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:{revalidate:0,expire:void 0}});let w=new TransformStream;return u.push(w.readable),m({span:c,postponed:q.postponed,fallbackRouteParams:null}).then(async a=>{var b,c;if(!a)throw Object.defineProperty(Error("Invariant: expected a result to be returned"),"__NEXT_ERROR_CODE",{value:"E463",enumerable:!1,configurable:!0});if((null==(b=a.value)?void 0:b.kind)!==v.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant: expected a page response, got ${null==(c=a.value)?void 0:c.kind}`),"__NEXT_ERROR_CODE",{value:"E305",enumerable:!1,configurable:!0});await a.value.html.pipeTo(w.writable)}).catch(a=>{w.writable.abort(a).catch(a=>{console.error("couldn't abort transformer",a)})}),(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:{revalidate:0,expire:void 0}})};if(!aF)return await aE.withPropagatedContext(a.headers,()=>aE.trace(i.BaseServerSpan.handleRequest,{spanName:`${aD} ${a.url}`,kind:g.SpanKind.SERVER,attributes:{"http.method":aD,"http.target":a.url}},p));await p(aF)}catch(b){throw b instanceof B.NoFallbackError||await K.onRequestError(a,b,{routerKind:"App Router",routePath:G,routeType:"render",revalidateReason:(0,f.c)({isRevalidate:ak,isOnDemandRevalidate:ah})},ac),b}}},80585:(a,b,c)=>{Promise.resolve().then(c.bind(c,17))},84557:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>g});var d=c(21124);c(38301);var e=c(3991),f=c.n(e);function g({error:a,reset:b}){return(0,d.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center px-4",children:(0,d.jsx)("div",{className:"max-w-md w-full text-center",children:(0,d.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm p-8",children:[(0,d.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gray-100 flex items-center justify-center",children:(0,d.jsxs)("svg",{className:"w-8 h-8 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),(0,d.jsx)("h1",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Settings unavailable"}),(0,d.jsx)("p",{className:"text-gray-600 mb-6",children:"We couldn't load your settings. Please try again."}),(0,d.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,d.jsx)("button",{onClick:()=>b(),className:"w-full py-2.5 px-4 bg-primary-600 hover:bg-primary-700 text-white font-medium rounded-lg transition-colors",children:"Try again"}),(0,d.jsx)(f(),{href:"/dashboard",className:"w-full py-2.5 px-4 border border-gray-300 text-gray-700 hover:bg-gray-50 font-medium rounded-lg transition-colors block",children:"Back to Dashboard"})]}),a.digest&&(0,d.jsxs)("p",{className:"mt-4 text-xs text-gray-400",children:["Error ID: ",a.digest]})]})})})}},86439:a=>{"use strict";a.exports=require("next/dist/shared/lib/no-fallback-error.external")},86930:(a,b,c)=>{Promise.resolve().then(c.bind(c,84557))},90313:(a,b,c)=>{Promise.resolve().then(c.bind(c,45144))},92179:(a,b,c)=>{"use strict";c.d(b,{J:()=>f,e:()=>e});var d=c(38301);function e(a){let[b,c]=(0,d.useState)({role:null,plan:null,loading:!0,error:null});return b}function f(a,b,c){let{role:d,plan:f,loading:g}=e(a);return!g&&!!d&&!!f&&(["owner","admin"].includes(d)||"read"===c&&["operator","analyst","viewer"].includes(d)||"execute"===c&&"operator"===d)&&("free"!==f||"call"===b)}c(55108)}};var b=require("../../webpack-runtime.js");b.C(a);var c=b.X(0,[4996,8298,943,6084,464,367,4417,7613],()=>b(b.s=68520));module.exports=c})();