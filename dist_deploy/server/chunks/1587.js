"use strict";exports.id=1587,exports.ids=[1587],exports.modules={7629:(a,b,c)=>{c.d(b,{p:()=>e});var d=c(21124);let e=(0,c(38301).forwardRef)(({className:a="",label:b,error:c,hint:e,id:f,...g},h)=>{let i=f||`input-${Math.random().toString(36).substring(2,11)}`,j=`
      w-full h-10 px-3
      bg-white border rounded-md
      text-gray-900 placeholder-gray-400
      transition-colors duration-150
      focus:outline-none focus:ring-2 focus:ring-offset-0
      disabled:bg-gray-50 disabled:text-gray-500 disabled:cursor-not-allowed
      ${c?"border-error focus:ring-error focus:border-error":"border-gray-300 focus:ring-primary-600 focus:border-primary-600"}
    `.replace(/\s+/g," ").trim();return(0,d.jsxs)("div",{className:"w-full",children:[b&&(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",htmlFor:i,children:b}),(0,d.jsx)("input",{ref:h,id:i,className:`${j} ${a}`,"aria-invalid":c?"true":void 0,"aria-describedby":c?`${i}-error`:e?`${i}-hint`:void 0,...g}),e&&!c&&(0,d.jsx)("p",{id:`${i}-hint`,className:"mt-1.5 text-sm text-gray-500",children:e}),c&&(0,d.jsx)("p",{id:`${i}-error`,className:"mt-1.5 text-sm text-error",role:"alert",children:c})]})});e.displayName="Input"},19217:(a,b,c)=>{c.d(b,{$:()=>h});var d=c(21124),e=c(38301),f=c.n(e),g=c(96425);let h=f().forwardRef(({children:a,className:b="",variant:c="primary",size:e="md",loading:f=!1,disabled:h,asChild:i=!1,...j},k)=>{let l=i?g.DX:"button",m=`
    inline-flex items-center justify-center 
    font-medium rounded-md
    transition-colors duration-150
    focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2
    disabled:opacity-50 disabled:cursor-not-allowed
  `.replace(/\s+/g," ").trim();return(0,d.jsx)(l,{ref:k,type:i?void 0:"button",className:`${m} ${{default:"bg-[#1E3A5F] text-white hover:bg-[#15294A] focus-visible:ring-[#1E3A5F]",primary:"bg-[#1E3A5F] text-white hover:bg-[#15294A] focus-visible:ring-[#1E3A5F]",secondary:"bg-gray-100 text-gray-700 hover:bg-gray-200 focus-visible:ring-gray-500",outline:"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50 focus-visible:ring-[#1E3A5F]",ghost:"bg-transparent text-gray-600 hover:bg-gray-100 hover:text-gray-900 focus-visible:ring-gray-500",destructive:"bg-[#DC2626] text-white hover:bg-[#B91C1C] focus-visible:ring-[#DC2626]"}[c]} ${{sm:"h-9 px-3 text-sm",md:"h-10 px-4 text-sm",lg:"h-12 px-6 text-base"}[e]} ${b}`,disabled:h||f,...j,children:f?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("span",{className:"loading-spinner mr-2","aria-hidden":"true"}),(0,d.jsx)("span",{children:"Loading..."})]}):a})});h.displayName="Button"},51587:(a,b,c)=>{c.d(b,{L:()=>h});var d=c(21124),e=c(38301),f=c(19217),g=c(7629);function h({isOpen:a,onClose:b,onSuccess:c,defaultPhone:h}){let i=(0,e.useRef)(null);(0,e.useRef)(null);let j=(0,e.useRef)(null),[k,l]=(0,e.useState)(!1),[m,n]=(0,e.useState)(null),[o,p]=(0,e.useState)(""),[q,r]=(0,e.useState)(""),[s,t]=(0,e.useState)(""),[u,v]=(0,e.useState)(""),[w,x]=(0,e.useState)(h||""),[y,z]=(0,e.useState)(""),[A,B]=(0,e.useState)(""),[C,D]=(0,e.useState)(""),[E,F]=(0,e.useState)(30),[G,H]=(0,e.useState)(""),I=(0,e.useCallback)(a=>{if("Escape"===a.key&&(a.preventDefault(),b()),"Tab"===a.key&&i.current){let b=i.current.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),c=b[0],d=b[b.length-1];a.shiftKey&&document.activeElement===c?(a.preventDefault(),d?.focus()):a.shiftKey||document.activeElement!==d||(a.preventDefault(),c?.focus())}},[b]),J=async a=>{a.preventDefault(),l(!0),n(null);try{let a=new Date(`${A}T${C}`);if(isNaN(a.getTime()))throw Error("Invalid date/time");let d=new Date(a.getTime()+6e4*E),e=await fetch("/api/bookings",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({title:o||`Call with ${s||w}`,description:q,start_time:a.toISOString(),end_time:d.toISOString(),duration_minutes:E,attendee_name:s,attendee_email:u,attendee_phone:w,from_number:y||void 0,notes:G})}),f=await e.json();if(!e.ok||!f.success)throw Error(f.error?.message||f.error||"Failed to create booking");p(""),r(""),t(""),v(""),x(h||""),z(""),B(""),D(""),F(30),H(""),n(null),c?.(f.booking),b()}catch(a){n(a.message||"An error occurred")}finally{l(!1)}};if(!a)return null;let K=new Date,L=`${K.getFullYear()}-${String(K.getMonth()+1).padStart(2,"0")}-${String(K.getDate()).padStart(2,"0")}`;return(0,d.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",onKeyDown:I,children:[(0,d.jsx)("div",{className:"absolute inset-0 bg-black/50",onClick:b,"aria-hidden":"true"}),(0,d.jsx)("div",{ref:i,role:"dialog","aria-modal":"true","aria-labelledby":"booking-modal-title",className:"relative bg-white rounded-lg shadow-lg w-full max-w-md mx-4 max-h-[90vh] overflow-y-auto",children:(0,d.jsxs)("div",{className:"p-6",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,d.jsx)("h2",{id:"booking-modal-title",className:"text-lg font-semibold text-gray-900",children:"Schedule Call"}),(0,d.jsx)("button",{type:"button",onClick:b,"aria-label":"Close",className:"text-gray-400 hover:text-gray-600 transition-colors p-1 rounded focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary-600",children:(0,d.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),m&&(0,d.jsx)("div",{role:"alert",className:"mb-4 p-3 bg-error-light text-error text-sm rounded-md",children:m}),(0,d.jsxs)("form",{onSubmit:J,className:"space-y-4",children:[(0,d.jsx)(g.p,{ref:j,label:"Title",placeholder:"e.g., Follow-up Call",value:o,onChange:a=>p(a.target.value)}),(0,d.jsx)(g.p,{label:"Contact Name",placeholder:"John Doe",value:s,onChange:a=>t(a.target.value)}),(0,d.jsx)(g.p,{label:"Your Phone (optional)",type:"tel",placeholder:"+1234567890",value:y,onChange:a=>z(a.target.value),hint:"For bridge calls - connects you first"}),(0,d.jsx)(g.p,{label:"Contact Phone",type:"tel",placeholder:"+1234567890",value:w,onChange:a=>x(a.target.value),required:!0}),(0,d.jsx)(g.p,{label:"Email",type:"email",placeholder:"john@example.com",value:u,onChange:a=>v(a.target.value)}),(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Date"}),(0,d.jsx)("input",{type:"date",value:A,onChange:a=>B(a.target.value),min:L,required:!0,className:"w-full h-10 px-3 bg-white border border-gray-300 rounded-md text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary-600"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Time"}),(0,d.jsx)("input",{type:"time",value:C,onChange:a=>D(a.target.value),required:!0,className:"w-full h-10 px-3 bg-white border border-gray-300 rounded-md text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary-600"})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Duration"}),(0,d.jsxs)("select",{value:E,onChange:a=>F(parseInt(a.target.value,10)),className:"w-full h-10 px-3 bg-white border border-gray-300 rounded-md text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary-600",children:[(0,d.jsx)("option",{value:15,children:"15 minutes"}),(0,d.jsx)("option",{value:30,children:"30 minutes"}),(0,d.jsx)("option",{value:45,children:"45 minutes"}),(0,d.jsx)("option",{value:60,children:"1 hour"})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Notes"}),(0,d.jsx)("textarea",{placeholder:"Internal notes...",value:G,onChange:a=>H(a.target.value),rows:2,className:"w-full p-3 bg-white border border-gray-300 rounded-md text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary-600"})]}),(0,d.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,d.jsx)(f.$,{type:"button",variant:"outline",onClick:b,className:"flex-1",disabled:k,children:"Cancel"}),(0,d.jsx)(f.$,{type:"submit",variant:"primary",disabled:k||!w||!A||!C,className:"flex-1",loading:k,children:"Schedule"})]})]})]})})]})}}};