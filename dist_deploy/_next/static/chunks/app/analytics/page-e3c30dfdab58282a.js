(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1745],{2479:(e,t,a)=>{"use strict";a.d(t,{v:()=>r});class s{shouldLog(e){return!this.isTest&&(!!this.isDevelopment||"warn"===e||"error"===e)}formatMessage(e,t,a){let s=new Date().toISOString(),r=a?" ".concat(JSON.stringify(a)):"";return"[".concat(s,"] [").concat(e.toUpperCase(),"] ").concat(t).concat(r)}debug(e,t){this.shouldLog("debug")&&console.log(this.formatMessage("debug",e,t))}info(e,t){this.shouldLog("info")&&console.log(this.formatMessage("info",e,t))}warn(e,t){this.shouldLog("warn")&&console.warn(this.formatMessage("warn",e,t))}error(e,t,a){if(this.shouldLog("error")){let s=t instanceof Error?{name:t.name,message:t.message,stack:t.stack,...a}:{error:t,...a};console.error(this.formatMessage("error",e,s))}}apiRequest(e,t,a){this.info("API Request: ".concat(e," ").concat(t),a)}apiResponse(e,t,a,s){let r={statusCode:a,duration:s};a>=500?this.error("API Response: ".concat(e," ").concat(t),void 0,r):a>=400?this.warn("API Response: ".concat(e," ").concat(t),r):this.info("API Response: ".concat(e," ").concat(t),r)}dbQuery(e,t){this.debug("Database query",{query:e.substring(0,100),params:t})}externalCall(e,t,a){this.info("External call: ".concat(e),{endpoint:t,...a})}constructor(){this.isDevelopment=!1,this.isTest=!1}}let r=new s},2521:(e,t,a)=>{"use strict";a.d(t,{z:()=>n});var s=a(95155);a(12115);let r={primary:"bg-primary-600",blue:"bg-primary-600",green:"bg-success",orange:"bg-warning",red:"bg-error"};function n(e){let{value:t,label:a,color:n="primary",showValue:l=!1,className:i=""}=e,o=Math.max(0,Math.min(100,t)),c=r[n];return(0,s.jsxs)("div",{className:i,children:[a&&(0,s.jsxs)("div",{className:"flex justify-between text-xs mb-1",children:[(0,s.jsx)("span",{className:"text-gray-500",id:"progress-label-".concat(a.replace(/\s+/g,"-").toLowerCase()),children:a}),l&&(0,s.jsxs)("span",{className:"text-gray-900 font-medium tabular-nums",children:[Math.round(o),"%"]})]}),(0,s.jsx)("div",{className:"h-2 bg-gray-100 rounded-full overflow-hidden",role:"progressbar","aria-valuenow":Math.round(o),"aria-valuemin":0,"aria-valuemax":100,"aria-label":a||"Progress: ".concat(Math.round(o),"%"),children:(0,s.jsx)("div",{className:"h-full ".concat(c," transition-all duration-300 ease-out"),style:{width:"".concat(o,"%")}})})]})}},9676:(e,t,a)=>{Promise.resolve().then(a.bind(a,73978))},32473:(e,t,a)=>{"use strict";a.d(t,{f:()=>r});var s=a(95155);function r(e){let{label:t,value:a,change:r,trend:n,className:l=""}=e,i="up"===n?"↑":"down"===n?"↓":null;return(0,s.jsxs)("div",{className:"bg-white border border-gray-200 rounded-md p-5 hover:border-gray-300 transition-colors ".concat(l),children:[(0,s.jsx)("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:t}),(0,s.jsx)("p",{className:"text-3xl font-semibold text-gray-900 tabular-nums mb-1",children:a}),r&&(0,s.jsxs)("p",{className:"text-sm ".concat("up"===n?"text-success":"down"===n?"text-error":"text-gray-500"),children:[i&&(0,s.jsx)("span",{className:"mr-1",children:i}),r]})]})}a(12115)},63273:(e,t,a)=>{"use strict";a.d(t,{A:()=>c,P:()=>o});var s=a(95155),r=a(12115),n=a(32473),l=a(67812),i=a(2479);function o(e){var t,a;let{organizationId:o}=e,[c,d]=(0,r.useState)(null),[m,u]=(0,r.useState)(!0),[x,g]=(0,r.useState)(null);if((0,r.useEffect)(()=>{if(!o)return void u(!1);let e=!0;return u(!0),g(null),fetch("/api/analytics/surveys",{credentials:"include"}).then(e=>e.json()).then(t=>{if(e){if((null==t?void 0:t.success)===!1){var a;g((null==t||null==(a=t.error)?void 0:a.message)||"Unable to load survey analytics"),d(null);return}d(t.metrics||null)}}).catch(t=>{e&&(i.v.error("SurveyAnalyticsWidget: fetch failed",t),g("Unable to load survey analytics"))}).finally(()=>{e&&u(!1)}),()=>{e=!1}},[o]),m)return(0,s.jsxs)("section",{className:"bg-white border border-gray-200 rounded-md p-4",children:[(0,s.jsx)("div",{className:"h-4 w-32 bg-gray-100 rounded mb-4 animate-pulse"}),(0,s.jsx)("div",{className:"grid grid-cols-3 gap-4",children:[1,2,3].map(e=>(0,s.jsx)("div",{className:"h-20 bg-gray-100 rounded animate-pulse"},e))})]});if(x)return(0,s.jsx)("section",{className:"bg-white border border-gray-200 rounded-md p-4",children:(0,s.jsx)("p",{className:"text-sm text-gray-500",children:x})});let h=null!=(a=null==c?void 0:c.total_surveys)?a:0,p=(null==c?void 0:c.avg_score)!==null&&(null==c?void 0:c.avg_score)!==void 0?c.avg_score.toFixed(1):"—",b=(null==c?void 0:c.response_rate)!==null&&(null==c?void 0:c.response_rate)!==void 0?"".concat(c.response_rate.toFixed(1),"%"):"—",y=(null==c||null==(t=c.trend_7d)?void 0:t.reduce((e,t)=>e+t.count,0))||0;return(0,s.jsxs)("section",{className:"bg-white border border-gray-200 rounded-md p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-gray-900",children:"Survey Analytics"}),(0,s.jsx)(l.E,{variant:h>0?"success":"default",children:h>0?"Active":"No data"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[(0,s.jsx)(n.f,{label:"Surveys",value:h}),(0,s.jsx)(n.f,{label:"Avg Score",value:p}),(0,s.jsx)(n.f,{label:"Response Rate",value:b})]}),(0,s.jsxs)("p",{className:"text-xs text-gray-500 mt-3",children:["Last 7 days: ",y," completed survey",1===y?"":"s"]})]})}let c=o},67812:(e,t,a)=>{"use strict";a.d(t,{E:()=>r});var s=a(95155);function r(e){let{children:t,className:a="",variant:r="default",...n}=e;return(0,s.jsx)("span",{className:"".concat("inline-flex items-center px-2 py-0.5 rounded text-xs font-medium"," ").concat({default:"bg-gray-100 text-gray-700",secondary:"bg-gray-100 text-gray-700",success:"bg-success-light text-green-700",warning:"bg-warning-light text-amber-700",error:"bg-error-light text-red-700",info:"bg-info-light text-blue-700"}[r]," ").concat(a),...n,children:t})}a(12115)},73978:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>C});var s=a(95155),r=a(12115),n=a(20063),l=a(36489);function i(e){let{startDate:t,endDate:a,onChange:n}=e,[l,i]=(0,r.useState)(t.slice(0,10)),[o,c]=(0,r.useState)(a.slice(0,10));return(0,s.jsxs)("div",{className:"bg-white border border-gray-200 rounded-md p-4",children:[(0,s.jsxs)("div",{className:"flex flex-wrap gap-4 items-end",children:[(0,s.jsxs)("div",{className:"flex-1 min-w-[200px]",children:[(0,s.jsx)("label",{htmlFor:"start-date",className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),(0,s.jsx)("input",{id:"start-date",type:"date",value:l,onChange:e=>i(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"})]}),(0,s.jsxs)("div",{className:"flex-1 min-w-[200px]",children:[(0,s.jsx)("label",{htmlFor:"end-date",className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),(0,s.jsx)("input",{id:"end-date",type:"date",value:o,onChange:e=>c(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"})]}),(0,s.jsx)("button",{onClick:()=>{let e=new Date(l),t=new Date(o);n(e.toISOString(),t.toISOString())},className:"px-4 py-2 bg-primary text-white rounded-md text-sm font-medium hover:bg-primary-dark transition-colors",children:"Apply"})]}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2 mt-3",children:[{label:"Last 7 days",days:7},{label:"Last 30 days",days:30},{label:"Last 90 days",days:90},{label:"Last 365 days",days:365}].map(e=>(0,s.jsx)("button",{onClick:()=>(e=>{let t=new Date,a=new Date;a.setDate(t.getDate()-e),i(a.toISOString().slice(0,10)),c(t.toISOString().slice(0,10)),n(a.toISOString(),t.toISOString())})(e.days),className:"px-3 py-1.5 text-sm bg-gray-100 text-gray-700 rounded hover:bg-gray-200 transition-colors",children:e.label},e.label))})]})}var o=a(2479);function c(e){let{type:t,startDate:a,endDate:n}=e,[l,i]=(0,r.useState)(!1),[c,d]=(0,r.useState)(null),m=async e=>{i(!0),d(null);try{let r=await fetch("/api/analytics/export?type=".concat(t,"&format=").concat(e,"&startDate=").concat(a,"&endDate=").concat(n),{credentials:"include"});if(!r.ok){var s;let e=await r.json().catch(()=>({error:{message:"Export failed"}}));throw Error((null==(s=e.error)?void 0:s.message)||"Export failed")}let l=await r.blob(),i=window.URL.createObjectURL(l),o=document.createElement("a");o.href=i,o.download="".concat(t,"-export-").concat(new Date().toISOString().slice(0,10),".").concat(e),document.body.appendChild(o),o.click(),window.URL.revokeObjectURL(i),document.body.removeChild(o)}catch(a){o.v.error("Export failed",a,{type:t,format:e}),d(a.message||"Export failed. Please try again.")}finally{i(!1)}};return(0,s.jsxs)("div",{className:"flex flex-col items-end gap-2",children:[(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>m("csv"),disabled:l,className:"px-3 py-1.5 text-sm bg-white border border-gray-300 text-gray-700 rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:l?"Exporting...":"Export CSV"}),(0,s.jsx)("button",{onClick:()=>m("json"),disabled:l,className:"px-3 py-1.5 text-sm bg-white border border-gray-300 text-gray-700 rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:l?"Exporting...":"Export JSON"})]}),c&&(0,s.jsx)("p",{className:"text-xs text-error",children:c})]})}var d=a(26265),m=a(80019),u=a(68425),x=a(47734),g=a(73697),h=a(33420),p=a(37665),b=a(57095);function y(e){let{data:t}=e;return t&&0!==t.length?(0,s.jsxs)("div",{className:"bg-white border border-gray-200 rounded-md p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Call Volume"}),(0,s.jsx)(d.u,{width:"100%",height:300,children:(0,s.jsxs)(m.b,{data:t,children:[(0,s.jsx)(u.d,{strokeDasharray:"3 3",stroke:"#E5E7EB"}),(0,s.jsx)(x.W,{dataKey:"date",tick:{fontSize:12,fill:"#6B7280"},tickFormatter:e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),(0,s.jsx)(g.h,{tick:{fontSize:12,fill:"#6B7280"},allowDecimals:!1}),(0,s.jsx)(h.m,{contentStyle:{backgroundColor:"#FFF",border:"1px solid #E5E7EB",borderRadius:"6px",fontSize:"12px",padding:"8px 12px"},labelFormatter:e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),(0,s.jsx)(p.s,{wrapperStyle:{fontSize:"12px",paddingTop:"16px"},iconType:"line"}),(0,s.jsx)(b.N1,{type:"monotone",dataKey:"total",stroke:"#1E3A5F",strokeWidth:2,name:"Total Calls",dot:{fill:"#1E3A5F",r:3},activeDot:{r:5}}),(0,s.jsx)(b.N1,{type:"monotone",dataKey:"completed",stroke:"#059669",strokeWidth:2,name:"Completed",dot:{fill:"#059669",r:3},activeDot:{r:5}}),(0,s.jsx)(b.N1,{type:"monotone",dataKey:"failed",stroke:"#DC2626",strokeWidth:2,name:"Failed",dot:{fill:"#DC2626",r:3},activeDot:{r:5}})]})})]}):(0,s.jsxs)("div",{className:"bg-white border border-gray-200 rounded-md p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Call Volume"}),(0,s.jsx)("div",{className:"h-[300px] flex items-center justify-center",children:(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"No data available"})})]})}var f=a(73850),v=a(94621);function j(e){let{data:t}=e;return t&&0!==t.length?(0,s.jsxs)("div",{className:"bg-white border border-gray-200 rounded-md p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Sentiment Trends"}),(0,s.jsx)(d.u,{width:"100%",height:300,children:(0,s.jsxs)(f.Q,{data:t,children:[(0,s.jsx)(u.d,{strokeDasharray:"3 3",stroke:"#E5E7EB"}),(0,s.jsx)(x.W,{dataKey:"date",tick:{fontSize:12,fill:"#6B7280"},tickFormatter:e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),(0,s.jsx)(g.h,{tick:{fontSize:12,fill:"#6B7280"},domain:[0,100],tickFormatter:e=>"".concat(e,"%")}),(0,s.jsx)(h.m,{contentStyle:{backgroundColor:"#FFF",border:"1px solid #E5E7EB",borderRadius:"6px",fontSize:"12px",padding:"8px 12px"},labelFormatter:e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),formatter:e=>void 0!==e?"".concat(e.toFixed(1),"%"):""}),(0,s.jsx)(p.s,{wrapperStyle:{fontSize:"12px",paddingTop:"16px"}}),(0,s.jsx)(v.Gk,{type:"monotone",dataKey:"positive_rate",stackId:"1",stroke:"#059669",fill:"#D1FAE5",name:"Positive"}),(0,s.jsx)(v.Gk,{type:"monotone",dataKey:"neutral_rate",stackId:"1",stroke:"#2563EB",fill:"#DBEAFE",name:"Neutral"}),(0,s.jsx)(v.Gk,{type:"monotone",dataKey:"negative_rate",stackId:"1",stroke:"#DC2626",fill:"#FEE2E2",name:"Negative"})]})})]}):(0,s.jsxs)("div",{className:"bg-white border border-gray-200 rounded-md p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Sentiment Trends"}),(0,s.jsx)("div",{className:"h-[300px] flex items-center justify-center",children:(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"No sentiment data available"})})]})}var N=a(98128),w=a(30244);function S(e){let{data:t}=e;if(!t||0===t.length)return(0,s.jsxs)("div",{className:"bg-white border border-gray-200 rounded-md p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Average Call Duration"}),(0,s.jsx)("div",{className:"h-[300px] flex items-center justify-center",children:(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"No duration data available"})})]});let a=t.map(e=>({date:e.date,duration_minutes:Math.round(e.avg_duration/60*10)/10}));return(0,s.jsxs)("div",{className:"bg-white border border-gray-200 rounded-md p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Average Call Duration"}),(0,s.jsx)(d.u,{width:"100%",height:300,children:(0,s.jsxs)(N.E,{data:a,children:[(0,s.jsx)(u.d,{strokeDasharray:"3 3",stroke:"#E5E7EB"}),(0,s.jsx)(x.W,{dataKey:"date",tick:{fontSize:12,fill:"#6B7280"},tickFormatter:e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),(0,s.jsx)(g.h,{tick:{fontSize:12,fill:"#6B7280"},label:{value:"Minutes",angle:-90,position:"insideLeft",style:{fontSize:12,fill:"#6B7280"}}}),(0,s.jsx)(h.m,{contentStyle:{backgroundColor:"#FFF",border:"1px solid #E5E7EB",borderRadius:"6px",fontSize:"12px",padding:"8px 12px"},labelFormatter:e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),formatter:e=>void 0!==e?["".concat(e," min"),"Avg Duration"]:["",""]}),(0,s.jsx)(w.yP,{dataKey:"duration_minutes",fill:"#1E3A5F",radius:[4,4,0,0],name:"Avg Duration (min)"})]})})]})}var _=a(32473),D=a(2521);function k(e){let{metrics:t}=e,a=Math.max(t.feature_usage.voice_cloning,t.feature_usage.surveys,t.feature_usage.scorecards,100);return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,s.jsx)(_.f,{label:"Transcription Rate",value:"".concat(t.transcription_rate,"%"),trend:t.transcription_rate>=90?"up":t.transcription_rate>=70?"neutral":"down"}),(0,s.jsx)(_.f,{label:"Translation Rate",value:"".concat(t.translation_rate,"%"),trend:t.translation_rate>=50?"up":"neutral"}),(0,s.jsx)(_.f,{label:"Avg Transcription Time",value:"".concat(Math.round(t.avg_transcription_time_seconds),"s"),trend:t.avg_transcription_time_seconds<=30?"up":"neutral"}),(0,s.jsx)(_.f,{label:"Webhooks Sent",value:t.feature_usage.webhooks_sent})]}),(0,s.jsxs)("div",{className:"bg-white border border-gray-200 rounded-md p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Feature Usage"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex justify-between text-sm mb-2",children:[(0,s.jsx)("span",{className:"text-gray-700 font-medium",children:"Voice Cloning"}),(0,s.jsxs)("span",{className:"text-gray-900 font-semibold",children:[t.feature_usage.voice_cloning," uses"]})]}),(0,s.jsx)(D.z,{label:"",value:t.feature_usage.voice_cloning/a*100,color:"blue",showValue:!1})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex justify-between text-sm mb-2",children:[(0,s.jsx)("span",{className:"text-gray-700 font-medium",children:"Surveys"}),(0,s.jsxs)("span",{className:"text-gray-900 font-semibold",children:[t.feature_usage.surveys," surveys"]})]}),(0,s.jsx)(D.z,{label:"",value:t.feature_usage.surveys/a*100,color:"green",showValue:!1})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex justify-between text-sm mb-2",children:[(0,s.jsx)("span",{className:"text-gray-700 font-medium",children:"Scorecards"}),(0,s.jsxs)("span",{className:"text-gray-900 font-semibold",children:[t.feature_usage.scorecards," scored"]})]}),(0,s.jsx)(D.z,{label:"",value:t.feature_usage.scorecards/a*100,color:"orange",showValue:!1})]})]})]}),(0,s.jsxs)("div",{className:"bg-white border border-gray-200 rounded-md p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"System Health"}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(t.transcription_rate>=90?"bg-success":t.transcription_rate>=70?"bg-warning":"bg-error")}),(0,s.jsx)("span",{className:"text-sm text-gray-700",children:t.transcription_rate>=90?"All systems operational":t.transcription_rate>=70?"Minor performance issues":"Attention required"})]}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"Based on transcription success rate and processing times"})]})]})}var E=a(63273);function C(){let e=(0,n.useRouter)(),[t,a]=(0,r.useState)(!0),[d,m]=(0,r.useState)(null),[u,x]=(0,r.useState)("overview"),[g,h]=(0,r.useState)(()=>{let e=new Date;return e.setDate(e.getDate()-30),e.toISOString()}),[p,b]=(0,r.useState)(new Date().toISOString()),[f,v]=(0,r.useState)(null),[N,w]=(0,r.useState)(null),[D,C]=(0,r.useState)(null),[F,A]=(0,r.useState)(null);return((0,r.useEffect)(()=>{!async function(){try{var t;if(!await (0,l.getSession)())return void e.push("/signin?callbackUrl=/analytics");let s=await fetch("/api/organizations/current",{credentials:"include"}),r=await s.json();if(!(null==(t=r.organization)?void 0:t.id)){A("No organization found"),a(!1);return}m(r.organization.id),a(!1)}catch(e){o.v.error("Failed to check authentication",e),A("Authentication failed"),a(!1)}}()},[e]),(0,r.useEffect)(()=>{d&&e();async function e(){a(!0),A(null);try{let[e,t,a]=await Promise.all([fetch("/api/analytics/calls?startDate=".concat(g,"&endDate=").concat(p),{credentials:"include"}),fetch("/api/analytics/sentiment-trends?startDate=".concat(g,"&endDate=").concat(p),{credentials:"include"}),fetch("/api/analytics/performance",{credentials:"include"})]),[s,r,n]=await Promise.all([e.json(),t.json(),a.json()]);s.success&&v(s.metrics),r.success&&w(r.trends),n.success&&C(n.metrics)}catch(e){o.v.error("Failed to fetch analytics:",e),A("Failed to load analytics data")}finally{a(!1)}}},[d,g,p]),t)?(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:(0,s.jsxs)("div",{className:"animate-pulse space-y-6",children:[(0,s.jsx)("div",{className:"h-10 bg-gray-200 rounded w-1/4"}),(0,s.jsx)("div",{className:"grid grid-cols-4 gap-4",children:[1,2,3,4].map(e=>(0,s.jsx)("div",{className:"h-24 bg-gray-200 rounded"},e))}),(0,s.jsx)("div",{className:"h-80 bg-gray-200 rounded"})]})}):F?(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:(0,s.jsxs)("div",{className:"bg-error-light border border-error text-error rounded-md p-4",children:[(0,s.jsx)("p",{className:"font-medium",children:"Error"}),(0,s.jsx)("p",{className:"text-sm",children:F})]})}):(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-semibold text-gray-900",children:"Analytics"}),(0,s.jsx)("p",{className:"text-gray-600 mt-1",children:"Insights and performance metrics"})]}),(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsx)(i,{startDate:g,endDate:p,onChange:(e,t)=>{h(e),b(t)}})}),(0,s.jsx)("div",{className:"border-b border-gray-200 mb-6",children:(0,s.jsx)("nav",{className:"flex gap-6",role:"tablist",children:[{id:"overview",label:"Overview"},{id:"calls",label:"Calls"},{id:"sentiment",label:"Sentiment"},{id:"performance",label:"Performance"},{id:"surveys",label:"Surveys"}].map(e=>(0,s.jsx)("button",{role:"tab","aria-selected":u===e.id,onClick:()=>x(e.id),className:"pb-3 text-sm font-medium border-b-2 transition-colors ".concat(u===e.id?"border-primary text-primary":"border-transparent text-gray-500 hover:text-gray-700"),children:e.label},e.id))})}),"overview"===u&&f&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,s.jsx)(_.f,{label:"Total Calls",value:f.total_calls,change:"".concat(f.completed_calls," completed"),trend:f.completion_rate>=80?"up":"neutral"}),(0,s.jsx)(_.f,{label:"Completion Rate",value:"".concat(f.completion_rate,"%"),trend:f.completion_rate>=80?"up":f.completion_rate>=60?"neutral":"down"}),(0,s.jsx)(_.f,{label:"Avg Duration",value:"".concat(Math.floor(f.avg_duration_seconds/60),"m ").concat(f.avg_duration_seconds%60,"s")}),(0,s.jsx)(_.f,{label:"Total Minutes",value:f.total_duration_minutes})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsx)(y,{data:f.time_series}),N&&N.time_series.length>0&&(0,s.jsx)(j,{data:N.time_series})]})]}),"calls"===u&&f&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Call Analytics"}),(0,s.jsx)(c,{type:"calls",startDate:g,endDate:p})]}),(0,s.jsx)(y,{data:f.time_series}),(0,s.jsx)(S,{data:f.time_series})]}),"sentiment"===u&&N&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Sentiment Analysis"}),(0,s.jsx)(c,{type:"sentiment",startDate:g,endDate:p})]}),N.time_series.length>0?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,s.jsx)(_.f,{label:"Positive Rate",value:"".concat(N.overall_positive_rate,"%"),trend:"up"}),(0,s.jsx)(_.f,{label:"Neutral Rate",value:"".concat(N.overall_neutral_rate,"%")}),(0,s.jsx)(_.f,{label:"Negative Rate",value:"".concat(N.overall_negative_rate,"%"),trend:N.overall_negative_rate<20?"up":N.overall_negative_rate<40?"neutral":"down"})]}),(0,s.jsx)(j,{data:N.time_series})]}):(0,s.jsxs)("div",{className:"bg-white border border-gray-200 rounded-md p-8 text-center",children:[(0,s.jsx)("p",{className:"text-gray-500",children:"No sentiment data available for this time period"}),(0,s.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"Enable transcription to unlock sentiment analysis"})]})]}),"performance"===u&&D&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Performance Metrics"}),(0,s.jsx)(k,{metrics:D})]}),"surveys"===u&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Survey Analytics"}),(0,s.jsx)(c,{type:"surveys",startDate:g,endDate:p})]}),(0,s.jsx)(E.P,{organizationId:d})]})]})}}},e=>{e.O(0,[6964,1494,8441,1255,7358],()=>e(e.s=9676)),_N_E=e.O()}]);