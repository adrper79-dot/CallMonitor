"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7198],{2479:(e,t,r)=>{r.d(t,{v:()=>n});class a{shouldLog(e){return!this.isTest&&(!!this.isDevelopment||"warn"===e||"error"===e)}formatMessage(e,t,r){let a=new Date().toISOString(),n=r?" ".concat(JSON.stringify(r)):"";return"[".concat(a,"] [").concat(e.toUpperCase(),"] ").concat(t).concat(n)}debug(e,t){this.shouldLog("debug")&&console.log(this.formatMessage("debug",e,t))}info(e,t){this.shouldLog("info")&&console.log(this.formatMessage("info",e,t))}warn(e,t){this.shouldLog("warn")&&console.warn(this.formatMessage("warn",e,t))}error(e,t,r){if(this.shouldLog("error")){let a=t instanceof Error?{name:t.name,message:t.message,stack:t.stack,...r}:{error:t,...r};console.error(this.formatMessage("error",e,a))}}apiRequest(e,t,r){this.info("API Request: ".concat(e," ").concat(t),r)}apiResponse(e,t,r,a){let n={statusCode:r,duration:a};r>=500?this.error("API Response: ".concat(e," ").concat(t),void 0,n):r>=400?this.warn("API Response: ".concat(e," ").concat(t),n):this.info("API Response: ".concat(e," ").concat(t),n)}dbQuery(e,t){this.debug("Database query",{query:e.substring(0,100),params:t})}externalCall(e,t,r){this.info("External call: ".concat(e),{endpoint:t,...r})}constructor(){this.isDevelopment=!1,this.isTest=!1}}let n=new a},33789:(e,t,r)=>{r.d(t,{p:()=>n});var a=r(95155);let n=(0,r(12115).forwardRef)((e,t)=>{let{className:r="",label:n,error:o,hint:s,id:i,...l}=e,c=i||"input-".concat(Math.random().toString(36).substring(2,11)),u="\n      w-full h-10 px-3\n      bg-white border rounded-md\n      text-gray-900 placeholder-gray-400\n      transition-colors duration-150\n      focus:outline-none focus:ring-2 focus:ring-offset-0\n      disabled:bg-gray-50 disabled:text-gray-500 disabled:cursor-not-allowed\n      ".concat(o?"border-error focus:ring-error focus:border-error":"border-gray-300 focus:ring-primary-600 focus:border-primary-600","\n    ").replace(/\s+/g," ").trim();return(0,a.jsxs)("div",{className:"w-full",children:[n&&(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",htmlFor:c,children:n}),(0,a.jsx)("input",{ref:t,id:c,className:"".concat(u," ").concat(r),"aria-invalid":o?"true":void 0,"aria-describedby":o?"".concat(c,"-error"):s?"".concat(c,"-hint"):void 0,...l}),s&&!o&&(0,a.jsx)("p",{id:"".concat(c,"-hint"),className:"mt-1.5 text-sm text-gray-500",children:s}),o&&(0,a.jsx)("p",{id:"".concat(c,"-error"),className:"mt-1.5 text-sm text-error",role:"alert",children:o})]})});n.displayName="Input"},37899:(e,t,r)=>{r.d(t,{L:()=>i});var a=r(95155),n=r(12115),o=r(97003),s=r(33789);function i(e){let{isOpen:t,onClose:r,onSuccess:i,defaultPhone:l}=e,c=(0,n.useRef)(null),u=(0,n.useRef)(null),d=(0,n.useRef)(null),[g,m]=(0,n.useState)(!1),[h,f]=(0,n.useState)(null),[b,p]=(0,n.useState)(""),[x,v]=(0,n.useState)(""),[y,j]=(0,n.useState)(""),[w,N]=(0,n.useState)(""),[S,k]=(0,n.useState)(l||""),[C,D]=(0,n.useState)(""),[E,T]=(0,n.useState)(""),[L,A]=(0,n.useState)(""),[I,M]=(0,n.useState)(30),[F,R]=(0,n.useState)("");(0,n.useEffect)(()=>(t&&(u.current=document.activeElement,setTimeout(()=>{var e;return null==(e=d.current)?void 0:e.focus()},50)),()=>{u.current&&!t&&u.current.focus()}),[t]);let _=(0,n.useCallback)(e=>{if("Escape"===e.key&&(e.preventDefault(),r()),"Tab"===e.key&&c.current){let t=c.current.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),r=t[0],a=t[t.length-1];e.shiftKey&&document.activeElement===r?(e.preventDefault(),null==a||a.focus()):e.shiftKey||document.activeElement!==a||(e.preventDefault(),null==r||r.focus())}},[r]),q=async e=>{e.preventDefault(),m(!0),f(null);try{let e=new Date("".concat(E,"T").concat(L));if(isNaN(e.getTime()))throw Error("Invalid date/time");let a=new Date(e.getTime()+6e4*I),n=await fetch("/api/bookings",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({title:b||"Call with ".concat(y||S),description:x,start_time:e.toISOString(),end_time:a.toISOString(),duration_minutes:I,attendee_name:y,attendee_email:w,attendee_phone:S,from_number:C||void 0,notes:F})}),o=await n.json();if(!n.ok||!o.success){var t;throw Error((null==(t=o.error)?void 0:t.message)||o.error||"Failed to create booking")}p(""),v(""),j(""),N(""),k(l||""),D(""),T(""),A(""),M(30),R(""),f(null),null==i||i(o.booking),r()}catch(e){f(e.message||"An error occurred")}finally{m(!1)}};if(!t)return null;let O=new Date,P="".concat(O.getFullYear(),"-").concat(String(O.getMonth()+1).padStart(2,"0"),"-").concat(String(O.getDate()).padStart(2,"0"));return(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",onKeyDown:_,children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black/50",onClick:r,"aria-hidden":"true"}),(0,a.jsx)("div",{ref:c,role:"dialog","aria-modal":"true","aria-labelledby":"booking-modal-title",className:"relative bg-white rounded-lg shadow-lg w-full max-w-md mx-4 max-h-[90vh] overflow-y-auto",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h2",{id:"booking-modal-title",className:"text-lg font-semibold text-gray-900",children:"Schedule Call"}),(0,a.jsx)("button",{type:"button",onClick:r,"aria-label":"Close",className:"text-gray-400 hover:text-gray-600 transition-colors p-1 rounded focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary-600",children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),h&&(0,a.jsx)("div",{role:"alert",className:"mb-4 p-3 bg-error-light text-error text-sm rounded-md",children:h}),(0,a.jsxs)("form",{onSubmit:q,className:"space-y-4",children:[(0,a.jsx)(s.p,{ref:d,label:"Title",placeholder:"e.g., Follow-up Call",value:b,onChange:e=>p(e.target.value)}),(0,a.jsx)(s.p,{label:"Contact Name",placeholder:"John Doe",value:y,onChange:e=>j(e.target.value)}),(0,a.jsx)(s.p,{label:"Your Phone (optional)",type:"tel",placeholder:"+1234567890",value:C,onChange:e=>D(e.target.value),hint:"For bridge calls - connects you first"}),(0,a.jsx)(s.p,{label:"Contact Phone",type:"tel",placeholder:"+1234567890",value:S,onChange:e=>k(e.target.value),required:!0}),(0,a.jsx)(s.p,{label:"Email",type:"email",placeholder:"john@example.com",value:w,onChange:e=>N(e.target.value)}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Date"}),(0,a.jsx)("input",{type:"date",value:E,onChange:e=>T(e.target.value),min:P,required:!0,className:"w-full h-10 px-3 bg-white border border-gray-300 rounded-md text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary-600"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Time"}),(0,a.jsx)("input",{type:"time",value:L,onChange:e=>A(e.target.value),required:!0,className:"w-full h-10 px-3 bg-white border border-gray-300 rounded-md text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary-600"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Duration"}),(0,a.jsxs)("select",{value:I,onChange:e=>M(parseInt(e.target.value,10)),className:"w-full h-10 px-3 bg-white border border-gray-300 rounded-md text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary-600",children:[(0,a.jsx)("option",{value:15,children:"15 minutes"}),(0,a.jsx)("option",{value:30,children:"30 minutes"}),(0,a.jsx)("option",{value:45,children:"45 minutes"}),(0,a.jsx)("option",{value:60,children:"1 hour"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Notes"}),(0,a.jsx)("textarea",{placeholder:"Internal notes...",value:F,onChange:e=>R(e.target.value),rows:2,className:"w-full p-3 bg-white border border-gray-300 rounded-md text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary-600"})]}),(0,a.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,a.jsx)(o.$,{type:"button",variant:"outline",onClick:r,className:"flex-1",disabled:g,children:"Cancel"}),(0,a.jsx)(o.$,{type:"submit",variant:"primary",disabled:g||!S||!E||!L,className:"flex-1",loading:g,children:"Schedule"})]})]})]})})]})}},48038:(e,t,r)=>{r.d(t,{u:()=>o});var a=r(95155),n=r(12115);function o(e){let t,{date:r,fallback:o="â€”",format:s="short",className:i}=e,[l,c]=(0,n.useState)(!1);if((0,n.useEffect)(()=>{c(!0)},[]),!r)return(0,a.jsx)("span",{className:i,children:o});let u="string"==typeof r?new Date(r):r;if(!l){let e=u.toISOString().slice(0,16).replace("T"," ");return(0,a.jsx)("span",{className:i,suppressHydrationWarning:!0,children:e})}try{switch(s){case"short":t=u.toLocaleString(void 0,{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"});break;case"long":t=u.toLocaleString(void 0,{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit"});break;case"time":t=u.toLocaleTimeString(void 0,{hour:"numeric",minute:"2-digit"});break;case"relative":t=function(e){let t=Math.floor((new Date().getTime()-e.getTime())/1e3),r=Math.floor(t/60),a=Math.floor(r/60),n=Math.floor(a/24);return t<60?"Just now":r<60?"".concat(r,"m ago"):a<24?"".concat(a,"h ago"):n<7?"".concat(n,"d ago"):e.toLocaleDateString(void 0,{month:"short",day:"numeric"})}(u);break;default:t=u.toLocaleString()}}catch(e){t=u.toISOString().slice(0,16).replace("T"," ")}return(0,a.jsx)("span",{className:i,suppressHydrationWarning:!0,children:t})}},97003:(e,t,r)=>{r.d(t,{$:()=>s});var a=r(95155),n=r(12115),o=r(32467);let s=n.forwardRef((e,t)=>{let{children:r,className:n="",variant:s="primary",size:i="md",loading:l=!1,disabled:c,asChild:u=!1,...d}=e,g=u?o.DX:"button",m="\n    inline-flex items-center justify-center \n    font-medium rounded-md\n    transition-colors duration-150\n    focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2\n    disabled:opacity-50 disabled:cursor-not-allowed\n  ".replace(/\s+/g," ").trim();return(0,a.jsx)(g,{ref:t,type:u?void 0:"button",className:"".concat(m," ").concat({default:"bg-[#1E3A5F] text-white hover:bg-[#15294A] focus-visible:ring-[#1E3A5F]",primary:"bg-[#1E3A5F] text-white hover:bg-[#15294A] focus-visible:ring-[#1E3A5F]",secondary:"bg-gray-100 text-gray-700 hover:bg-gray-200 focus-visible:ring-gray-500",outline:"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50 focus-visible:ring-[#1E3A5F]",ghost:"bg-transparent text-gray-600 hover:bg-gray-100 hover:text-gray-900 focus-visible:ring-gray-500",destructive:"bg-[#DC2626] text-white hover:bg-[#B91C1C] focus-visible:ring-[#DC2626]"}[s]," ").concat({sm:"h-9 px-3 text-sm",md:"h-10 px-4 text-sm",lg:"h-12 px-6 text-base"}[i]," ").concat(n),disabled:c||l,...d,children:l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"loading-spinner mr-2","aria-hidden":"true"}),(0,a.jsx)("span",{children:"Loading..."})]}):r})});s.displayName="Button"}}]);