"use strict";(()=>{var e={};e.id=804,e.ids=[804],e.modules={72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},27790:e=>{e.exports=require("assert")},78893:e=>{e.exports=require("buffer")},84770:e=>{e.exports=require("crypto")},17702:e=>{e.exports=require("events")},32615:e=>{e.exports=require("http")},35240:e=>{e.exports=require("https")},86624:e=>{e.exports=require("querystring")},17360:e=>{e.exports=require("url")},21764:e=>{e.exports=require("util")},71568:e=>{e.exports=require("zlib")},11579:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>h,patchFetch:()=>_,requestAsyncStorage:()=>p,routeModule:()=>I,serverHooks:()=>A,staticGenerationAsyncStorage:()=>E});var s={};r.r(s),r.d(s,{GET:()=>g});var a=r(49303),i=r(88716),o=r(60670),n=r(87070),l=r(45609),u=r(62632),c=r(15570),d=r(23151);async function g(e){try{let t=await (0,l.getServerSession)(),r=t?.user?.id??null;if(!r){let e=new d.g({code:"AUTH_REQUIRED",message:"Authentication required",user_message:"Authentication required",severity:"HIGH"});return n.NextResponse.json({success:!1,error:{id:e.id,code:e.code,message:e.user_message,severity:e.severity}},{status:401})}let s=new URL(e.url),a=s.searchParams.get("orgId")||s.searchParams.get("organization_id");if(!a){let e=new d.g({code:"ORG_REQUIRED",message:"Organization ID required",user_message:"Organization ID required",severity:"MEDIUM"});return n.NextResponse.json({success:!1,error:{id:e.id,code:e.code,message:e.user_message,severity:e.severity}},{status:400})}if(!await (0,c.c)(a,r)){let e=new d.g({code:"UNAUTHORIZED",message:"Not authorized",user_message:"Not authorized for this organization",severity:"HIGH"});return n.NextResponse.json({success:!1,error:{id:e.id,code:e.code,message:e.user_message,severity:e.severity}},{status:401})}let{data:i,error:o}=await u.default.from("voice_targets").select("id, phone_number, name, description, is_active, created_at").eq("organization_id",a).order("created_at",{ascending:!1});if(o){let e=new d.g({code:"DB_QUERY_FAILED",message:"Failed to fetch voice targets",user_message:"Could not retrieve voice targets",severity:"HIGH"});return n.NextResponse.json({success:!1,error:{id:e.id,code:e.code,message:e.user_message,severity:e.severity}},{status:500})}return n.NextResponse.json({success:!0,targets:i||[]})}catch(t){let e=t instanceof d.g?t:new d.g({code:"VOICE_TARGETS_ERROR",message:t?.message??"Unexpected",user_message:"Failed to fetch voice targets",severity:"HIGH"});return n.NextResponse.json({success:!1,error:{id:e.id,code:e.code,message:e.user_message,severity:e.severity}},{status:500})}}let I=new a.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/voice/targets/route",pathname:"/api/voice/targets",filename:"route",bundlePath:"app/api/voice/targets/route"},resolvedPagePath:"C:\\Users\\Ultimate Warrior\\My project\\gemini-project\\app\\api\\voice\\targets\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:p,staticGenerationAsyncStorage:E,serverHooks:A}=I,h="/api/voice/targets/route";function _(){return(0,o.patchFetch)({serverHooks:A,staticGenerationAsyncStorage:E})}},6781:(e,t,r)=>{r.r(t),r.d(t,{ERROR_CATALOG:()=>s,getDefaultError:()=>i,getErrorDefinition:()=>a});let s={AUTH_REQUIRED:{code:"AUTH_REQUIRED",category:"AUTH",severity:"HIGH",internalMessage:"Authentication required",userMessage:"Please sign in to continue",httpStatus:401,shouldAlert:!1,trackKPI:!0},AUTH_ORG_MISMATCH:{code:"AUTH_ORG_MISMATCH",category:"AUTH",severity:"HIGH",internalMessage:"User not authorized for organization",userMessage:"You do not have access to this organization",httpStatus:401,shouldAlert:!1,trackKPI:!0},FORBIDDEN:{code:"FORBIDDEN",category:"AUTH",severity:"HIGH",internalMessage:"Insufficient permissions",userMessage:"You do not have permission to perform this action",httpStatus:403,shouldAlert:!1,trackKPI:!0},DB_QUERY_FAILED:{code:"DB_QUERY_FAILED",category:"DB",severity:"HIGH",internalMessage:"Database query failed",userMessage:"Could not retrieve data. Please try again.",httpStatus:500,shouldAlert:!0,trackKPI:!0},DB_INSERT_FAILED:{code:"DB_INSERT_FAILED",category:"DB",severity:"HIGH",internalMessage:"Database insert failed",userMessage:"Could not save data. Please try again.",httpStatus:500,shouldAlert:!0,trackKPI:!0},DB_UPDATE_FAILED:{code:"DB_UPDATE_FAILED",category:"DB",severity:"HIGH",internalMessage:"Database update failed",userMessage:"Could not update data. Please try again.",httpStatus:500,shouldAlert:!0,trackKPI:!0},CALL_START_FAILED:{code:"CALL_START_FAILED",category:"VOICE",severity:"HIGH",internalMessage:"Failed to start call",userMessage:"Unable to place call. Please try again.",httpStatus:500,shouldAlert:!0,trackKPI:!0},SIGNALWIRE_CONFIG_MISSING:{code:"SIGNALWIRE_CONFIG_MISSING",category:"EXTERNAL",severity:"CRITICAL",internalMessage:"SignalWire credentials missing",userMessage:"System configuration error. Please contact support.",httpStatus:500,shouldAlert:!0,trackKPI:!0},SIGNALWIRE_API_ERROR:{code:"SIGNALWIRE_API_ERROR",category:"EXTERNAL",severity:"HIGH",internalMessage:"SignalWire API error",userMessage:"Call service temporarily unavailable. Please try again.",httpStatus:502,shouldAlert:!0,trackKPI:!0},ASSEMBLYAI_API_ERROR:{code:"ASSEMBLYAI_API_ERROR",category:"AI",severity:"HIGH",internalMessage:"AssemblyAI API error",userMessage:"Transcription service temporarily unavailable.",httpStatus:502,shouldAlert:!0,trackKPI:!0},TRANSCRIPTION_FAILED:{code:"TRANSCRIPTION_FAILED",category:"AI",severity:"MEDIUM",internalMessage:"Transcription processing failed",userMessage:"Transcription could not be completed.",httpStatus:500,shouldAlert:!1,trackKPI:!0},LIVE_TRANSLATE_EXECUTION_FAILED:{code:"LIVE_TRANSLATE_EXECUTION_FAILED",category:"EXTERNAL",severity:"MEDIUM",internalMessage:"Live translation execution failed",userMessage:"Live translation encountered an issue. Post-call transcript is still available.",httpStatus:500,shouldAlert:!1,trackKPI:!0},LIVE_TRANSLATE_VENDOR_DOWN:{code:"LIVE_TRANSLATE_VENDOR_DOWN",category:"EXTERNAL",severity:"HIGH",internalMessage:"Live translation vendor service unavailable",userMessage:"Live translation service is temporarily unavailable. Post-call transcript will be available.",httpStatus:503,shouldAlert:!0,trackKPI:!0},PLAN_LIMIT_EXCEEDED:{code:"PLAN_LIMIT_EXCEEDED",category:"ORG",severity:"MEDIUM",internalMessage:"Plan limit exceeded",userMessage:"This feature is not available on your current plan. Please upgrade.",httpStatus:403,shouldAlert:!1,trackKPI:!0},ORG_NOT_FOUND:{code:"ORG_NOT_FOUND",category:"ORG",severity:"MEDIUM",internalMessage:"Organization not found",userMessage:"Organization not found",httpStatus:404,shouldAlert:!1,trackKPI:!1},SYSTEM_ERROR:{code:"SYSTEM_ERROR",category:"SYSTEM",severity:"CRITICAL",internalMessage:"Unexpected system error",userMessage:"An unexpected error occurred. Please try again.",httpStatus:500,shouldAlert:!0,trackKPI:!0},SERVICE_UNAVAILABLE:{code:"SERVICE_UNAVAILABLE",category:"SYSTEM",severity:"HIGH",internalMessage:"Service temporarily unavailable",userMessage:"Service temporarily unavailable. Please try again later.",httpStatus:503,shouldAlert:!0,trackKPI:!0},INVALID_INPUT:{code:"INVALID_INPUT",category:"USER",severity:"MEDIUM",internalMessage:"Invalid input provided",userMessage:"Invalid input. Please check your request and try again.",httpStatus:400,shouldAlert:!1,trackKPI:!1},INVALID_PHONE:{code:"INVALID_PHONE",category:"USER",severity:"MEDIUM",internalMessage:"Invalid phone number format",userMessage:"The phone number provided is invalid. Please verify and try again.",httpStatus:400,shouldAlert:!1,trackKPI:!1}};function a(e){return s[e]||null}function i(){return s.SYSTEM_ERROR}},15570:(e,t,r)=>{r.d(t,{c:()=>a}),r(87070),r(45609);var s=r(62632);async function a(e,t){if(!t)return null;let{data:r,error:a}=await s.default.from("org_members").select("role").eq("organization_id",e).eq("user_id",t).limit(1);if(a||!r||0===r.length)return null;let i=(r[0].role||"viewer").toLowerCase(),{data:o,error:n}=await s.default.from("organizations").select("plan").eq("id",e).limit(1);return n||!o||0===o.length?null:{userId:t,organizationId:e,role:i,plan:(o[0].plan||"free").toLowerCase()}}},62632:(e,t,r)=>{r.r(t),r.d(t,{default:()=>s});let s={from:e=>({insert:async e=>({data:[e],error:null}),update:async e=>({data:[e],error:null}),select:t=>(function(e,t){let r={_table:e,_cols:t,eq:(e,t)=>r,in:(e,t)=>r,limit:e=>r,order:(e,t)=>r,single:async()=>({data:null,error:null})};return r.then=(e,t)=>Promise.resolve({data:null,error:null}).then(e,t),r.catch=e=>Promise.resolve({data:null,error:null}).catch(e),r})(e,t),in:(e,t)=>({data:null,error:null})})}},6649:(e,t,r)=>{r.d(t,{Z:()=>n});var s=r(84770),a=r.n(s);let i=new Uint8Array(256),o=i.length;function n(){return o>i.length-16&&(a().randomFillSync(i),o=0),i.slice(o,o+=16)}},16099:(e,t,r)=>{r.d(t,{Z:()=>i});var s=r(30900);let a=[];for(let e=0;e<256;++e)a.push((e+256).toString(16).substr(1));let i=function(e,t=0){let r=(a[e[t+0]]+a[e[t+1]]+a[e[t+2]]+a[e[t+3]]+"-"+a[e[t+4]]+a[e[t+5]]+"-"+a[e[t+6]]+a[e[t+7]]+"-"+a[e[t+8]]+a[e[t+9]]+"-"+a[e[t+10]]+a[e[t+11]]+a[e[t+12]]+a[e[t+13]]+a[e[t+14]]+a[e[t+15]]).toLowerCase();if(!(0,s.Z)(r))throw TypeError("Stringified UUID is invalid");return r}},79843:(e,t,r)=>{r.d(t,{Z:()=>i});var s=r(6649),a=r(16099);let i=function(e,t,r){let i=(e=e||{}).random||(e.rng||s.Z)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=i[e];return t}return(0,a.Z)(i)}},30900:(e,t,r)=>{r.d(t,{Z:()=>a});let s=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,a=function(e){return"string"==typeof e&&s.test(e)}},23151:(e,t,r)=>{r.d(t,{g:()=>s});class s extends Error{constructor(e){super(e.message),this.id=e.id??"err_"+Math.random().toString(36).slice(2,9),this.code=e.code,this.user_message=e.user_message,this.severity=e.severity??"MEDIUM",this.retriable=!!e.retriable,this.details=e.details;try{let{getErrorDefinition:e}=r(6781),t=e(this.code);this.httpStatus=t?.httpStatus||500}catch{this.httpStatus=500}}toJSON(){return{id:this.id,code:this.code,message:this.message,user_message:this.user_message,severity:this.severity,httpStatus:this.httpStatus}}}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[276,972,609],()=>r(11579));module.exports=s})();