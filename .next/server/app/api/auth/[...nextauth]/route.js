(()=>{var e={};e.id=912,e.ids=[912],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},86624:e=>{"use strict";e.exports=require("querystring")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},24904:()=>{},67219:(e,t,r)=>{"use strict";let s;r.r(t),r.d(t,{originalPathname:()=>$,patchFetch:()=>E,requestAsyncStorage:()=>b,routeModule:()=>w,serverHooks:()=>O,staticGenerationAsyncStorage:()=>v});var a={};r.r(a),r.d(a,{GET:()=>g,POST:()=>g});var n=r(49303),i=r(88716),o=r(60670),l=r(75571),h=r.n(l),c=r(14029),u=r(53797),d=r(43828),p=r(74194);async function f(e,t){let r=process.env.RESEND_API_KEY;if(!r)throw Error("RESEND_API_KEY not configured");let s=await fetch("https://api.resend.com/emails",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify({from:process.env.EMAIL_FROM||`no-reply@${process.env.NEXTAUTH_URL?.replace(/^https?:\/\//,"")}`,to:[e],subject:"Your sign-in link",html:t})});if(!s.ok)throw Error(`Resend API error: ${s.status} ${await s.text()}`)}try{let e=process.env.SUPABASE_URL||"https://fiijrhpjpebevfavzlhu.supabase.co";if(e&&process.env.SUPABASE_SERVICE_ROLE_KEY){let t=(0,d.eI)(String(e),String(process.env.SUPABASE_SERVICE_ROLE_KEY));s=(0,p.S3)(t)}}catch(e){console.info(`[next-auth] Email provider ${s?"registered":"not registered"}; adapterPresent=${!!s}`),console.error("Failed to initialize Supabase adapter for NextAuth",e)}let m=[];m.push((0,u.Z)({name:"Credentials",credentials:{username:{label:"Username or Email",type:"text"},password:{label:"Password",type:"password"}},async authorize(e){if(!e||!e.username||!e.password)return null;let t=String(e.username).toLowerCase();global.__loginRateLimiter||(global.__loginRateLimiter=new Map);let r=global.__loginRateLimiter;function s(){return Date.now()}let a=r.get(t)||{attempts:[],blockedUntil:0};if(a.attempts=a.attempts.filter(e=>e>s()-9e5),a.blockedUntil&&a.blockedUntil>s())return null;let n=process.env.SUPABASE_URL||"https://fiijrhpjpebevfavzlhu.supabase.co",i=process.env.SUPABASE_SERVICE_ROLE_KEY;if(!n||!i)throw Error("Supabase not configured for credentials login");let o=String(e.username),l=null;if(/^[^@\s]+@[^@\s]+\.[^@\s]+$/.test(o))l=o;else try{let e=(0,d.eI)(n,i),{data:t,error:r}=await e.from("users").select("email,username").or(`username.eq.${o},email.eq.${o}`).limit(1);!r&&Array.isArray(t)&&t.length&&(l=t[0].email??null)}catch(e){}if(!l)return a.attempts.push(s()),a.attempts.length>=5&&(a.blockedUntil=s()+9e5),r.set(t,a),null;let h=`${n.replace(/\/$/,"")}/auth/v1/token?grant_type=password`,c=await fetch(h,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`},body:JSON.stringify({email:l,password:e.password})});if(!c.ok)return a.attempts.push(s()),a.attempts.length>=5&&(a.blockedUntil=s()+9e5),r.set(t,a),null;let u=await c.json(),p=u?.user??null;return p?(r.delete(t),{id:p.id,name:p.email,email:p.email}):(a.attempts.push(s()),a.attempts.length>=5&&(a.blockedUntil=s()+9e5),r.set(t,a),null)}})),s&&m.push((0,c.Z)({async sendVerificationRequest({identifier:e,url:t}){let r=`<p>Sign in to the app with this link:</p><p><a href="${t}">${t}</a></p>`;await f(e,r)},server:void 0}));let y={...s?{adapter:s}:{},providers:m,secret:process.env.NEXTAUTH_SECRET},g=h()(y),w=new n.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/auth/[...nextauth]/route",pathname:"/api/auth/[...nextauth]",filename:"route",bundlePath:"app/api/auth/[...nextauth]/route"},resolvedPagePath:"C:\\Users\\Ultimate Warrior\\My project\\gemini-project\\app\\api\\auth\\[...nextauth]\\route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:b,staticGenerationAsyncStorage:v,serverHooks:O}=w,$="/api/auth/[...nextauth]/route";function E(){return(0,o.patchFetch)({serverHooks:O,staticGenerationAsyncStorage:v})}},74194:(e,t,r)=>{"use strict";t.S3=void 0;let s=r(14910);function a(e){for(let[t,r]of Object.entries(e))null===r&&delete e[t],"Invalid Date"===new Date(r).toString()||isNaN(Date.parse(r))||(e[t]=new Date(r));return e}t.S3=({url:e,secret:t})=>{let r=(0,s.createClient)(e,t,{db:{schema:"next_auth"},global:{headers:{"X-Client-Info":"@next-auth/supabase-adapter@0.1.0"}}});return{async createUser(e){var t;let{data:s,error:n}=await r.from("users").insert({...e,emailVerified:null===(t=e.emailVerified)||void 0===t?void 0:t.toISOString()}).select().single();if(n)throw n;return a(s)},async getUser(e){let{data:t,error:s}=await r.from("users").select().eq("id",e).maybeSingle();if(s)throw s;return t?a(t):null},async getUserByEmail(e){let{data:t,error:s}=await r.from("users").select().eq("email",e).maybeSingle();if(s)throw s;return t?a(t):null},async getUserByAccount({providerAccountId:e,provider:t}){let{data:s,error:n}=await r.from("accounts").select("users (*)").match({provider:t,providerAccountId:e}).maybeSingle();if(n)throw n;return s&&s.users?a(s.users):null},async updateUser(e){var t;let{data:s,error:n}=await r.from("users").update({...e,emailVerified:null===(t=e.emailVerified)||void 0===t?void 0:t.toISOString()}).eq("id",e.id).select().single();if(n)throw n;return a(s)},async deleteUser(e){let{error:t}=await r.from("users").delete().eq("id",e);if(t)throw t},async linkAccount(e){let{error:t}=await r.from("accounts").insert(e);if(t)throw t},async unlinkAccount({providerAccountId:e,provider:t}){let{error:s}=await r.from("accounts").delete().match({provider:t,providerAccountId:e});if(s)throw s},async createSession({sessionToken:e,userId:t,expires:s}){let{data:n,error:i}=await r.from("sessions").insert({sessionToken:e,userId:t,expires:s.toISOString()}).select().single();if(i)throw i;return a(n)},async getSessionAndUser(e){let{data:t,error:s}=await r.from("sessions").select("*, users(*)").eq("sessionToken",e).maybeSingle();if(s)throw s;if(!t)return null;let{users:n,...i}=t;return{user:a(n),session:a(i)}},async updateSession(e){var t;let{data:s,error:n}=await r.from("sessions").update({...e,expires:null===(t=e.expires)||void 0===t?void 0:t.toISOString()}).eq("sessionToken",e.sessionToken).select().single();if(n)throw n;return a(s)},async deleteSession(e){let{error:t}=await r.from("sessions").delete().eq("sessionToken",e);if(t)throw t},async createVerificationToken(e){let{data:t,error:s}=await r.from("verification_tokens").insert({...e,expires:e.expires.toISOString()}).select().single();if(s)throw s;let{id:n,...i}=t;return a(i)},async useVerificationToken({identifier:e,token:t}){let{data:s,error:n}=await r.from("verification_tokens").delete().match({identifier:e,token:t}).select().maybeSingle();if(n)throw n;if(!s)return null;let{id:i,...o}=s;return a(o)}}}},62695:(e,t,r)=>{"use strict";r.r(t),r.d(t,{FunctionRegion:()=>a.zt,FunctionsClient:()=>s.b,FunctionsError:()=>a.uS,FunctionsFetchError:()=>a.QQ,FunctionsHttpError:()=>a.MF,FunctionsRelayError:()=>a.iF});var s=r(25929),a=r(27719)},69955:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},75571:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={};Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n.default}});var a=r(69955);Object.keys(a).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(s,e))&&(e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))});var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(void 0);if(r&&r.has(e))return r.get(e);var s={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&({}).hasOwnProperty.call(e,n)){var o=a?Object.getOwnPropertyDescriptor(e,n):null;o&&(o.get||o.set)?Object.defineProperty(s,n,o):s[n]=e[n]}return s.default=e,r&&r.set(e,s),s}(r(45609));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}Object.keys(n).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(s,e))&&(e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))})},53797:(e,t)=>{"use strict";t.Z=function(e){return{id:"credentials",name:"Credentials",type:"credentials",credentials:{},authorize:()=>null,options:e}}},14029:(e,t,r)=>{"use strict";t.Z=function(e){return{id:"email",type:"email",name:"Email",server:{host:"localhost",port:25,auth:{user:"",pass:""}},from:"NextAuth <no-reply@example.com>",maxAge:86400,async sendVerificationRequest(e){let{identifier:t,url:r,provider:a,theme:n}=e,{host:i}=new URL(r),o=(0,s.createTransport)(a.server),l=await o.sendMail({to:t,from:a.from,subject:`Sign in to ${i}`,text:function({url:e,host:t}){return`Sign in to ${t}
${e}

`}({url:r,host:i}),html:function(e){let{url:t,host:r,theme:s}=e,a=r.replace(/\./g,"&#8203;."),n=s.brandColor||"#346df1",i=s.buttonText||"#fff",o="#444";return`
<body style="background: #f9f9f9;">
  <table width="100%" border="0" cellspacing="20" cellpadding="0"
    style="background: #fff; max-width: 600px; margin: auto; border-radius: 10px;">
    <tr>
      <td align="center"
        style="padding: 10px 0px; font-size: 22px; font-family: Helvetica, Arial, sans-serif; color: ${o};">
        Sign in to <strong>${a}</strong>
      </td>
    </tr>
    <tr>
      <td align="center" style="padding: 20px 0;">
        <table border="0" cellspacing="0" cellpadding="0">
          <tr>
            <td align="center" style="border-radius: 5px;" bgcolor="${n}"><a href="${t}"
                target="_blank"
                style="font-size: 18px; font-family: Helvetica, Arial, sans-serif; color: ${i}; text-decoration: none; border-radius: 5px; padding: 10px 20px; border: 1px solid ${n}; display: inline-block; font-weight: bold;">Sign
                in</a></td>
          </tr>
        </table>
      </td>
    </tr>
    <tr>
      <td align="center"
        style="padding: 0px 0px 10px 0px; font-size: 16px; line-height: 22px; font-family: Helvetica, Arial, sans-serif; color: ${o};">
        If you did not request this email you can safely ignore it.
      </td>
    </tr>
  </table>
</body>
`}({url:r,host:i,theme:n})}),h=l.rejected.concat(l.pending).filter(Boolean);if(h.length)throw Error(`Email (${h.join(", ")}) could not be sent`)},options:e}};var s=r(24904)},79925:e=>{"use strict";var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,n={};function i(e){var t;let r=["path"in e&&e.path&&`Path=${e.path}`,"expires"in e&&(e.expires||0===e.expires)&&`Expires=${("number"==typeof e.expires?new Date(e.expires):e.expires).toUTCString()}`,"maxAge"in e&&"number"==typeof e.maxAge&&`Max-Age=${e.maxAge}`,"domain"in e&&e.domain&&`Domain=${e.domain}`,"secure"in e&&e.secure&&"Secure","httpOnly"in e&&e.httpOnly&&"HttpOnly","sameSite"in e&&e.sameSite&&`SameSite=${e.sameSite}`,"partitioned"in e&&e.partitioned&&"Partitioned","priority"in e&&e.priority&&`Priority=${e.priority}`].filter(Boolean),s=`${e.name}=${encodeURIComponent(null!=(t=e.value)?t:"")}`;return 0===r.length?s:`${s}; ${r.join("; ")}`}function o(e){let t=new Map;for(let r of e.split(/; */)){if(!r)continue;let e=r.indexOf("=");if(-1===e){t.set(r,"true");continue}let[s,a]=[r.slice(0,e),r.slice(e+1)];try{t.set(s,decodeURIComponent(null!=a?a:"true"))}catch{}}return t}function l(e){var t,r;if(!e)return;let[[s,a],...n]=o(e),{domain:i,expires:l,httponly:u,maxage:d,path:p,samesite:f,secure:m,partitioned:y,priority:g}=Object.fromEntries(n.map(([e,t])=>[e.toLowerCase(),t]));return function(e){let t={};for(let r in e)e[r]&&(t[r]=e[r]);return t}({name:s,value:decodeURIComponent(a),domain:i,...l&&{expires:new Date(l)},...u&&{httpOnly:!0},..."string"==typeof d&&{maxAge:Number(d)},path:p,...f&&{sameSite:h.includes(t=(t=f).toLowerCase())?t:void 0},...m&&{secure:!0},...g&&{priority:c.includes(r=(r=g).toLowerCase())?r:void 0},...y&&{partitioned:!0}})}((e,r)=>{for(var s in r)t(e,s,{get:r[s],enumerable:!0})})(n,{RequestCookies:()=>u,ResponseCookies:()=>d,parseCookie:()=>o,parseSetCookie:()=>l,stringifyCookie:()=>i}),e.exports=((e,n,i,o)=>{if(n&&"object"==typeof n||"function"==typeof n)for(let l of s(n))a.call(e,l)||l===i||t(e,l,{get:()=>n[l],enumerable:!(o=r(n,l))||o.enumerable});return e})(t({},"__esModule",{value:!0}),n);var h=["strict","lax","none"],c=["low","medium","high"],u=class{constructor(e){this._parsed=new Map,this._headers=e;let t=e.get("cookie");if(t)for(let[e,r]of o(t))this._parsed.set(e,{name:e,value:r})}[Symbol.iterator](){return this._parsed[Symbol.iterator]()}get size(){return this._parsed.size}get(...e){let t="string"==typeof e[0]?e[0]:e[0].name;return this._parsed.get(t)}getAll(...e){var t;let r=Array.from(this._parsed);if(!e.length)return r.map(([e,t])=>t);let s="string"==typeof e[0]?e[0]:null==(t=e[0])?void 0:t.name;return r.filter(([e])=>e===s).map(([e,t])=>t)}has(e){return this._parsed.has(e)}set(...e){let[t,r]=1===e.length?[e[0].name,e[0].value]:e,s=this._parsed;return s.set(t,{name:t,value:r}),this._headers.set("cookie",Array.from(s).map(([e,t])=>i(t)).join("; ")),this}delete(e){let t=this._parsed,r=Array.isArray(e)?e.map(e=>t.delete(e)):t.delete(e);return this._headers.set("cookie",Array.from(t).map(([e,t])=>i(t)).join("; ")),r}clear(){return this.delete(Array.from(this._parsed.keys())),this}[Symbol.for("edge-runtime.inspect.custom")](){return`RequestCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(e=>`${e.name}=${encodeURIComponent(e.value)}`).join("; ")}},d=class{constructor(e){var t,r,s;this._parsed=new Map,this._headers=e;let a=null!=(s=null!=(r=null==(t=e.getSetCookie)?void 0:t.call(e))?r:e.get("set-cookie"))?s:[];for(let e of Array.isArray(a)?a:function(e){if(!e)return[];var t,r,s,a,n,i=[],o=0;function l(){for(;o<e.length&&/\s/.test(e.charAt(o));)o+=1;return o<e.length}for(;o<e.length;){for(t=o,n=!1;l();)if(","===(r=e.charAt(o))){for(s=o,o+=1,l(),a=o;o<e.length&&"="!==(r=e.charAt(o))&&";"!==r&&","!==r;)o+=1;o<e.length&&"="===e.charAt(o)?(n=!0,o=a,i.push(e.substring(t,s)),t=o):o=s+1}else o+=1;(!n||o>=e.length)&&i.push(e.substring(t,e.length))}return i}(a)){let t=l(e);t&&this._parsed.set(t.name,t)}}get(...e){let t="string"==typeof e[0]?e[0]:e[0].name;return this._parsed.get(t)}getAll(...e){var t;let r=Array.from(this._parsed.values());if(!e.length)return r;let s="string"==typeof e[0]?e[0]:null==(t=e[0])?void 0:t.name;return r.filter(e=>e.name===s)}has(e){return this._parsed.has(e)}set(...e){let[t,r,s]=1===e.length?[e[0].name,e[0].value,e[0]]:e,a=this._parsed;return a.set(t,function(e={name:"",value:""}){return"number"==typeof e.expires&&(e.expires=new Date(e.expires)),e.maxAge&&(e.expires=new Date(Date.now()+1e3*e.maxAge)),(null===e.path||void 0===e.path)&&(e.path="/"),e}({name:t,value:r,...s})),function(e,t){for(let[,r]of(t.delete("set-cookie"),e)){let e=i(r);t.append("set-cookie",e)}}(a,this._headers),this}delete(...e){let[t,r,s]="string"==typeof e[0]?[e[0]]:[e[0].name,e[0].path,e[0].domain];return this.set({name:t,path:r,domain:s,value:"",expires:new Date(0)})}[Symbol.for("edge-runtime.inspect.custom")](){return`ResponseCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(i).join("; ")}}},49303:(e,t,r)=>{"use strict";e.exports=r(30517)},92044:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{RequestCookies:function(){return s.RequestCookies},ResponseCookies:function(){return s.ResponseCookies},stringifyCookie:function(){return s.stringifyCookie}});let s=r(79925)},14717:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},s=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=null!==(t=e.shouldThrowOnError)&&void 0!==t&&t,this.signal=e.signal,this.isMaybeSingle=null!==(r=e.isMaybeSingle)&&void 0!==r&&r,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var s=this;void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let a=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var t,a,n,i;let o=null,l=null,h=null,c=e.status,u=e.statusText;if(e.ok){if("HEAD"!==s.method){let t=await e.text();""===t||(l="text/csv"===s.headers.get("Accept")?t:s.headers.get("Accept")&&(null===(n=s.headers.get("Accept"))||void 0===n?void 0:n.includes("application/vnd.pgrst.plan+text"))?t:JSON.parse(t))}let r=null===(t=s.headers.get("Prefer"))||void 0===t?void 0:t.match(/count=(exact|planned|estimated)/),i=null===(a=e.headers.get("content-range"))||void 0===a?void 0:a.split("/");r&&i&&i.length>1&&(h=parseInt(i[1])),s.isMaybeSingle&&"GET"===s.method&&Array.isArray(l)&&(l.length>1?(o={code:"PGRST116",details:`Results contain ${l.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},l=null,h=null,c=406,u="Not Acceptable"):l=1===l.length?l[0]:null)}else{let t=await e.text();try{o=JSON.parse(t),Array.isArray(o)&&404===e.status&&(l=[],o=null,c=200,u="OK")}catch(r){404===e.status&&""===t?(c=204,u="No Content"):o={message:t}}if(o&&s.isMaybeSingle&&(null==o||null===(i=o.details)||void 0===i?void 0:i.includes("0 rows"))&&(o=null,c=200,u="OK"),o&&s.shouldThrowOnError)throw new r(o)}return{error:o,data:l,count:h,status:c,statusText:u}});return this.shouldThrowOnError||(a=a.catch(e=>{var t,r,s,a,n,i;let o="",l=null==e?void 0:e.cause;if(l){let t=null!==(r=null==l?void 0:l.message)&&void 0!==r?r:"",i=null!==(s=null==l?void 0:l.code)&&void 0!==s?s:"";o=`${null!==(a=null==e?void 0:e.name)&&void 0!==a?a:"FetchError"}: ${null==e?void 0:e.message}

Caused by: ${null!==(n=null==l?void 0:l.name)&&void 0!==n?n:"Error"}: ${t}`,i&&(o+=` (${i})`),(null==l?void 0:l.stack)&&(o+=`
${l.stack}`)}else o=null!==(i=null==e?void 0:e.stack)&&void 0!==i?i:"";return{error:{message:`${null!==(t=null==e?void 0:e.name)&&void 0!==t?t:"FetchError"}: ${null==e?void 0:e.message}`,details:o,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),a.then(e,t)}returns(){return this}overrideTypes(){return this}},a=class extends s{select(e){let t=!1,r=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:s,referencedTable:a=s}={}){let n=a?`${a}.order`:"order",i=this.url.searchParams.get(n);return this.url.searchParams.set(n,`${i?`${i},`:""}${e}.${t?"asc":"desc"}${void 0===r?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){let s=void 0===r?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:s=r}={}){let a=void 0===s?"offset":`${s}.offset`,n=void 0===s?"limit":`${s}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(n,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return"GET"===this.method?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:s=!1,wal:a=!1,format:n="text"}={}){var i;let o=[e?"analyze":null,t?"verbose":null,r?"settings":null,s?"buffers":null,a?"wal":null].filter(Boolean).join("|"),l=null!==(i=this.headers.get("Accept"))&&void 0!==i?i:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${n}; for="${l}"; options=${o};`),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};let n=RegExp("[,()]");var i=class extends a{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){let r=Array.from(new Set(t)).map(e=>"string"==typeof e&&n.test(e)?`"${e}"`:`${e}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}notIn(e,t){let r=Array.from(new Set(t)).map(e=>"string"==typeof e&&n.test(e)?`"${e}"`:`${e}`).join(",");return this.url.searchParams.append(e,`not.in.(${r})`),this}contains(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"==typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:s}={}){let a="";"plain"===s?a="pl":"phrase"===s?a="ph":"websearch"===s&&(a="w");let n=void 0===r?"":`(${r})`;return this.url.searchParams.append(e,`${a}fts${n}.${t}`),this}match(e){return Object.entries(e).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){let s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}},o=class{constructor(e,{headers:t={},schema:r,fetch:s}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=s}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){let{head:r=!1,count:s}=null!=t?t:{},a=!1,n=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!a?"":('"'===e&&(a=!a),e)).join(""),{url:o,headers:l}=this.cloneRequestState();return o.searchParams.set("select",n),s&&l.append("Prefer",`count=${s}`),new i({method:r?"HEAD":"GET",url:o,headers:l,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:r=!0}={}){var s;let{url:a,headers:n}=this.cloneRequestState();if(t&&n.append("Prefer",`count=${t}`),r||n.append("Prefer","missing=default"),Array.isArray(e)){let t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){let e=[...new Set(t)].map(e=>`"${e}"`);a.searchParams.set("columns",e.join(","))}}return new i({method:"POST",url:a,headers:n,schema:this.schema,body:e,fetch:null!==(s=this.fetch)&&void 0!==s?s:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:s,defaultToNull:a=!0}={}){var n;let{url:o,headers:l}=this.cloneRequestState();if(l.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),void 0!==t&&o.searchParams.set("on_conflict",t),s&&l.append("Prefer",`count=${s}`),a||l.append("Prefer","missing=default"),Array.isArray(e)){let t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){let e=[...new Set(t)].map(e=>`"${e}"`);o.searchParams.set("columns",e.join(","))}}return new i({method:"POST",url:o,headers:l,schema:this.schema,body:e,fetch:null!==(n=this.fetch)&&void 0!==n?n:fetch})}update(e,{count:t}={}){var r;let{url:s,headers:a}=this.cloneRequestState();return t&&a.append("Prefer",`count=${t}`),new i({method:"PATCH",url:s,headers:a,schema:this.schema,body:e,fetch:null!==(r=this.fetch)&&void 0!==r?r:fetch})}delete({count:e}={}){var t;let{url:r,headers:s}=this.cloneRequestState();return e&&s.append("Prefer",`count=${e}`),new i({method:"DELETE",url:r,headers:s,schema:this.schema,fetch:null!==(t=this.fetch)&&void 0!==t?t:fetch})}},l=class e{constructor(e,{headers:t={},schema:r,fetch:s}={}){this.url=e,this.headers=new Headers(t),this.schemaName=r,this.fetch=s}from(e){if(!e||"string"!=typeof e||""===e.trim())throw Error("Invalid relation name: relation must be a non-empty string.");return new o(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new e(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(e,t={},{head:r=!1,get:s=!1,count:a}={}){var n;let o,l;let h=new URL(`${this.url}/rpc/${e}`),c=e=>null!==e&&"object"==typeof e&&(!Array.isArray(e)||e.some(c)),u=r&&Object.values(t).some(c);u?(o="POST",l=t):r||s?(o=r?"HEAD":"GET",Object.entries(t).filter(([e,t])=>void 0!==t).map(([e,t])=>[e,Array.isArray(t)?`{${t.join(",")}}`:`${t}`]).forEach(([e,t])=>{h.searchParams.append(e,t)})):(o="POST",l=t);let d=new Headers(this.headers);return u?d.set("Prefer",a?`count=${a},return=minimal`:"return=minimal"):a&&d.set("Prefer",`count=${a}`),new i({method:o,url:h,headers:d,schema:this.schemaName,body:l,fetch:null!==(n=this.fetch)&&void 0!==n?n:fetch})}};t.PostgrestBuilder=s,t.PostgrestClient=l,t.PostgrestError=r,t.PostgrestFilterBuilder=i,t.PostgrestQueryBuilder=o,t.PostgrestTransformBuilder=a,t.default={PostgrestClient:l,PostgrestQueryBuilder:o,PostgrestFilterBuilder:i,PostgrestTransformBuilder:a,PostgrestBuilder:s,PostgrestError:r}},7994:(e,t,r)=>{let s,a=r(17042);var n=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function i(e){return"object"==typeof e&&null!==e&&"__isStorageError"in e}var o=class extends n{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},l=class extends n{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}};let h=e=>e?(...t)=>e(...t):(...e)=>fetch(...e),c=()=>Response,u=e=>{if(Array.isArray(e))return e.map(e=>u(e));if("function"==typeof e||e!==Object(e))return e;let t={};return Object.entries(e).forEach(([e,r])=>{t[e.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""))]=u(r)}),t},d=e=>{if("object"!=typeof e||null===e)return!1;let t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},p=e=>!(!e||"string"!=typeof e||0===e.length||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\"))&&/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach(function(t){!function(e,t,r){var s;(s=function(e,t){if("object"!=f(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t||"default");if("object"!=f(s))return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==f(s)?s:s+"")in e)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let g=e=>{var t;return e.msg||e.message||e.error_description||("string"==typeof e.error?e.error:null===(t=e.error)||void 0===t?void 0:t.message)||JSON.stringify(e)},w=async(e,t,r)=>{e instanceof await c()&&!(null==r?void 0:r.noResolveJson)?e.json().then(r=>{let s=e.status||500,a=(null==r?void 0:r.statusCode)||s+"";t(new o(g(r),s,a))}).catch(e=>{t(new l(g(e),e))}):t(new l(g(e),e))},b=(e,t,r,s)=>{let a={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"!==e&&s?(d(s)?(a.headers=y({"Content-Type":"application/json"},null==t?void 0:t.headers),a.body=JSON.stringify(s)):a.body=s,(null==t?void 0:t.duplex)&&(a.duplex=t.duplex),y(y({},a),r)):a};async function v(e,t,r,s,a,n){return new Promise((i,o)=>{e(r,b(t,s,a,n)).then(e=>{if(!e.ok)throw e;return(null==s?void 0:s.noResolveJson)?e:e.json()}).then(e=>i(e)).catch(e=>w(e,o,s))})}async function O(e,t,r,s){return v(e,"GET",t,r,s)}async function $(e,t,r,s,a){return v(e,"POST",t,s,a,r)}async function E(e,t,r,s,a){return v(e,"PUT",t,s,a,r)}async function x(e,t,r,s){return v(e,"HEAD",t,y(y({},r),{},{noResolveJson:!0}),s)}async function S(e,t,r,s,a){return v(e,"DELETE",t,s,a,r)}var T=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){try{return{data:(await this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(i(e))return{data:null,error:e};throw e}}};s=Symbol.toStringTag;var k=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[s]="BlobDownloadBuilder",this.promise=null}asStream(){return new T(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){try{return{data:await (await this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(i(e))return{data:null,error:e};throw e}}};let P={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},j={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var A=class{constructor(e,t={},r,s){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=h(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(e,t,r,s){try{let a;let n=y(y({},j),s),i=y(y({},this.headers),"POST"===e&&{"x-upsert":String(n.upsert)}),o=n.metadata;"undefined"!=typeof Blob&&r instanceof Blob?((a=new FormData).append("cacheControl",n.cacheControl),o&&a.append("metadata",this.encodeMetadata(o)),a.append("",r)):"undefined"!=typeof FormData&&r instanceof FormData?((a=r).has("cacheControl")||a.append("cacheControl",n.cacheControl),o&&!a.has("metadata")&&a.append("metadata",this.encodeMetadata(o))):(a=r,i["cache-control"]=`max-age=${n.cacheControl}`,i["content-type"]=n.contentType,o&&(i["x-metadata"]=this.toBase64(this.encodeMetadata(o))),("undefined"!=typeof ReadableStream&&a instanceof ReadableStream||a&&"object"==typeof a&&"pipe"in a&&"function"==typeof a.pipe)&&!n.duplex&&(n.duplex="half")),(null==s?void 0:s.headers)&&(i=y(y({},i),s.headers));let l=this._removeEmptyFolders(t),h=this._getFinalPath(l),c=await ("PUT"==e?E:$)(this.fetch,`${this.url}/object/${h}`,a,y({headers:i},(null==n?void 0:n.duplex)?{duplex:n.duplex}:{}));return{data:{path:l,id:c.Id,fullPath:c.Key},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(i(e))return{data:null,error:e};throw e}}async upload(e,t,r){return this.uploadOrUpdate("POST",e,t,r)}async uploadToSignedUrl(e,t,r,s){let a=this._removeEmptyFolders(e),n=this._getFinalPath(a),o=new URL(this.url+`/object/upload/sign/${n}`);o.searchParams.set("token",t);try{let e;let t=y({upsert:j.upsert},s),n=y(y({},this.headers),{"x-upsert":String(t.upsert)});return"undefined"!=typeof Blob&&r instanceof Blob?((e=new FormData).append("cacheControl",t.cacheControl),e.append("",r)):"undefined"!=typeof FormData&&r instanceof FormData?(e=r).append("cacheControl",t.cacheControl):(e=r,n["cache-control"]=`max-age=${t.cacheControl}`,n["content-type"]=t.contentType),{data:{path:a,fullPath:(await E(this.fetch,o.toString(),e,{headers:n})).Key},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(i(e))return{data:null,error:e};throw e}}async createSignedUploadUrl(e,t){try{let r=this._getFinalPath(e),s=y({},this.headers);(null==t?void 0:t.upsert)&&(s["x-upsert"]="true");let a=await $(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),i=new URL(this.url+a.url),o=i.searchParams.get("token");if(!o)throw new n("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:o},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(i(e))return{data:null,error:e};throw e}}async update(e,t,r){return this.uploadOrUpdate("PUT",e,t,r)}async move(e,t,r){try{return{data:await $(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==r?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(i(e))return{data:null,error:e};throw e}}async copy(e,t,r){try{return{data:{path:(await $(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==r?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(i(e))return{data:null,error:e};throw e}}async createSignedUrl(e,t,r){try{let s=this._getFinalPath(e),a=await $(this.fetch,`${this.url}/object/sign/${s}`,y({expiresIn:t},(null==r?void 0:r.transform)?{transform:r.transform}:{}),{headers:this.headers}),n=(null==r?void 0:r.download)?`&download=${!0===r.download?"":r.download}`:"";return{data:a={signedUrl:encodeURI(`${this.url}${a.signedURL}${n}`)},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(i(e))return{data:null,error:e};throw e}}async createSignedUrls(e,t,r){var s=this;try{let a=await $(s.fetch,`${s.url}/object/sign/${s.bucketId}`,{expiresIn:t,paths:e},{headers:s.headers}),n=(null==r?void 0:r.download)?`&download=${!0===r.download?"":r.download}`:"";return{data:a.map(e=>y(y({},e),{},{signedUrl:e.signedURL?encodeURI(`${s.url}${e.signedURL}${n}`):null})),error:null}}catch(e){if(s.shouldThrowOnError)throw e;if(i(e))return{data:null,error:e};throw e}}download(e,t){let r=void 0!==(null==t?void 0:t.transform)?"render/image/authenticated":"object",s=this.transformOptsToQueryString((null==t?void 0:t.transform)||{}),a=s?`?${s}`:"",n=this._getFinalPath(e);return new k(()=>O(this.fetch,`${this.url}/${r}/${n}${a}`,{headers:this.headers,noResolveJson:!0}),this.shouldThrowOnError)}async info(e){let t=this._getFinalPath(e);try{return{data:u(await O(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers})),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(i(e))return{data:null,error:e};throw e}}async exists(e){let t=this._getFinalPath(e);try{return await x(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(i(e)&&e instanceof l){let t=e.originalError;if([400,404].includes(null==t?void 0:t.status))return{data:!1,error:e}}throw e}}getPublicUrl(e,t){let r=this._getFinalPath(e),s=[],a=(null==t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==a&&s.push(a);let n=void 0!==(null==t?void 0:t.transform)?"render/image":"object",i=this.transformOptsToQueryString((null==t?void 0:t.transform)||{});""!==i&&s.push(i);let o=s.join("&");return""!==o&&(o=`?${o}`),{data:{publicUrl:encodeURI(`${this.url}/${n}/public/${r}${o}`)}}}async remove(e){try{return{data:await S(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(i(e))return{data:null,error:e};throw e}}async list(e,t,r){try{let s=y(y(y({},P),t),{},{prefix:e||""});return{data:await $(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(i(e))return{data:null,error:e};throw e}}async listV2(e,t){try{let r=y({},e);return{data:await $(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},t),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(i(e))return{data:null,error:e};throw e}}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!=typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){let t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};let C="2.90.1",_={"X-Client-Info":`storage-js/${C}`};var N=class{constructor(e,t={},r,s){this.shouldThrowOnError=!1;let a=new URL(e);(null==s?void 0:s.useNewHostname)&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=y(y({},_),t),this.fetch=h(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(e){try{let t=this.listBucketOptionsToQueryString(e);return{data:await O(this.fetch,`${this.url}/bucket${t}`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(i(e))return{data:null,error:e};throw e}}async getBucket(e){try{return{data:await O(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(i(e))return{data:null,error:e};throw e}}async createBucket(e,t={public:!1}){try{return{data:await $(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(i(e))return{data:null,error:e};throw e}}async updateBucket(e,t){try{return{data:await E(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(i(e))return{data:null,error:e};throw e}}async emptyBucket(e){try{return{data:await $(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(i(e))return{data:null,error:e};throw e}}async deleteBucket(e){try{return{data:await S(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(i(e))return{data:null,error:e};throw e}}listBucketOptionsToQueryString(e){let t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},U=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=y(y({},_),t),this.fetch=h(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){try{return{data:await $(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(i(e))return{data:null,error:e};throw e}}async listBuckets(e){try{let t=new URLSearchParams;(null==e?void 0:e.limit)!==void 0&&t.set("limit",e.limit.toString()),(null==e?void 0:e.offset)!==void 0&&t.set("offset",e.offset.toString()),(null==e?void 0:e.sortColumn)&&t.set("sortColumn",e.sortColumn),(null==e?void 0:e.sortOrder)&&t.set("sortOrder",e.sortOrder),(null==e?void 0:e.search)&&t.set("search",e.search);let r=t.toString(),s=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:await O(this.fetch,s,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(i(e))return{data:null,error:e};throw e}}async deleteBucket(e){try{return{data:await S(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(i(e))return{data:null,error:e};throw e}}from(e){var t=this;if(!p(e))throw new n("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");let r=new a.IcebergRestCatalog({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),s=this.shouldThrowOnError;return new Proxy(r,{get(e,t){let r=e[t];return"function"!=typeof r?r:async(...t)=>{try{return{data:await r.apply(e,t),error:null}}catch(e){if(s)throw e;return{data:null,error:e}}}}})}};let R={"X-Client-Info":`storage-js/${C}`,"Content-Type":"application/json"};var I=class extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function B(e){return"object"==typeof e&&null!==e&&"__isStorageVectorsError"in e}var q=class extends I{constructor(e,t,r){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},D=class extends I{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}};let F=function(e){return e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded",e}({}),V=e=>e?(...t)=>e(...t):(...e)=>fetch(...e),L=e=>{if("object"!=typeof e||null===e)return!1;let t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},M=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),H=async(e,t,r)=>{if(e&&"object"==typeof e&&"status"in e&&"ok"in e&&"number"==typeof e.status&&!(null==r?void 0:r.noResolveJson)){let r=e.status||500;"function"==typeof e.json?e.json().then(e=>{let s=(null==e?void 0:e.statusCode)||(null==e?void 0:e.code)||r+"";t(new q(M(e),r,s))}).catch(()=>{t(new q(e.statusText||`HTTP ${r} error`,r,r+""))}):t(new q(e.statusText||`HTTP ${r} error`,r,r+""))}else t(new D(M(e),e))},z=(e,t,r,s)=>{let a={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"!==e&&s?(L(s)?(a.headers=y({"Content-Type":"application/json"},null==t?void 0:t.headers),a.body=JSON.stringify(s)):a.body=s,y(y({},a),r)):a};async function J(e,t,r,s,a,n){return new Promise((i,o)=>{e(r,z(t,s,a,n)).then(e=>{if(!e.ok)throw e;if(null==s?void 0:s.noResolveJson)return e;let t=e.headers.get("content-type");return t&&t.includes("application/json")?e.json():{}}).then(e=>i(e)).catch(e=>H(e,o,s))})}async function K(e,t,r,s,a){return J(e,"POST",t,s,a,r)}var G=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=y(y({},R),t),this.fetch=V(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(e){try{return{data:await K(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers})||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(B(e))return{data:null,error:e};throw e}}async getIndex(e,t){try{return{data:await K(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(B(e))return{data:null,error:e};throw e}}async listIndexes(e){try{return{data:await K(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(B(e))return{data:null,error:e};throw e}}async deleteIndex(e,t){try{return{data:await K(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers})||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(B(e))return{data:null,error:e};throw e}}},X=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=y(y({},R),t),this.fetch=V(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(e){try{if(e.vectors.length<1||e.vectors.length>500)throw Error("Vector batch size must be between 1 and 500 items");return{data:await K(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers})||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(B(e))return{data:null,error:e};throw e}}async getVectors(e){try{return{data:await K(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(B(e))return{data:null,error:e};throw e}}async listVectors(e){try{if(void 0!==e.segmentCount){if(e.segmentCount<1||e.segmentCount>16)throw Error("segmentCount must be between 1 and 16");if(void 0!==e.segmentIndex&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:await K(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(B(e))return{data:null,error:e};throw e}}async queryVectors(e){try{return{data:await K(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(B(e))return{data:null,error:e};throw e}}async deleteVectors(e){try{if(e.keys.length<1||e.keys.length>500)throw Error("Keys batch size must be between 1 and 500 items");return{data:await K(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers})||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(B(e))return{data:null,error:e};throw e}}},Q=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=y(y({},R),t),this.fetch=V(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){try{return{data:await K(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers})||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(B(e))return{data:null,error:e};throw e}}async getBucket(e){try{return{data:await K(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(B(e))return{data:null,error:e};throw e}}async listBuckets(e={}){try{return{data:await K(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(B(e))return{data:null,error:e};throw e}}async deleteBucket(e){try{return{data:await K(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers})||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(B(e))return{data:null,error:e};throw e}}},W=class extends Q{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new Y(this.url,this.headers,e,this.fetch)}async createBucket(e){return super.createBucket.call(this,e)}async getBucket(e){return super.getBucket.call(this,e)}async listBuckets(e={}){return super.listBuckets.call(this,e)}async deleteBucket(e){return super.deleteBucket.call(this,e)}},Y=class extends G{constructor(e,t,r,s){super(e,t,s),this.vectorBucketName=r}async createIndex(e){return super.createIndex.call(this,y(y({},e),{},{vectorBucketName:this.vectorBucketName}))}async listIndexes(e={}){return super.listIndexes.call(this,y(y({},e),{},{vectorBucketName:this.vectorBucketName}))}async getIndex(e){return super.getIndex.call(this,this.vectorBucketName,e)}async deleteIndex(e){return super.deleteIndex.call(this,this.vectorBucketName,e)}index(e){return new Z(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},Z=class extends X{constructor(e,t,r,s,a){super(e,t,a),this.vectorBucketName=r,this.indexName=s}async putVectors(e){return super.putVectors.call(this,y(y({},e),{},{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))}async getVectors(e){return super.getVectors.call(this,y(y({},e),{},{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))}async listVectors(e={}){return super.listVectors.call(this,y(y({},e),{},{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))}async queryVectors(e){return super.queryVectors.call(this,y(y({},e),{},{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))}async deleteVectors(e){return super.deleteVectors.call(this,y(y({},e),{},{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))}},ee=class extends N{constructor(e,t={},r,s){super(e,t,r,s)}from(e){return new A(this.url,this.headers,e,this.fetch)}get vectors(){return new W(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new U(this.url+"/iceberg",this.headers,this.fetch)}};t.StorageAnalyticsClient=U,t.StorageApiError=o,t.StorageClient=ee,t.StorageError=n,t.StorageUnknownError=l,t.StorageVectorsApiError=q,t.StorageVectorsClient=W,t.StorageVectorsError=I,t.StorageVectorsErrorCode=F,t.StorageVectorsUnknownError=D,t.VectorBucketApi=Q,t.VectorBucketScope=Y,t.VectorDataApi=X,t.VectorIndexApi=G,t.VectorIndexScope=Z,t.isPlainObject=L,t.isStorageError=i,t.isStorageVectorsError=B,t.normalizeToFloat32=e=>Array.from(new Float32Array(e)),t.resolveFetch=V,t.resolveResponse=()=>Response,t.validateVectorDimension=(e,t)=>{if(void 0!==t&&e.float32.length!==t)throw Error(`Vector dimension mismatch: expected ${t}, got ${e.float32.length}`)}},14910:(e,t,r)=>{let s=r(62695),a=r(14717),n=r(7745),i=r(7994),o=r(15635),l="";"undefined"!=typeof Deno?l="deno":"undefined"!=typeof document?l="web":"undefined"!=typeof navigator&&"ReactNative"===navigator.product?l="react-native":l="node";let h={headers:{"X-Client-Info":`supabase-js-${l}/2.90.1`}},c={schema:"public"},u={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},d={};function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach(function(t){!function(e,t,r){var s;(s=function(e,t){if("object"!=p(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t||"default");if("object"!=p(s))return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==p(s)?s:s+"")in e)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let y=e=>e?(...t)=>e(...t):(...e)=>fetch(...e),g=()=>Headers,w=(e,t,r)=>{let s=y(r),a=g();return async(r,n)=>{var i;let o=null!==(i=await t())&&void 0!==i?i:e,l=new a(null==n?void 0:n.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization",`Bearer ${o}`),s(r,m(m({},n),{},{headers:l}))}};var b=class extends o.AuthClient{constructor(e){super(e)}},v=class{constructor(e,t,r){var s,n,o;this.supabaseUrl=e,this.supabaseKey=t;let l=function(e){let t=null==e?void 0:e.trim();if(!t)throw Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(t.endsWith("/")?t:t+"/")}catch(e){throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}(e);if(!t)throw Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);let p=`sb-${l.hostname.split(".")[0]}-auth-token`,f=function(e,t){var r,s;let{db:a,auth:n,realtime:i,global:o}=e,{db:l,auth:h,realtime:c,global:u}=t,d={db:m(m({},l),a),auth:m(m({},h),n),realtime:m(m({},c),i),storage:{},global:m(m(m({},u),o),{},{headers:m(m({},null!==(r=null==u?void 0:u.headers)&&void 0!==r?r:{}),null!==(s=null==o?void 0:o.headers)&&void 0!==s?s:{})}),accessToken:async()=>""};return e.accessToken?d.accessToken=e.accessToken:delete d.accessToken,d}(null!=r?r:{},{db:c,realtime:d,auth:m(m({},u),{},{storageKey:p}),global:h});this.storageKey=null!==(s=f.auth.storageKey)&&void 0!==s?s:"",this.headers=null!==(n=f.global.headers)&&void 0!==n?n:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(t)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(o=f.auth)&&void 0!==o?o:{},this.headers,f.global.fetch),this.fetch=w(t,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(m({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.accessToken&&this.accessToken().then(e=>this.realtime.setAuth(e)).catch(e=>console.warn("Failed to set initial Realtime auth token:",e)),this.rest=new a.PostgrestClient(new URL("rest/v1",l).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new i.StorageClient(this.storageUrl.href,this.headers,this.fetch,null==r?void 0:r.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new s.FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,t;if(this.accessToken)return await this.accessToken();let{data:r}=await this.auth.getSession();return null!==(e=null===(t=r.session)||void 0===t?void 0:t.access_token)&&void 0!==e?e:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,userStorage:a,storageKey:n,flowType:i,lock:o,debug:l,throwOnError:h},c,u){let d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new b({url:this.authUrl.href,headers:m(m({},d),c),storageKey:n,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,userStorage:a,flowType:i,lock:o,debug:l,throwOnError:h,fetch:u,hasCustomAuthorizationHeader:Object.keys(this.headers).some(e=>"authorization"===e.toLowerCase())})}_initRealtimeClient(e){return new n.RealtimeClient(this.realtimeUrl.href,m(m({},e),{},{params:m(m({},{apikey:this.supabaseKey}),null==e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null==t?void 0:t.access_token)})}_handleTokenChanged(e,t,r){("TOKEN_REFRESHED"===e||"SIGNED_IN"===e)&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0)}};(function(){if("undefined"!=typeof window)return!1;let e=globalThis.process;if(!e)return!1;let t=e.version;if(null==t)return!1;let r=t.match(/^v(\d+)\./);return!!r&&18>=parseInt(r[1],10)})()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217"),Object.defineProperty(t,"FunctionRegion",{enumerable:!0,get:function(){return s.FunctionRegion}}),Object.defineProperty(t,"FunctionsError",{enumerable:!0,get:function(){return s.FunctionsError}}),Object.defineProperty(t,"FunctionsFetchError",{enumerable:!0,get:function(){return s.FunctionsFetchError}}),Object.defineProperty(t,"FunctionsHttpError",{enumerable:!0,get:function(){return s.FunctionsHttpError}}),Object.defineProperty(t,"FunctionsRelayError",{enumerable:!0,get:function(){return s.FunctionsRelayError}}),Object.defineProperty(t,"PostgrestError",{enumerable:!0,get:function(){return a.PostgrestError}}),t.SupabaseClient=v,t.createClient=(e,t,r)=>new v(e,t,r),Object.keys(o).forEach(function(e){"default"===e||Object.prototype.hasOwnProperty.call(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})}),Object.keys(n).forEach(function(e){"default"===e||Object.prototype.hasOwnProperty.call(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}})})},17042:(e,t)=>{"use strict";var r=class extends Error{constructor(e,t){super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown="CommitStateUnknownException"===t.icebergType||[500,502,504].includes(t.status)&&t.icebergType?.includes("CommitState")===!0}isNotFound(){return 404===this.status}isConflict(){return 409===this.status}isAuthenticationTimeout(){return 419===this.status}};async function s(e){return e&&"none"!==e.type?"bearer"===e.type?{Authorization:`Bearer ${e.token}`}:"header"===e.type?{[e.name]:e.value}:"custom"===e.type?await e.getHeaders():{}:{}}function a(e){return e.join("\x1f")}var n=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){let t=e?{parent:a(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(e=>({namespace:e}))}async createNamespace(e,t){let r={namespace:e.namespace,properties:t?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${a(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${a(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${a(e.namespace)}`}),!0}catch(e){if(e instanceof r&&404===e.status)return!1;throw e}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(e){if(e instanceof r&&409===e.status)return;throw e}}};function i(e){return e.join("\x1f")}var o=class{constructor(e,t="",r){this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${i(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){let r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${i(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){let r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${i(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${i(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String(t?.purge??!1)}})}async loadTable(e){let t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${i(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){let t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${i(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(e){if(e instanceof r&&404===e.status)return!1;throw e}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(s){if(s instanceof r&&409===s.status)return await this.loadTable({namespace:e.namespace,name:t.name});throw s}}},l=class{constructor(e){let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);let a=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=function(e){let t=e.fetchImpl??globalThis.fetch;return{async request({method:a,path:n,query:i,body:o,headers:l}){let h=function(e,t,r){let s=new URL(t,e);if(r)for(let[e,t]of Object.entries(r))void 0!==t&&s.searchParams.set(e,t);return s.toString()}(e.baseUrl,n,i),c=await s(e.auth),u=await t(h,{method:a,headers:{...o?{"Content-Type":"application/json"}:{},...c,...l},body:o?JSON.stringify(o):void 0}),d=await u.text(),p=(u.headers.get("content-type")||"").includes("application/json"),f=p&&d?JSON.parse(d):d;if(!u.ok){let e=p?f:void 0,t=e?.error;throw new r(t?.message??`Request failed with status ${u.status}`,{status:u.status,icebergType:t?.type,icebergCode:t?.code,details:e})}return{status:u.status,headers:u.headers,data:f}}}}({baseUrl:a,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=e.accessDelegation?.join(","),this.namespaceOps=new n(this.client,t),this.tableOps=new o(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},h=/^decimal\s*\(\s*(\d+)\s*,\s*(\d+)\s*\)$/,c=/^fixed\s*\[\s*(\d+)\s*\]$/;function u(e){let t=e.match(h);return t?{precision:parseInt(t[1],10),scale:parseInt(t[2],10)}:null}function d(e){let t=e.match(c);return t?{length:parseInt(t[1],10)}:null}t.IcebergError=r,t.IcebergRestCatalog=l,t.getCurrentSchema=function(e){return e.schemas.find(t=>t["schema-id"]===e["current-schema-id"])},t.isDecimalType=function(e){return h.test(e)},t.isFixedType=function(e){return c.test(e)},t.parseDecimalType=u,t.parseFixedType=d,t.typesEqual=function(e,t){let r=u(e),s=u(t);if(r&&s)return r.precision===s.precision&&r.scale===s.scale;let a=d(e),n=d(t);return a&&n?a.length===n.length:e===t}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[276,609,417],()=>r(67219));module.exports=s})();