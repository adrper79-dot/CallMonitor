"use strict";(()=>{var e={};e.id=829,e.ids=[829],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},97632:(e,s,a)=>{a.r(s),a.d(s,{originalPathname:()=>g,patchFetch:()=>p,requestAsyncStorage:()=>d,routeModule:()=>u,serverHooks:()=>h,staticGenerationAsyncStorage:()=>m});var t={};a.r(t),a.d(t,{GET:()=>c});var r=a(49303),i=a(88716),l=a(60670),n=a(87070),o=a(62632);async function c(e){let s=[],a=Date.now();try{let e=Date.now(),{error:a}=await o.default.from("organizations").select("id").limit(1),t=Date.now()-e;a?s.push({service:"database",status:"critical",message:`Database query failed: ${a.message}`,responseTime:t}):s.push({service:"database",status:"healthy",message:"Database connection successful",responseTime:t})}catch(e){s.push({service:"database",status:"critical",message:`Database check failed: ${e?.message||"Unknown error"}`})}try{let e=Date.now(),a=process.env.SIGNALWIRE_PROJECT_ID,t=process.env.SIGNALWIRE_TOKEN,r=process.env.SIGNALWIRE_SPACE;if(a&&t&&r){let i=`https://${r.replace(/^https?:\/\//,"").replace(/\/$/,"").replace(/\.signalwire\.com$/i,"")}.signalwire.com/api/laml/2010-04-01/Accounts/${a}.json`,l=new AbortController,n=setTimeout(()=>l.abort(),5e3);try{let r=await fetch(i,{method:"GET",headers:{Authorization:`Basic ${Buffer.from(`${a}:${t}`).toString("base64")}`},signal:l.signal});clearTimeout(n);let o=Date.now()-e;r.ok?s.push({service:"signalwire",status:"healthy",message:"SignalWire API accessible",responseTime:o}):s.push({service:"signalwire",status:"degraded",message:`SignalWire API returned ${r.status}`,responseTime:o})}catch(e){clearTimeout(n),s.push({service:"signalwire",status:"degraded",message:`SignalWire API unreachable: ${e?.message||"Timeout"}`})}}else s.push({service:"signalwire",status:"degraded",message:"SignalWire credentials not configured"})}catch(e){s.push({service:"signalwire",status:"degraded",message:`SignalWire check failed: ${e?.message||"Unknown error"}`})}try{let e=Date.now(),a=process.env.ASSEMBLYAI_API_KEY;if(a){let t=new AbortController,r=setTimeout(()=>t.abort(),5e3);try{let i=await fetch("https://api.assemblyai.com/v2/health",{method:"GET",headers:{Authorization:a},signal:t.signal});clearTimeout(r);let l=Date.now()-e;i.ok?s.push({service:"assemblyai",status:"healthy",message:"AssemblyAI API accessible",responseTime:l}):s.push({service:"assemblyai",status:"degraded",message:`AssemblyAI API returned ${i.status}`,responseTime:l})}catch(e){clearTimeout(r),s.push({service:"assemblyai",status:"degraded",message:`AssemblyAI API unreachable: ${e?.message||"Timeout"}`})}}else s.push({service:"assemblyai",status:"degraded",message:"AssemblyAI API key not configured"})}catch(e){s.push({service:"assemblyai",status:"degraded",message:`AssemblyAI check failed: ${e?.message||"Unknown error"}`})}try{let e=Date.now(),{data:a,error:t}=await o.default.storage.listBuckets(),r=Date.now()-e;t?s.push({service:"supabase_storage",status:"degraded",message:`Storage access failed: ${t.message}`,responseTime:r}):s.push({service:"supabase_storage",status:"healthy",message:"Supabase Storage accessible",responseTime:r})}catch(e){s.push({service:"supabase_storage",status:"degraded",message:`Storage check failed: ${e?.message||"Unknown error"}`})}let t=s.filter(e=>"critical"===e.status).length,r=s.filter(e=>"degraded"===e.status).length,i="healthy";t>0?i="critical":r>0&&(i="degraded");let l=Date.now()-a,c={status:i,timestamp:new Date().toISOString(),checks:s},u="critical"===i?503:200,d=n.NextResponse.json(c,{status:u});return d.headers.set("X-Health-Check-Time",`${l}ms`),d}let u=new r.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/health/route",pathname:"/api/health",filename:"route",bundlePath:"app/api/health/route"},resolvedPagePath:"C:\\Users\\Ultimate Warrior\\My project\\gemini-project\\app\\api\\health\\route.ts",nextConfigOutput:"",userland:t}),{requestAsyncStorage:d,staticGenerationAsyncStorage:m,serverHooks:h}=u,g="/api/health/route";function p(){return(0,l.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:m})}},62632:(e,s,a)=>{a.r(s),a.d(s,{default:()=>t});let t={from:e=>({insert:async e=>({data:[e],error:null}),update:async e=>({data:[e],error:null}),select:s=>(function(e,s){let a={_table:e,_cols:s,eq:(e,s)=>a,in:(e,s)=>a,limit:e=>a,order:(e,s)=>a,single:async()=>({data:null,error:null})};return a.then=(e,s)=>Promise.resolve({data:null,error:null}).then(e,s),a.catch=e=>Promise.resolve({data:null,error:null}).catch(e),a})(e,s),in:(e,s)=>({data:null,error:null})})}}};var s=require("../../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),t=s.X(0,[276,972],()=>a(97632));module.exports=t})();