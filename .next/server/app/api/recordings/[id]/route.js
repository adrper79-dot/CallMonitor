"use strict";(()=>{var e={};e.id=490,e.ids=[490],e.modules={72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},27790:e=>{e.exports=require("assert")},78893:e=>{e.exports=require("buffer")},84770:e=>{e.exports=require("crypto")},17702:e=>{e.exports=require("events")},32615:e=>{e.exports=require("http")},35240:e=>{e.exports=require("https")},86624:e=>{e.exports=require("querystring")},17360:e=>{e.exports=require("url")},21764:e=>{e.exports=require("util")},71568:e=>{e.exports=require("zlib")},22259:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>m,patchFetch:()=>h,requestAsyncStorage:()=>g,routeModule:()=>p,serverHooks:()=>f,staticGenerationAsyncStorage:()=>x});var s={};t.r(s),t.d(s,{GET:()=>d});var o=t(49303),n=t(88716),i=t(60670),a=t(87070),u=t(45609),l=t(62632),c=t(43828);async function d(e,{params:r}){try{let e=await (0,u.getServerSession)();if(!e?.user?.id)return a.NextResponse.json({error:"Unauthorized"},{status:401});let t=r.id,{data:s,error:o}=await l.default.from("recordings").select("*").eq("id",t).single();if(o)throw o;if(!s)return a.NextResponse.json({error:"Recording not found"},{status:404});let n="https://fiijrhpjpebevfavzlhu.supabase.co",i=process.env.SUPABASE_SERVICE_ROLE_KEY;if(!n||!i)return a.NextResponse.json({error:"Storage configuration missing"},{status:500});let d=(0,c.eI)(n,i),p=s.recording_url?.match(/\/storage\/v1\/object\/public\/([^/]+)\/(.+)/);if(!p)return a.NextResponse.json({success:!0,recording:s,signedUrl:s.recording_url});let[,g,x]=p,{data:f,error:m}=await d.storage.from(g).createSignedUrl(x,3600);if(m)return console.error("Failed to generate signed URL:",m),a.NextResponse.json({success:!0,recording:s,signedUrl:s.recording_url});return a.NextResponse.json({success:!0,recording:s,signedUrl:f?.signedUrl||s.recording_url})}catch(e){return console.error("GET /api/recordings/[id] error:",e),a.NextResponse.json({error:e?.message||"Failed to fetch recording"},{status:500})}}let p=new o.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/recordings/[id]/route",pathname:"/api/recordings/[id]",filename:"route",bundlePath:"app/api/recordings/[id]/route"},resolvedPagePath:"C:\\Users\\Ultimate Warrior\\My project\\gemini-project\\app\\api\\recordings\\[id]\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:g,staticGenerationAsyncStorage:x,serverHooks:f}=p,m="/api/recordings/[id]/route";function h(){return(0,i.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:x})}},62632:(e,r,t)=>{t.r(r),t.d(r,{default:()=>s});let s={from:e=>({insert:async e=>({data:[e],error:null}),update:async e=>({data:[e],error:null}),select:r=>(function(e,r){let t={_table:e,_cols:r,eq:(e,r)=>t,in:(e,r)=>t,limit:e=>t,order:(e,r)=>t,single:async()=>({data:null,error:null})};return t.then=(e,r)=>Promise.resolve({data:null,error:null}).then(e,r),t.catch=e=>Promise.resolve({data:null,error:null}).catch(e),t})(e,r),in:(e,r)=>({data:null,error:null})})}}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[276,972,609,417],()=>t(22259));module.exports=s})();