(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{621:function(e,n,t){Promise.resolve().then(t.bind(t,1265)),Promise.resolve().then(t.bind(t,5613))},1265:function(e,n,t){"use strict";t.d(n,{default:function(){return l}});var i=t(7437);t(2265);var a=t(605);function l(e){let{children:n}=e;return(0,i.jsx)(a.SessionProvider,{children:n})}},5613:function(e,n,t){"use strict";t.d(n,{default:function(){return s}});var i=t(7437),a=t(2265),l=t(605);function s(){let{data:e}=(0,l.useSession)(),[n,t]=(0,a.useState)(""),[s,r]=(0,a.useState)(""),[d,u]=(0,a.useState)(""),[o,p]=(0,a.useState)(null),[c,f]=(0,a.useState)("email"),[m,g]=(0,a.useState)(null);async function h(e){if(e.preventDefault(),p("sending"),"email"===c){let e=(n||"").trim();if(!/^[^@\s]+@[^@\s]+\.[^@\s]+$/.test(e)){p("invalid email");return}let t=await (0,l.signIn)("email",{email:e,redirect:!1});t&&t.error?p("failed"):p("sent")}else{let e=(s||n).trim(),t=await (0,l.signIn)("credentials",{username:e,password:d,redirect:!1});t&&t.error?p("failed"):p("signed-in")}}if((0,a.useEffect)(()=>{let e=!0;return fetch("/api/_health/auth-providers").then(e=>e.json()).then(n=>{!e||(g(!!((null==n?void 0:n.adapterEnv)&&(null==n?void 0:n.resendEnv))),(null==n?void 0:n.adapterEnv)||f("credentials"))}).catch(()=>{e&&g(!1)}),()=>{e=!1}},[]),e){var x;return(0,i.jsxs)("div",{style:{padding:8,background:"#f3f4f6",borderBottom:"1px solid #e5e7eb"},children:["Signed in as ",null===(x=e.user)||void 0===x?void 0:x.email]})}return(0,i.jsxs)("div",{style:{padding:8,background:"#f9fafb",borderBottom:"1px solid #e5e7eb"},children:[(0,i.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[!1!==m&&(0,i.jsxs)("button",{type:"button",onClick:()=>f("email"),style:{padding:6},children:["email"===c?"•":" "," Email link"]}),(0,i.jsxs)("button",{type:"button",onClick:()=>f("credentials"),style:{padding:6},children:["credentials"===c?"•":" "," Username/Password"]})]}),(0,i.jsxs)("form",{onSubmit:h,style:{display:"flex",gap:8,alignItems:"center",marginTop:8},children:["email"===c?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("input",{"aria-label":"email",placeholder:"email",value:n,onChange:e=>t(e.target.value),style:{padding:"6px 8px"}}),(0,i.jsx)("button",{type:"submit",style:{padding:"6px 10px"},children:"Send sign-in link"})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("input",{"aria-label":"username",placeholder:"username or email",value:s,onChange:e=>r(e.target.value),style:{padding:"6px 8px"}}),(0,i.jsx)("input",{"aria-label":"password",placeholder:"password",type:"password",value:d,onChange:e=>u(e.target.value),style:{padding:"6px 8px"}}),(0,i.jsx)("button",{type:"submit",style:{padding:"6px 10px"},children:"Sign in"})]}),o&&(0,i.jsx)("span",{style:{marginLeft:8},children:o})]})]})}}},function(e){e.O(0,[605,971,117,744],function(){return e(e.s=621)}),_N_E=e.O()}]);