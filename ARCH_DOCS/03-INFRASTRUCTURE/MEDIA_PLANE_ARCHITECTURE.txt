<DOCUMENT filename="MEDIA_PLANE_ARCHITECTURE.txt">
# **LATIMER WOODS TECHNOLOGIES – MEDIA PLANE ARCHITECTURE (v3)**

**PRODUCT:** Word Is Bond Platform
**COMPONENT:** Media Plane Architecture
**VERSION:** 3.0
**LAST UPDATED:** 2026-01-09
**ARCHITECTURE AUTHORITY:** Subordinate to MASTER_ARCHITECTURE.txt & DB_STRATEGY_ARCHITECTURE.ini

---

## **PURPOSE**

This document defines the **Media Plane architecture** for the Word Is Bond Platform, aligned with MASTER_ARCHITECTURE.txt v4.1 updates:

* **Voice-first, call-rooted design**: The *call* is the root object; all features (recording, transcription, translation, surveys, secret shopper) are call modulations.
* **SignalWire-first v1**: SignalWire is the authoritative media execution plane in v1; no FreeSWITCH dependency.
* **Two design phases**:
  * **Phase 1 (SignalWire-Only / Current v1)**: SignalWire handles call origination, anchoring, streaming, and modulations (e.g., translation injection, survey prompts, shopper scripts).
  * **Phase 2 (FreeSWITCH Integration / v2+ Release)**: FreeSWITCH augments as a private media layer for advanced processing, maintaining SignalWire compatibility.
* **AssemblyAI integration**: Serves as the intelligence plane for transcription, NLP, and scoring in both phases.

This phased approach enables quick v1 shipping with full feature parity while providing a clear upgrade path to enhanced media handling in v2+.

---

## **SECTION 1: ARCHITECTURAL POSITION**

### **System Layer Model (Updated for v1 SignalWire-First)**

```
┌─────────────────────────────────────────────────────────────────┐
│  CONTROL PLANE (CPID) - One Voice Operations UI                 │
│  Configures call modulations: recording, translation, surveys   │
│  Secret shopper as synthetic call generator                     │
└─────────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────────┐
│  CALL ARTIFACT SERVICE (CAS) - Artifact Lifecycle                │
│  Idempotent upserts, evidence manifests, exports                │
│  AssemblyAI vertical: transcription/NLP/scoring                 │
└─────────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────────┐
│  MEDIA EXECUTION PLANE - SignalWire (v1) / FreeSWITCH (v2+)     │
│  Call origination, anchoring, RTP streaming                     │
│  Modulations: translation injection, survey prompts, scripts    │
└─────────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────────┐
│  POSTGRES - Storage Layer                                       │
│  Call-rooted tables: calls, recordings, scored_recordings       │
└─────────────────────────────────────────────────────────────────┘
```

* **v1 Simplifications**: No COE (removed per MASTER); SignalWire handles all media directly via API/LaML.
* **Call as Root**: All operations modulate existing calls or originate new ones (e.g., shopper synthetics).
* **No Tool Sprawl**: Features are not separate "tools"—they're call properties/toggles.

### **Phase 1 – SignalWire-Only (Current v1 Phase)**

* SignalWire API/LaML for call control.
* Direct integration with AssemblyAI for intelligence (transcription, NLP).
* Supports all v1 features: recording, translation, surveys, secret shopper (as synthetic calls with scripts).

```
┌────────────────────────┐
│ One Voice Ops UI       │
│ (CPID)                 │
└────────────────────────┘
          │ Configures modulations
          ▼
┌────────────────────────┐
│ CAS API                │
│ Triggers calls/modulations
└────────────────────────┘
          │
          ▼
┌────────────────────────┐
│ SignalWire API/LaML    │
│ Call origination       │
│ RTP streaming          │
│ Modulation injection   │
└────────────────────────┘
          │ Audio streams
          ▼
┌────────────────────────┐
│ AssemblyAI             │
│ Transcription/NLP      │
│ Scoring                │
└────────────────────────┘
          │ Artifacts
          ▼
┌────────────────────────┐
│ Postgres (Artifacts)   │
└────────────────────────┘
```

### **Phase 2 – FreeSWITCH Integration (v2+ Phase)**

* FreeSWITCH as augmentation layer for low-latency, advanced modulations.
* SignalWire remains compatible; calls can anchor via FreeSWITCH for enhanced processing.
* Enables v2+ features without changing v1 call contract.

```
┌────────────────────────┐
│ One Voice Ops UI       │
└────────────────────────┘
          │
          ▼
┌────────────────────────┐
│ CAS API                │
└────────────────────────┘
          │
          ▼
┌────────────────────────┐   ┌────────────────────────┐
│ SignalWire Gateway     │───│ FreeSWITCH (Private)   │
│ SIP Trunk              │   │ ESL API                │
└────────────────────────┘   │ Advanced modulations   │
                             └────────────────────────┘
                                       │
                                       ▼
┌────────────────────────┐
│ AssemblyAI             │
└────────────────────────┘
          │
          ▼
┌────────────────────────┐
│ Postgres               │
└────────────────────────┘
```

---

## **SECTION 2: CALL FLOWS (CALL-ROOTED DESIGN)**

### **Core Call Flow (v1 SignalWire)**

1. UI/API triggers call via SignalWire API.
2. LaML modulates: record, inject translation/survey/script.
3. RTP streams to AssemblyAI for real-time intelligence.
4. Artifacts upserted to Postgres (immutable).
5. Evidence manifest generated.

**Example: Secret Shopper Modulation**

* Synthetic call originated with shopper script.
* Modulated as standard call: recording + scoring.
* No separate "tool"—just call with 'source: shopper'.

### **Phase 2 Enhancements**

* Calls anchor in FreeSWITCH for low-latency injection.
* ESL events feed KPI/evidence pipeline.
* Unchanged call contract: modulations remain API-driven.

---

## **SECTION 3: DEPLOYMENT & SECURITY**

### **Phase 1 Deployment (SignalWire-Only)**

* **Provider**: SignalWire cloud.
* **Security**: API keys rotated; HTTPS only.
* **Cost**: ~$0.005/min per call.
* **Scaling**: Auto via SignalWire.

### **Phase 2 Deployment (FreeSWITCH)**

* **Provider**: GCP Compute Engine (t2d-standard-1).
* **Security**: Private VPC; SIP over TLS; credential rotation.
* **Cost**: ~$65/month + bandwidth.
* **Scaling**: Horizontal (add nodes).

---

## **SECTION 4: INTEGRATIONS**

* **AssemblyAI**: Webhook for transcription/NLP; feeds scoring.
* **Health Checks**: SignalWire status API; feature flag disables if unhealthy.
* **KPI/Evidence**: Consumes SignalWire events in v1; FreeSWITCH in v2+.

---

## **SECTION 5: IMPLEMENTATION CHECKLIST**

### **Phase 1 – SignalWire-Only**

☐ Integrate SignalWire API/LaML for call modulations.
☐ Set up AssemblyAI streaming for intelligence.
☐ Build evidence manifest generation.
☐ Health checks for SignalWire ↔ AssemblyAI.

### **Phase 2 – FreeSWITCH Integration (v2+)**

☐ Provision FreeSWITCH on GCP.
☐ Configure SIP trunk to SignalWire.
☐ Set up ESL API.
☐ Integrate FreeSWITCH events to KPI pipeline.
☐ Update call anchoring for modulations.
☐ Add health checks/alerts.

---

## **SECTION 6: FUTURE NOTES**

* FreeSWITCH enables advanced v2+ features (e.g., multi-party, custom audio injection) without v1 changes.
* Staged rollout: v1 ships SignalWire-only; v2 adds FreeSWITCH opt-in.
* Documentation accommodates both: v1 runbooks focus on SignalWire; v2 adds FreeSWITCH specifics.

---

✅ **Next Steps:**

1. Update diagrams with call-rooted flows (Mermaid in ARCH_DOCS/media_plane_diagram.md).
2. Annotate v1 components in green; v2 in gray.
3. Align runbooks with SignalWire-first (remove COE references).
4. Validate v1 feature parity (translation, surveys, shopper) via SignalWire LaML.

---
LATIMER WOODS TECHNOLOGIES – MEDIA PLANE ARCHITECTURE (v2.1 REDLINE)

PRODUCT: Word Is Bond Platform
COMPONENT: Media Plane Architecture
VERSION: 2.1 (Redlined)
LAST UPDATED: 2026-01-09
ARCHITECTURE AUTHORITY: MASTER_ARCHITECTURE.txt

DESIGN LANGUAGE (UI & PRODUCT TONE)

Visual System:

Primary colors: White (#FFFFFF) and Signal Red (#C4001A)

Accents: graphite gray, soft chrome

Form language: futuristic curves, soft capsules, orbital layouts

Vibe: Jetsons-era optimism meets modern control systems

Copy Voice:

Confident, concise, flirtatiously technical

Reads like a 1960s Playboy technology column

Assumes the reader is intelligent, busy, and successful

PURPOSE (UPDATED)

This document defines the Media Plane architecture for the Word Is Bond Platform using a two-phase transition model:

Phase 1 (Current / Shipping): SignalWire-mediated media plane

Phase 2 (Future / Flagged): Private FreeSWITCH media plane

The platform is designed as an artifact factory: every call produces structured, auditable intelligence—ready for executives, operators, and regulators alike.

SECTION 1: ARCHITECTURAL POSITION
Phase 1 – SignalWire Media Plane (CURRENT)
┌───────────────────────────────────────────────┐
│ CONTROL PLANE (CPID)                          │
│ Dashboards · Toggles · Reports                │
└───────────────────────────────────────────────┘
                     │
                     ▼
┌───────────────────────────────────────────────┐
│ CALL ORCHESTRATION ENGINE (COE)               │
│ Intent · Policy · Artifact Authority          │
│ - Initiates calls via SignalWire              │
│ - Authorizes media streaming                  │
│ - Coordinates AI + Evidence generation        │
└───────────────────────────────────────────────┘
                     │
                     ▼
┌───────────────────────────────────────────────┐
│ VENDOR MEDIA & AI SERVICES                    │
│ SignalWire · AssemblyAI · OpenAI              │
│ - PSTN origination & recording                │
│ - Real-time transcription & translation       │
│ - Summarization, scoring, sentiment            │
└───────────────────────────────────────────────┘

REDLINE CHANGE:

❌ Removed Deepgram as canonical vendor

✅ AssemblyAI designated as primary transcription + language intelligence layer

✅ COE clarified as orchestration authority, not media proxy

Phase 2 – FreeSWITCH Media Plane (FUTURE / FEATURE-FLAGGED)
┌───────────────────────────────────────────────┐
│ CONTROL PLANE (CPID)                          │
│ Executive Views · Operational Controls        │
└───────────────────────────────────────────────┘
                     │
                     ▼
┌───────────────────────────────────────────────┐
│ CALL ORCHESTRATION ENGINE (COE)               │
│ Policy · Routing · Artifact Governance        │
└───────────────────────────────────────────────┘
                     │
                     ▼
┌───────────────────────────────────────────────┐
│ PRIVATE MEDIA PLANE (FreeSWITCH)              │
│ Audio Anchoring · Injection · Recording       │
│ - Multi-party & conferencing                  │
│ - Translation injection                       │
│ - Secure AI streaming                         │
└───────────────────────────────────────────────┘
                     │
                     ▼
┌───────────────────────────────────────────────┐
│ AI SERVICES                                   │
│ AssemblyAI · OpenAI                           │
└───────────────────────────────────────────────┘

REDLINE CHANGE:

FreeSWITCH explicitly non-customer-facing

Introduced as a pure infrastructure layer

SECTION 2: CANONICAL ARTIFACT MODEL (NEW – CRITICAL)

Every call—test, live, shopper, or translated—produces a canonical Evidence Manifest.

Core Artifacts:

Recording (SignalWire / FreeSWITCH)

Transcript (AssemblyAI)

Translation (AssemblyAI / OpenAI)

After-call survey results

Secret shopper evaluation

AI summaries and scores

Rules:

All artifacts bind to a single call_id

Artifacts are immutable once finalized

UI tools are views, not owners, of artifacts

This enables a single Voice Operations surface without tool sprawl.

SECTION 3: CALL FLOWS (CORRECTED)
Phase 1 – SignalWire (CURRENT)

COE instructs SignalWire to initiate call

SignalWire handles PSTN connection

SignalWire streams media to AssemblyAI (authorized by COE)

AI outputs returned to COE

COE assembles Evidence Manifest

After-call survey triggered (DTMF / SMS / email)

REDLINE CHANGE:

Clarified that SignalWire, not COE, is the media stream source

Phase 2 – FreeSWITCH (FUTURE)

COE initiates call via SignalWire

Call anchored into FreeSWITCH

FreeSWITCH streams audio to AssemblyAI

FreeSWITCH injects translations or prompts if required

COE assembles final Evidence Manifest

SECTION 4: STORAGE & INTEGRITY (UPDATED)

Primary recording source: SignalWire (Phase 1)

Optional secondary recording: FreeSWITCH (Phase 2)

Long-term artifact storage: Supabase Storage

Evidence manifests stored as immutable records

SECTION 5: SECURITY & COMPLIANCE ALIGNMENT

All media secured via TLS

FreeSWITCH restricted to private network

Artifact access governed by RBAC + plan gating

Full audit trail via Evidence Manifests

SECTION 6: PRODUCT INTENT (EXECUTIVE SUMMARY)

This system is not a phone tool.

It is a voice intelligence instrument—designed for operators who value clarity, confidence, and control.

White. Red. Precise.

No clutter. No guesswork. Just the truth, beautifully rendered.

The v2.1 redlined MASTER_ARCHITECTURE is now complete and aligned with:

✅ SignalWire-first v1

✅ AssemblyAI elevated as the canonical intelligence layer

✅ FreeSWITCH explicitly deferred and feature-flagged

✅ Single Voice Operations surface (no tool sprawl)

✅ Artifact-first, call-rooted integrity

✅ White + red, Jetsons-era futurism

✅ Sharp, confident copy written for a capable, executive audience

What changed materially (so engineering doesn’t miss it)

Architectural corrections

Media source authority clarified (SignalWire → AI, not COE proxying)

COE reasserted as policy + artifact authority, not media handler

Deepgram fully removed from the canonical path

Evidence Manifest promoted to a first-class architectural pillar

Product discipline

Translation, surveys, and secret shopper are now call modulations, not tools

UI is a lens, never a data owner

FreeSWITCH has a clean insertion point with zero v1 contamination

Design & UX clarity

A single Voice Operations page is now architecturally implied, not optional

Visual and copy standards are explicit enough to brief design without drift

What I recommend next (in strict priority order)

Lock the Call Modulation Contract

JSON schema used by UI, COE, and tests

Prevents toggle chaos

Generate the Voice Operations UI spec

Component-level layout (toggles, drawers, evidence panels)

White/red system tokens

Produce the Artifact Lifecycle Diagram

Call → Recording → AI → Manifest → Export

This becomes onboarding gold



</DOCUMENT>